(self.webpackChunkEarthify_UI=self.webpackChunkEarthify_UI||[]).push([[12],{185:(Dt,yt,Q)=>{"use strict";var V=Q(3033);function I(c){var nt=[1/0,1/0,-1/0,-1/0];return V.coordEach(c,function(H){nt[0]>H[0]&&(nt[0]=H[0]),nt[1]>H[1]&&(nt[1]=H[1]),nt[2]<H[0]&&(nt[2]=H[0]),nt[3]<H[1]&&(nt[3]=H[1])}),nt}I.default=I,yt.Z=I},483:function(Dt){Dt.exports=function(){"use strict";function Q(I,c,nt,H,ot){for(;H>nt;){if(H-nt>600){var ft=H-nt+1,It=c-nt+1,Tt=Math.log(ft),xt=.5*Math.exp(2*Tt/3),mt=.5*Math.sqrt(Tt*xt*(ft-xt)/ft)*(It-ft/2<0?-1:1);Q(I,c,Math.max(nt,Math.floor(c-It*xt/ft+mt)),Math.min(H,Math.floor(c+(ft-It)*xt/ft+mt)),ot)}var et=I[c],pt=nt,b=H;for(F(I,nt,c),ot(I[H],et)>0&&F(I,nt,H);pt<b;){for(F(I,pt,b),pt++,b--;ot(I[pt],et)<0;)pt++;for(;ot(I[b],et)>0;)b--}0===ot(I[nt],et)?F(I,nt,b):F(I,++b,H),b<=c&&(nt=b+1),c<=b&&(H=b-1)}}function F(I,c,nt){var H=I[c];I[c]=I[nt],I[nt]=H}function V(I,c){return I<c?-1:I>c?1:0}return function(I,c,nt,H,ot){Q(I,c,nt||0,H||I.length-1,ot||V)}}()},5454:(Dt,yt,Q)=>{"use strict";Dt.exports=V,Dt.exports.default=V;var F=Q(483);function V(b,S){if(!(this instanceof V))return new V(b,S);this._maxEntries=Math.max(4,b||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),S&&this._initFormat(S),this.clear()}function I(b,S,M){if(!M)return S.indexOf(b);for(var U=0;U<S.length;U++)if(M(b,S[U]))return U;return-1}function c(b,S){nt(b,0,b.children.length,S,b)}function nt(b,S,M,U,P){P||(P=et(null)),P.minX=1/0,P.minY=1/0,P.maxX=-1/0,P.maxY=-1/0;for(var O,N=S;N<M;N++)O=b.children[N],H(P,b.leaf?U(O):O);return P}function H(b,S){return b.minX=Math.min(b.minX,S.minX),b.minY=Math.min(b.minY,S.minY),b.maxX=Math.max(b.maxX,S.maxX),b.maxY=Math.max(b.maxY,S.maxY),b}function ot(b,S){return b.minX-S.minX}function ft(b,S){return b.minY-S.minY}function It(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function Tt(b){return b.maxX-b.minX+(b.maxY-b.minY)}function xt(b,S){return(Math.max(S.maxX,b.maxX)-Math.min(S.minX,b.minX))*(Math.max(S.maxY,b.maxY)-Math.min(S.minY,b.minY))}function mt(b,S){var M=Math.max(b.minX,S.minX),U=Math.max(b.minY,S.minY),P=Math.min(b.maxX,S.maxX),N=Math.min(b.maxY,S.maxY);return Math.max(0,P-M)*Math.max(0,N-U)}function wt(b,S){return b.minX<=S.minX&&b.minY<=S.minY&&S.maxX<=b.maxX&&S.maxY<=b.maxY}function qt(b,S){return S.minX<=b.maxX&&S.minY<=b.maxY&&S.maxX>=b.minX&&S.maxY>=b.minY}function et(b){return{children:b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function pt(b,S,M,U,P){for(var O,N=[S,M];N.length;)!((M=N.pop())-(S=N.pop())<=U)&&(O=S+Math.ceil((M-S)/U/2)*U,F(b,O,S,M,P),N.push(S,O,O,M))}V.prototype={all:function(){return this._all(this.data,[])},search:function(b){var S=this.data,M=[],U=this.toBBox;if(!qt(b,S))return M;for(var N,O,w,st,P=[];S;){for(N=0,O=S.children.length;N<O;N++)w=S.children[N],qt(b,st=S.leaf?U(w):w)&&(S.leaf?M.push(w):wt(b,st)?this._all(w,M):P.push(w));S=P.pop()}return M},collides:function(b){var S=this.data,M=this.toBBox;if(!qt(b,S))return!1;for(var P,N,O,w,U=[];S;){for(P=0,N=S.children.length;P<N;P++)if(O=S.children[P],qt(b,w=S.leaf?M(O):O)){if(S.leaf||wt(b,w))return!0;U.push(O)}S=U.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var S=0,M=b.length;S<M;S++)this.insert(b[S]);return this}var U=this._build(b.slice(),0,b.length-1,0);if(this.data.children.length)if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var P=this.data;this.data=U,U=P}this._insert(U,this.data.height-U.height-1,!0)}else this.data=U;return this},insert:function(b){return b&&this._insert(b,this.data.height-1),this},clear:function(){return this.data=et([]),this},remove:function(b,S){if(!b)return this;for(var O,w,st,z,M=this.data,U=this.toBBox(b),P=[],N=[];M||P.length;){if(M||(M=P.pop(),w=P[P.length-1],O=N.pop(),z=!0),M.leaf&&-1!==(st=I(b,M.children,S)))return M.children.splice(st,1),P.push(M),this._condense(P),this;z||M.leaf||!wt(M,U)?w?(O++,M=w.children[O],z=!1):M=null:(P.push(M),N.push(O),O=0,w=M,M=M.children[0])}return this},toBBox:function(b){return b},compareMinX:ot,compareMinY:ft,toJSON:function(){return this.data},fromJSON:function(b){return this.data=b,this},_all:function(b,S){for(var M=[];b;)b.leaf?S.push.apply(S,b.children):M.push.apply(M,b.children),b=M.pop();return S},_build:function(b,S,M,U){var O,P=M-S+1,N=this._maxEntries;if(P<=N)return c(O=et(b.slice(S,M+1)),this.toBBox),O;U||(U=Math.ceil(Math.log(P)/Math.log(N)),N=Math.ceil(P/Math.pow(N,U-1))),(O=et([])).leaf=!1,O.height=U;var z,K,R,Ot,w=Math.ceil(P/N),st=w*Math.ceil(Math.sqrt(N));for(pt(b,S,M,st,this.compareMinX),z=S;z<=M;z+=st)for(pt(b,z,R=Math.min(z+st-1,M),w,this.compareMinY),K=z;K<=R;K+=w)Ot=Math.min(K+w-1,R),O.children.push(this._build(b,K,Ot,U-1));return c(O,this.toBBox),O},_chooseSubtree:function(b,S,M,U){for(var P,N,O,w,st,z,K,R;U.push(S),!S.leaf&&U.length-1!==M;){for(K=R=1/0,P=0,N=S.children.length;P<N;P++)st=It(O=S.children[P]),(z=xt(b,O)-st)<R?(R=z,K=st<K?st:K,w=O):z===R&&st<K&&(K=st,w=O);S=w||S.children[0]}return S},_insert:function(b,S,M){var P=M?b:(0,this.toBBox)(b),N=[],O=this._chooseSubtree(P,this.data,S,N);for(O.children.push(b),H(O,P);S>=0&&N[S].children.length>this._maxEntries;)this._split(N,S),S--;this._adjustParentBBoxes(P,N,S)},_split:function(b,S){var M=b[S],U=M.children.length,P=this._minEntries;this._chooseSplitAxis(M,P,U);var N=this._chooseSplitIndex(M,P,U),O=et(M.children.splice(N,M.children.length-N));O.height=M.height,O.leaf=M.leaf,c(M,this.toBBox),c(O,this.toBBox),S?b[S-1].children.push(O):this._splitRoot(M,O)},_splitRoot:function(b,S){this.data=et([b,S]),this.data.height=b.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},_chooseSplitIndex:function(b,S,M){var U,P,N,O,w,st,z,K;for(st=z=1/0,U=S;U<=M-S;U++)O=mt(P=nt(b,0,U,this.toBBox),N=nt(b,U,M,this.toBBox)),w=It(P)+It(N),O<st?(st=O,K=U,z=w<z?w:z):O===st&&w<z&&(z=w,K=U);return K},_chooseSplitAxis:function(b,S,M){var U=b.leaf?this.compareMinX:ot,P=b.leaf?this.compareMinY:ft;this._allDistMargin(b,S,M,U)<this._allDistMargin(b,S,M,P)&&b.children.sort(U)},_allDistMargin:function(b,S,M,U){b.children.sort(U);var st,z,P=this.toBBox,N=nt(b,0,S,P),O=nt(b,M-S,M,P),w=Tt(N)+Tt(O);for(st=S;st<M-S;st++)z=b.children[st],H(N,b.leaf?P(z):z),w+=Tt(N);for(st=M-S-1;st>=S;st--)z=b.children[st],H(O,b.leaf?P(z):z),w+=Tt(O);return w},_adjustParentBBoxes:function(b,S,M){for(var U=M;U>=0;U--)H(S[U],b)},_condense:function(b){for(var M,S=b.length-1;S>=0;S--)0===b[S].children.length?S>0?(M=b[S-1].children).splice(M.indexOf(b[S]),1):this.clear():c(b[S],this.toBBox)},_initFormat:function(b){var S=["return a"," - b",";"];this.compareMinX=new Function("a","b",S.join(b[0])),this.compareMinY=new Function("a","b",S.join(b[1])),this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+"};")}}},8410:(Dt,yt)=>{"use strict";function Q(z,K,R){void 0===R&&(R={});var Ot={type:"Feature"};return(0===R.id||R.id)&&(Ot.id=R.id),R.bbox&&(Ot.bbox=R.bbox),Ot.properties=K||{},Ot.geometry=z,Ot}function V(z,K,R){if(void 0===R&&(R={}),!z)throw new Error("coordinates is required");if(!Array.isArray(z))throw new Error("coordinates must be an Array");if(z.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!N(z[0])||!N(z[1]))throw new Error("coordinates must contain numbers");return Q({type:"Point",coordinates:z},K,R)}function c(z,K,R){void 0===R&&(R={});for(var Ot=0,Nt=z;Ot<Nt.length;Ot++){var G=Nt[Ot];if(G.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var lt=0;lt<G[G.length-1].length;lt++)if(G[G.length-1][lt]!==G[0][lt])throw new Error("First and last Position are not equivalent.")}return Q({type:"Polygon",coordinates:z},K,R)}function H(z,K,R){if(void 0===R&&(R={}),z.length<2)throw new Error("coordinates must be an array of two or more positions");return Q({type:"LineString",coordinates:z},K,R)}function ft(z,K){void 0===K&&(K={});var R={type:"FeatureCollection"};return K.id&&(R.id=K.id),K.bbox&&(R.bbox=K.bbox),R.features=z,R}function It(z,K,R){return void 0===R&&(R={}),Q({type:"MultiLineString",coordinates:z},K,R)}function Tt(z,K,R){return void 0===R&&(R={}),Q({type:"MultiPoint",coordinates:z},K,R)}function xt(z,K,R){return void 0===R&&(R={}),Q({type:"MultiPolygon",coordinates:z},K,R)}function qt(z,K){void 0===K&&(K="kilometers");var R=yt.factors[K];if(!R)throw new Error(K+" units is invalid");return z*R}function et(z,K){void 0===K&&(K="kilometers");var R=yt.factors[K];if(!R)throw new Error(K+" units is invalid");return z/R}function S(z){return z%(2*Math.PI)*180/Math.PI}function N(z){return!isNaN(z)&&null!==z&&!Array.isArray(z)}Object.defineProperty(yt,"__esModule",{value:!0}),yt.earthRadius=6371008.8,yt.factors={centimeters:100*yt.earthRadius,centimetres:100*yt.earthRadius,degrees:yt.earthRadius/111325,feet:3.28084*yt.earthRadius,inches:39.37*yt.earthRadius,kilometers:yt.earthRadius/1e3,kilometres:yt.earthRadius/1e3,meters:yt.earthRadius,metres:yt.earthRadius,miles:yt.earthRadius/1609.344,millimeters:1e3*yt.earthRadius,millimetres:1e3*yt.earthRadius,nauticalmiles:yt.earthRadius/1852,radians:1,yards:1.0936*yt.earthRadius},yt.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/yt.earthRadius,yards:1.0936133},yt.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},yt.feature=Q,yt.geometry=function(z,K,R){switch(void 0===R&&(R={}),z){case"Point":return V(K).geometry;case"LineString":return H(K).geometry;case"Polygon":return c(K).geometry;case"MultiPoint":return Tt(K).geometry;case"MultiLineString":return It(K).geometry;case"MultiPolygon":return xt(K).geometry;default:throw new Error(z+" is invalid")}},yt.point=V,yt.points=function(z,K,R){return void 0===R&&(R={}),ft(z.map(function(Ot){return V(Ot,K)}),R)},yt.polygon=c,yt.polygons=function(z,K,R){return void 0===R&&(R={}),ft(z.map(function(Ot){return c(Ot,K)}),R)},yt.lineString=H,yt.lineStrings=function(z,K,R){return void 0===R&&(R={}),ft(z.map(function(Ot){return H(Ot,K)}),R)},yt.featureCollection=ft,yt.multiLineString=It,yt.multiPoint=Tt,yt.multiPolygon=xt,yt.geometryCollection=function(z,K,R){return void 0===R&&(R={}),Q({type:"GeometryCollection",geometries:z},K,R)},yt.round=function(z,K){if(void 0===K&&(K=0),K&&!(K>=0))throw new Error("precision must be a positive number");var R=Math.pow(10,K||0);return Math.round(z*R)/R},yt.radiansToLength=qt,yt.lengthToRadians=et,yt.lengthToDegrees=function(z,K){return S(et(z,K))},yt.bearingToAzimuth=function(z){var K=z%360;return K<0&&(K+=360),K},yt.radiansToDegrees=S,yt.degreesToRadians=function(z){return z%360*Math.PI/180},yt.convertLength=function(z,K,R){if(void 0===K&&(K="kilometers"),void 0===R&&(R="kilometers"),!(z>=0))throw new Error("length must be a positive number");return qt(et(z,K),R)},yt.convertArea=function(z,K,R){if(void 0===K&&(K="meters"),void 0===R&&(R="kilometers"),!(z>=0))throw new Error("area must be a positive number");var Ot=yt.areaFactors[K];if(!Ot)throw new Error("invalid original units");var Nt=yt.areaFactors[R];if(!Nt)throw new Error("invalid final units");return z/Ot*Nt},yt.isNumber=N,yt.isObject=function(z){return!!z&&z.constructor===Object},yt.validateBBox=function(z){if(!z)throw new Error("bbox is required");if(!Array.isArray(z))throw new Error("bbox must be an Array");if(4!==z.length&&6!==z.length)throw new Error("bbox must be an Array of 4 or 6 numbers");z.forEach(function(K){if(!N(K))throw new Error("bbox must only contain numbers")})},yt.validateId=function(z){if(!z)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof z))throw new Error("id must be a number or a string")}},3033:(Dt,yt,Q)=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});var F=Q(8410);function V(M,U,P){if(null!==M)for(var N,O,w,st,z,K,R,G,Ot=0,Nt=0,lt=M.type,J="FeatureCollection"===lt,at="Feature"===lt,ct=J?M.features.length:1,Z=0;Z<ct;Z++){z=(G=!!(R=J?M.features[Z].geometry:at?M.geometry:M)&&"GeometryCollection"===R.type)?R.geometries.length:1;for(var bt=0;bt<z;bt++){var Lt=0,Xt=0;if(null!==(st=G?R.geometries[bt]:R)){K=st.coordinates;var At=st.type;switch(Ot=!P||"Polygon"!==At&&"MultiPolygon"!==At?0:1,At){case null:break;case"Point":if(!1===U(K,Nt,Z,Lt,Xt))return!1;Nt++,Lt++;break;case"LineString":case"MultiPoint":for(N=0;N<K.length;N++){if(!1===U(K[N],Nt,Z,Lt,Xt))return!1;Nt++,"MultiPoint"===At&&Lt++}"LineString"===At&&Lt++;break;case"Polygon":case"MultiLineString":for(N=0;N<K.length;N++){for(O=0;O<K[N].length-Ot;O++){if(!1===U(K[N][O],Nt,Z,Lt,Xt))return!1;Nt++}"MultiLineString"===At&&Lt++,"Polygon"===At&&Xt++}"Polygon"===At&&Lt++;break;case"MultiPolygon":for(N=0;N<K.length;N++){for(Xt=0,O=0;O<K[N].length;O++){for(w=0;w<K[N][O].length-Ot;w++){if(!1===U(K[N][O][w],Nt,Z,Lt,Xt))return!1;Nt++}Xt++}Lt++}break;case"GeometryCollection":for(N=0;N<st.geometries.length;N++)if(!1===V(st.geometries[N],U,P))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function c(M,U){var P;switch(M.type){case"FeatureCollection":for(P=0;P<M.features.length&&!1!==U(M.features[P].properties,P);P++);break;case"Feature":U(M.properties,0)}}function H(M,U){if("Feature"===M.type)U(M,0);else if("FeatureCollection"===M.type)for(var P=0;P<M.features.length&&!1!==U(M.features[P],P);P++);}function It(M,U){var P,N,O,w,st,z,K,R,Ot,Nt,G=0,lt="FeatureCollection"===M.type,J="Feature"===M.type,at=lt?M.features.length:1;for(P=0;P<at;P++){for(R=lt?M.features[P].properties:J?M.properties:{},Ot=lt?M.features[P].bbox:J?M.bbox:void 0,Nt=lt?M.features[P].id:J?M.id:void 0,st=(K=!!(z=lt?M.features[P].geometry:J?M.geometry:M)&&"GeometryCollection"===z.type)?z.geometries.length:1,O=0;O<st;O++)if(null!==(w=K?z.geometries[O]:z))switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===U(w,G,R,Ot,Nt))return!1;break;case"GeometryCollection":for(N=0;N<w.geometries.length;N++)if(!1===U(w.geometries[N],G,R,Ot,Nt))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===U(null,G,R,Ot,Nt))return!1;G++}}function xt(M,U){It(M,function(P,N,O,w,st){var K,z=null===P?null:P.type;switch(z){case null:case"Point":case"LineString":case"Polygon":return!1!==U(F.feature(P,O,{bbox:w,id:st}),N,0)&&void 0}switch(z){case"MultiPoint":K="Point";break;case"MultiLineString":K="LineString";break;case"MultiPolygon":K="Polygon"}for(var R=0;R<P.coordinates.length;R++)if(!1===U(F.feature({type:K,coordinates:P.coordinates[R]},O),N,R))return!1})}function wt(M,U){xt(M,function(P,N,O){var w=0;if(P.geometry){var st=P.geometry.type;if("Point"!==st&&"MultiPoint"!==st){var z,K=0,R=0,Ot=0;if(!1===V(P,function(Nt,G,lt,J,at){if(void 0===z||N>K||J>R||at>Ot)return z=Nt,K=N,R=J,Ot=at,void(w=0);var ct=F.lineString([z,Nt],P.properties);if(!1===U(ct,N,O,at,w))return!1;w++,z=Nt}))return!1}}})}function et(M,U){if(!M)throw new Error("geojson is required");xt(M,function(P,N,O){if(null!==P.geometry){var st=P.geometry.coordinates;switch(P.geometry.type){case"LineString":if(!1===U(P,N,O,0,0))return!1;break;case"Polygon":for(var z=0;z<st.length;z++)if(!1===U(F.lineString(st[z],P.properties),N,O,z))return!1}}})}yt.coordAll=function(M){var U=[];return V(M,function(P){U.push(P)}),U},yt.coordEach=V,yt.coordReduce=function(M,U,P,N){var O=P;return V(M,function(w,st,z,K,R){O=0===st&&void 0===P?w:U(O,w,st,z,K,R)},N),O},yt.featureEach=H,yt.featureReduce=function(M,U,P){var N=P;return H(M,function(O,w){N=0===w&&void 0===P?O:U(N,O,w)}),N},yt.findPoint=function(M,U){if(!F.isObject(U=U||{}))throw new Error("options is invalid");var z,P=U.featureIndex||0,N=U.multiFeatureIndex||0,O=U.geometryIndex||0,w=U.coordIndex||0,st=U.properties;switch(M.type){case"FeatureCollection":P<0&&(P=M.features.length+P),st=st||M.features[P].properties,z=M.features[P].geometry;break;case"Feature":st=st||M.properties,z=M.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":z=M;break;default:throw new Error("geojson is invalid")}if(null===z)return null;var K=z.coordinates;switch(z.type){case"Point":return F.point(K,st,U);case"MultiPoint":return N<0&&(N=K.length+N),F.point(K[N],st,U);case"LineString":return w<0&&(w=K.length+w),F.point(K[w],st,U);case"Polygon":return O<0&&(O=K.length+O),w<0&&(w=K[O].length+w),F.point(K[O][w],st,U);case"MultiLineString":return N<0&&(N=K.length+N),w<0&&(w=K[N].length+w),F.point(K[N][w],st,U);case"MultiPolygon":return N<0&&(N=K.length+N),O<0&&(O=K[N].length+O),w<0&&(w=K[N][O].length-w),F.point(K[N][O][w],st,U)}throw new Error("geojson is invalid")},yt.findSegment=function(M,U){if(!F.isObject(U=U||{}))throw new Error("options is invalid");var z,P=U.featureIndex||0,N=U.multiFeatureIndex||0,O=U.geometryIndex||0,w=U.segmentIndex||0,st=U.properties;switch(M.type){case"FeatureCollection":P<0&&(P=M.features.length+P),st=st||M.features[P].properties,z=M.features[P].geometry;break;case"Feature":st=st||M.properties,z=M.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":z=M;break;default:throw new Error("geojson is invalid")}if(null===z)return null;var K=z.coordinates;switch(z.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=K.length+w-1),F.lineString([K[w],K[w+1]],st,U);case"Polygon":return O<0&&(O=K.length+O),w<0&&(w=K[O].length+w-1),F.lineString([K[O][w],K[O][w+1]],st,U);case"MultiLineString":return N<0&&(N=K.length+N),w<0&&(w=K[N].length+w-1),F.lineString([K[N][w],K[N][w+1]],st,U);case"MultiPolygon":return N<0&&(N=K.length+N),O<0&&(O=K[N].length+O),w<0&&(w=K[N][O].length-w-1),F.lineString([K[N][O][w],K[N][O][w+1]],st,U)}throw new Error("geojson is invalid")},yt.flattenEach=xt,yt.flattenReduce=function(M,U,P){var N=P;return xt(M,function(O,w,st){N=0===w&&0===st&&void 0===P?O:U(N,O,w,st)}),N},yt.geomEach=It,yt.geomReduce=function(M,U,P){var N=P;return It(M,function(O,w,st,z,K){N=0===w&&void 0===P?O:U(N,O,w,st,z,K)}),N},yt.lineEach=et,yt.lineReduce=function(M,U,P){var N=P;return et(M,function(O,w,st,z){N=0===w&&void 0===P?O:U(N,O,w,st,z)}),N},yt.propEach=c,yt.propReduce=function(M,U,P){var N=P;return c(M,function(O,w){N=0===w&&void 0===P?O:U(N,O,w)}),N},yt.segmentEach=wt,yt.segmentReduce=function(M,U,P){var N=P,O=!1;return wt(M,function(w,st,z,K,R){N=!1===O&&void 0===P?w:U(N,w,st,z,K,R),O=!0}),N}},9336:function(Dt){Dt.exports=function(){"use strict";function Q(I,c,nt,H,ot){for(;H>nt;){if(H-nt>600){var ft=H-nt+1,It=c-nt+1,Tt=Math.log(ft),xt=.5*Math.exp(2*Tt/3),mt=.5*Math.sqrt(Tt*xt*(ft-xt)/ft)*(It-ft/2<0?-1:1);Q(I,c,Math.max(nt,Math.floor(c-It*xt/ft+mt)),Math.min(H,Math.floor(c+(ft-It)*xt/ft+mt)),ot)}var et=I[c],pt=nt,b=H;for(F(I,nt,c),ot(I[H],et)>0&&F(I,nt,H);pt<b;){for(F(I,pt,b),pt++,b--;ot(I[pt],et)<0;)pt++;for(;ot(I[b],et)>0;)b--}0===ot(I[nt],et)?F(I,nt,b):F(I,++b,H),b<=c&&(nt=b+1),c<=b&&(H=b-1)}}function F(I,c,nt){var H=I[c];I[c]=I[nt],I[nt]=H}function V(I,c){return I<c?-1:I>c?1:0}return function(I,c,nt,H,ot){Q(I,c,nt||0,H||I.length-1,ot||V)}}()},8309:(Dt,yt,Q)=>{"use strict";Dt.exports=V,Dt.exports.default=V;var F=Q(9336);function V(b,S){if(!(this instanceof V))return new V(b,S);this._maxEntries=Math.max(4,b||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),S&&this._initFormat(S),this.clear()}function I(b,S,M){if(!M)return S.indexOf(b);for(var U=0;U<S.length;U++)if(M(b,S[U]))return U;return-1}function c(b,S){nt(b,0,b.children.length,S,b)}function nt(b,S,M,U,P){P||(P=et(null)),P.minX=1/0,P.minY=1/0,P.maxX=-1/0,P.maxY=-1/0;for(var O,N=S;N<M;N++)O=b.children[N],H(P,b.leaf?U(O):O);return P}function H(b,S){return b.minX=Math.min(b.minX,S.minX),b.minY=Math.min(b.minY,S.minY),b.maxX=Math.max(b.maxX,S.maxX),b.maxY=Math.max(b.maxY,S.maxY),b}function ot(b,S){return b.minX-S.minX}function ft(b,S){return b.minY-S.minY}function It(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function Tt(b){return b.maxX-b.minX+(b.maxY-b.minY)}function xt(b,S){return(Math.max(S.maxX,b.maxX)-Math.min(S.minX,b.minX))*(Math.max(S.maxY,b.maxY)-Math.min(S.minY,b.minY))}function mt(b,S){var M=Math.max(b.minX,S.minX),U=Math.max(b.minY,S.minY),P=Math.min(b.maxX,S.maxX),N=Math.min(b.maxY,S.maxY);return Math.max(0,P-M)*Math.max(0,N-U)}function wt(b,S){return b.minX<=S.minX&&b.minY<=S.minY&&S.maxX<=b.maxX&&S.maxY<=b.maxY}function qt(b,S){return S.minX<=b.maxX&&S.minY<=b.maxY&&S.maxX>=b.minX&&S.maxY>=b.minY}function et(b){return{children:b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function pt(b,S,M,U,P){for(var O,N=[S,M];N.length;)!((M=N.pop())-(S=N.pop())<=U)&&(O=S+Math.ceil((M-S)/U/2)*U,F(b,O,S,M,P),N.push(S,O,O,M))}V.prototype={all:function(){return this._all(this.data,[])},search:function(b){var S=this.data,M=[],U=this.toBBox;if(!qt(b,S))return M;for(var N,O,w,st,P=[];S;){for(N=0,O=S.children.length;N<O;N++)w=S.children[N],qt(b,st=S.leaf?U(w):w)&&(S.leaf?M.push(w):wt(b,st)?this._all(w,M):P.push(w));S=P.pop()}return M},collides:function(b){var S=this.data,M=this.toBBox;if(!qt(b,S))return!1;for(var P,N,O,w,U=[];S;){for(P=0,N=S.children.length;P<N;P++)if(O=S.children[P],qt(b,w=S.leaf?M(O):O)){if(S.leaf||wt(b,w))return!0;U.push(O)}S=U.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var S=0,M=b.length;S<M;S++)this.insert(b[S]);return this}var U=this._build(b.slice(),0,b.length-1,0);if(this.data.children.length)if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var P=this.data;this.data=U,U=P}this._insert(U,this.data.height-U.height-1,!0)}else this.data=U;return this},insert:function(b){return b&&this._insert(b,this.data.height-1),this},clear:function(){return this.data=et([]),this},remove:function(b,S){if(!b)return this;for(var O,w,st,z,M=this.data,U=this.toBBox(b),P=[],N=[];M||P.length;){if(M||(M=P.pop(),w=P[P.length-1],O=N.pop(),z=!0),M.leaf&&-1!==(st=I(b,M.children,S)))return M.children.splice(st,1),P.push(M),this._condense(P),this;z||M.leaf||!wt(M,U)?w?(O++,M=w.children[O],z=!1):M=null:(P.push(M),N.push(O),O=0,w=M,M=M.children[0])}return this},toBBox:function(b){return b},compareMinX:ot,compareMinY:ft,toJSON:function(){return this.data},fromJSON:function(b){return this.data=b,this},_all:function(b,S){for(var M=[];b;)b.leaf?S.push.apply(S,b.children):M.push.apply(M,b.children),b=M.pop();return S},_build:function(b,S,M,U){var O,P=M-S+1,N=this._maxEntries;if(P<=N)return c(O=et(b.slice(S,M+1)),this.toBBox),O;U||(U=Math.ceil(Math.log(P)/Math.log(N)),N=Math.ceil(P/Math.pow(N,U-1))),(O=et([])).leaf=!1,O.height=U;var z,K,R,Ot,w=Math.ceil(P/N),st=w*Math.ceil(Math.sqrt(N));for(pt(b,S,M,st,this.compareMinX),z=S;z<=M;z+=st)for(pt(b,z,R=Math.min(z+st-1,M),w,this.compareMinY),K=z;K<=R;K+=w)Ot=Math.min(K+w-1,R),O.children.push(this._build(b,K,Ot,U-1));return c(O,this.toBBox),O},_chooseSubtree:function(b,S,M,U){for(var P,N,O,w,st,z,K,R;U.push(S),!S.leaf&&U.length-1!==M;){for(K=R=1/0,P=0,N=S.children.length;P<N;P++)st=It(O=S.children[P]),(z=xt(b,O)-st)<R?(R=z,K=st<K?st:K,w=O):z===R&&st<K&&(K=st,w=O);S=w||S.children[0]}return S},_insert:function(b,S,M){var P=M?b:(0,this.toBBox)(b),N=[],O=this._chooseSubtree(P,this.data,S,N);for(O.children.push(b),H(O,P);S>=0&&N[S].children.length>this._maxEntries;)this._split(N,S),S--;this._adjustParentBBoxes(P,N,S)},_split:function(b,S){var M=b[S],U=M.children.length,P=this._minEntries;this._chooseSplitAxis(M,P,U);var N=this._chooseSplitIndex(M,P,U),O=et(M.children.splice(N,M.children.length-N));O.height=M.height,O.leaf=M.leaf,c(M,this.toBBox),c(O,this.toBBox),S?b[S-1].children.push(O):this._splitRoot(M,O)},_splitRoot:function(b,S){this.data=et([b,S]),this.data.height=b.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},_chooseSplitIndex:function(b,S,M){var U,P,N,O,w,st,z,K;for(st=z=1/0,U=S;U<=M-S;U++)O=mt(P=nt(b,0,U,this.toBBox),N=nt(b,U,M,this.toBBox)),w=It(P)+It(N),O<st?(st=O,K=U,z=w<z?w:z):O===st&&w<z&&(z=w,K=U);return K},_chooseSplitAxis:function(b,S,M){var U=b.leaf?this.compareMinX:ot,P=b.leaf?this.compareMinY:ft;this._allDistMargin(b,S,M,U)<this._allDistMargin(b,S,M,P)&&b.children.sort(U)},_allDistMargin:function(b,S,M,U){b.children.sort(U);var st,z,P=this.toBBox,N=nt(b,0,S,P),O=nt(b,M-S,M,P),w=Tt(N)+Tt(O);for(st=S;st<M-S;st++)z=b.children[st],H(N,b.leaf?P(z):z),w+=Tt(N);for(st=M-S-1;st>=S;st--)z=b.children[st],H(O,b.leaf?P(z):z),w+=Tt(O);return w},_adjustParentBBoxes:function(b,S,M){for(var U=M;U>=0;U--)H(S[U],b)},_condense:function(b){for(var M,S=b.length-1;S>=0;S--)0===b[S].children.length?S>0?(M=b[S-1].children).splice(M.indexOf(b[S]),1):this.clear():c(b[S],this.toBBox)},_initFormat:function(b){var S=["return a"," - b",";"];this.compareMinX=new Function("a","b",S.join(b[0])),this.compareMinY=new Function("a","b",S.join(b[1])),this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+"};")}}},9568:(Dt,yt,Q)=>{"use strict";var F=Q(8540),V=Q(44),I=V(F("String.prototype.indexOf"));Dt.exports=function(nt,H){var ot=F(nt,!!H);return"function"==typeof ot&&I(nt,".prototype.")>-1?V(ot):ot}},44:(Dt,yt,Q)=>{"use strict";var F=Q(5396),V=Q(8540),I=V("%Function.prototype.apply%"),c=V("%Function.prototype.call%"),nt=V("%Reflect.apply%",!0)||F.call(c,I),H=V("%Object.getOwnPropertyDescriptor%",!0),ot=V("%Object.defineProperty%",!0),ft=V("%Math.max%");if(ot)try{ot({},"a",{value:1})}catch(Tt){ot=null}Dt.exports=function(xt){var mt=nt(F,c,arguments);if(H&&ot){var wt=H(mt,"length");wt.configurable&&ot(mt,"length",{value:1+ft(0,xt.length-(arguments.length-1))})}return mt};var It=function(){return nt(F,I,arguments)};ot?ot(Dt.exports,"apply",{value:It}):Dt.exports.apply=It},6896:(Dt,yt,Q)=>{"use strict";var F=Q(3036),V=Q(54),I=Q(5503),c=Q(5322).orient2d;function nt(P,N,O){N=Math.max(0,void 0===N?2:N),O=O||0;var w=function(P){for(var N=P[0],O=P[0],w=P[0],st=P[0],z=0;z<P.length;z++){var K=P[z];K[0]<N[0]&&(N=K),K[0]>w[0]&&(w=K),K[1]<O[1]&&(O=K),K[1]>st[1]&&(st=K)}var R=[N,O,w,st],Ot=R.slice();for(z=0;z<P.length;z++)I(P[z],R)||Ot.push(P[z]);return function(P){P.sort(M);for(var N=[],O=0;O<P.length;O++){for(;N.length>=2&&xt(N[N.length-2],N[N.length-1],P[O])<=0;)N.pop();N.push(P[O])}for(var w=[],st=P.length-1;st>=0;st--){for(;w.length>=2&&xt(w[w.length-2],w[w.length-1],P[st])<=0;)w.pop();w.push(P[st])}return w.pop(),N.pop(),N.concat(w)}(Ot)}(P),st=new F(16);st.toBBox=function(Xt){return{minX:Xt[0],minY:Xt[1],maxX:Xt[0],maxY:Xt[1]}},st.compareMinX=function(Xt,At){return Xt[0]-At[0]},st.compareMinY=function(Xt,At){return Xt[1]-At[1]},st.load(P);for(var R,z=[],K=0;K<w.length;K++){var Ot=w[K];st.remove(Ot),R=et(Ot,R),z.push(R)}var Nt=new F(16);for(K=0;K<z.length;K++)Nt.insert(wt(z[K]));for(var G=N*N,lt=O*O;z.length;){var J=z.shift(),at=J.p,ct=J.next.p,Z=pt(at,ct);if(!(Z<lt)){var bt=Z/G;(Ot=H(st,J.prev.p,at,ct,J.next.next.p,bt,Nt))&&Math.min(pt(Ot,at),pt(Ot,ct))<=bt&&(z.push(J),z.push(et(Ot,J)),st.remove(Ot),Nt.remove(J),Nt.insert(wt(J)),Nt.insert(wt(J.next)))}}J=R;var Lt=[];do{Lt.push(J.p),J=J.next}while(J!==R);return Lt.push(J.p),Lt}function H(P,N,O,w,st,z,K){for(var R=new V([],ot),Ot=P.data;Ot;){for(var Nt=0;Nt<Ot.children.length;Nt++){var G=Ot.children[Nt],lt=Ot.leaf?b(G,O,w):ft(O,w,G);lt>z||R.push({node:G,dist:lt})}for(;R.length&&!R.peek().node.children;){var J=R.pop(),at=J.node,ct=b(at,N,O),Z=b(at,w,st);if(J.dist<ct&&J.dist<Z&&Tt(O,at,K)&&Tt(w,at,K))return at}(Ot=R.pop())&&(Ot=Ot.node)}return null}function ot(P,N){return P.dist-N.dist}function ft(P,N,O){if(It(P,O)||It(N,O))return 0;var w=S(P[0],P[1],N[0],N[1],O.minX,O.minY,O.maxX,O.minY);if(0===w)return 0;var st=S(P[0],P[1],N[0],N[1],O.minX,O.minY,O.minX,O.maxY);if(0===st)return 0;var z=S(P[0],P[1],N[0],N[1],O.maxX,O.minY,O.maxX,O.maxY);if(0===z)return 0;var K=S(P[0],P[1],N[0],N[1],O.minX,O.maxY,O.maxX,O.maxY);return 0===K?0:Math.min(w,st,z,K)}function It(P,N){return P[0]>=N.minX&&P[0]<=N.maxX&&P[1]>=N.minY&&P[1]<=N.maxY}function Tt(P,N,O){for(var w=Math.min(P[0],N[0]),st=Math.min(P[1],N[1]),z=Math.max(P[0],N[0]),K=Math.max(P[1],N[1]),R=O.search({minX:w,minY:st,maxX:z,maxY:K}),Ot=0;Ot<R.length;Ot++)if(mt(R[Ot].p,R[Ot].next.p,P,N))return!1;return!0}function xt(P,N,O){return c(P[0],P[1],N[0],N[1],O[0],O[1])}function mt(P,N,O,w){return P!==w&&N!==O&&xt(P,N,O)>0!=xt(P,N,w)>0&&xt(O,w,P)>0!=xt(O,w,N)>0}function wt(P){var N=P.p,O=P.next.p;return P.minX=Math.min(N[0],O[0]),P.minY=Math.min(N[1],O[1]),P.maxX=Math.max(N[0],O[0]),P.maxY=Math.max(N[1],O[1]),P}function et(P,N){var O={p:P,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return N?(O.next=N.next,O.prev=N,N.next.prev=O,N.next=O):(O.prev=O,O.next=O),O}function pt(P,N){var O=P[0]-N[0],w=P[1]-N[1];return O*O+w*w}function b(P,N,O){var w=N[0],st=N[1],z=O[0]-w,K=O[1]-st;if(0!==z||0!==K){var R=((P[0]-w)*z+(P[1]-st)*K)/(z*z+K*K);R>1?(w=O[0],st=O[1]):R>0&&(w+=z*R,st+=K*R)}return(z=P[0]-w)*z+(K=P[1]-st)*K}function S(P,N,O,w,st,z,K,R){var ie,fe,ue,Jt,Ot=O-P,Nt=w-N,G=K-st,lt=R-z,J=P-st,at=N-z,ct=Ot*Ot+Nt*Nt,Z=Ot*G+Nt*lt,bt=G*G+lt*lt,Lt=Ot*J+Nt*at,Xt=G*J+lt*at,At=ct*bt-Z*Z,Wt=At,Zt=At;0===At?(fe=0,Wt=1,Jt=Xt,Zt=bt):(Jt=ct*Xt-Z*Lt,(fe=Z*Xt-bt*Lt)<0?(fe=0,Jt=Xt,Zt=bt):fe>Wt&&(fe=Wt,Jt=Xt+Z,Zt=bt)),Jt<0?(Jt=0,-Lt<0?fe=0:-Lt>ct?fe=Wt:(fe=-Lt,Wt=ct)):Jt>Zt&&(Jt=Zt,-Lt+Z<0?fe=0:-Lt+Z>ct?fe=Wt:(fe=-Lt+Z,Wt=ct));var On=(1-(ue=0===Jt?0:Jt/Zt))*st+ue*K-((1-(ie=0===fe?0:fe/Wt))*P+ie*O),dt=(1-ue)*z+ue*R-((1-ie)*N+ie*w);return On*On+dt*dt}function M(P,N){return P[0]===N[0]?P[1]-N[1]:P[0]-N[0]}V.default&&(V=V.default),Dt.exports=nt,Dt.exports.default=nt},2978:(Dt,yt,Q)=>{var F=Q(8507),V=Q(7316),I=Q(4269),c=Q(5544),nt=Q(437),H=Q(3105),ot=Date.prototype.getTime;function It(mt){return null==mt}function Tt(mt){return!(!mt||"object"!=typeof mt||"number"!=typeof mt.length||"function"!=typeof mt.copy||"function"!=typeof mt.slice||mt.length>0&&"number"!=typeof mt[0])}Dt.exports=function ft(mt,wt,qt){var et=qt||{};return!!(et.strict?I(mt,wt):mt===wt)||(!mt||!wt||"object"!=typeof mt&&"object"!=typeof wt?et.strict?I(mt,wt):mt==wt:function(mt,wt,qt){var et,pt;if(typeof mt!=typeof wt||It(mt)||It(wt)||mt.prototype!==wt.prototype||V(mt)!==V(wt))return!1;var b=c(mt),S=c(wt);if(b!==S)return!1;if(b||S)return mt.source===wt.source&&nt(mt)===nt(wt);if(H(mt)&&H(wt))return ot.call(mt)===ot.call(wt);var M=Tt(mt),U=Tt(wt);if(M!==U)return!1;if(M||U){if(mt.length!==wt.length)return!1;for(et=0;et<mt.length;et++)if(mt[et]!==wt[et])return!1;return!0}if(typeof mt!=typeof wt)return!1;try{var P=F(mt),N=F(wt)}catch(O){return!1}if(P.length!==N.length)return!1;for(P.sort(),N.sort(),et=P.length-1;et>=0;et--)if(P[et]!=N[et])return!1;for(et=P.length-1;et>=0;et--)if(!ft(mt[pt=P[et]],wt[pt],qt))return!1;return!0}(mt,wt,et))}},6886:(Dt,yt,Q)=>{"use strict";var F=Q(8507),V="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),I=Object.prototype.toString,c=Array.prototype.concat,nt=Object.defineProperty,ft=nt&&function(){var xt={};try{for(var mt in nt(xt,"x",{enumerable:!1,value:xt}),xt)return!1;return xt.x===xt}catch(wt){return!1}}(),It=function(xt,mt,wt,qt){mt in xt&&(!function(xt){return"function"==typeof xt&&"[object Function]"===I.call(xt)}(qt)||!qt())||(ft?nt(xt,mt,{configurable:!0,enumerable:!1,value:wt,writable:!0}):xt[mt]=wt)},Tt=function(xt,mt){var wt=arguments.length>2?arguments[2]:{},qt=F(mt);V&&(qt=c.call(qt,Object.getOwnPropertySymbols(mt)));for(var et=0;et<qt.length;et+=1)It(xt,qt[et],mt[qt[et]],wt[qt[et]])};Tt.supportsDescriptors=!!ft,Dt.exports=Tt},5810:Dt=>{function yt(Q,F,V,I){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(Q,F,V,I)}yt.prototype.run=function(Q,F,V,I){this._init(Q,F,V,I);for(var c=0;c<this._datasetLength;c++)if(1!==this._visited[c]){this._visited[c]=1;var nt=this._regionQuery(c);if(nt.length<this.minPts)this.noise.push(c);else{var H=this.clusters.length;this.clusters.push([]),this._addToCluster(c,H),this._expandCluster(H,nt)}}return this.clusters},yt.prototype._init=function(Q,F,V,I){if(Q){if(!(Q instanceof Array))throw Error("Dataset must be of type array, "+typeof Q+" given");this.dataset=Q,this.clusters=[],this.noise=[],this._datasetLength=Q.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}F&&(this.epsilon=F),V&&(this.minPts=V),I&&(this.distance=I)},yt.prototype._expandCluster=function(Q,F){for(var V=0;V<F.length;V++){var I=F[V];if(1!==this._visited[I]){this._visited[I]=1;var c=this._regionQuery(I);c.length>=this.minPts&&(F=this._mergeArrays(F,c))}1!==this._assigned[I]&&this._addToCluster(I,Q)}},yt.prototype._addToCluster=function(Q,F){this.clusters[F].push(Q),this._assigned[Q]=1},yt.prototype._regionQuery=function(Q){for(var F=[],V=0;V<this._datasetLength;V++)this.distance(this.dataset[Q],this.dataset[V])<this.epsilon&&F.push(V);return F},yt.prototype._mergeArrays=function(Q,F){for(var V=F.length,I=0;I<V;I++){var c=F[I];Q.indexOf(c)<0&&Q.push(c)}return Q},yt.prototype._euclideanDistance=function(Q,F){for(var V=0,I=Math.min(Q.length,F.length);I--;)V+=(Q[I]-F[I])*(Q[I]-F[I]);return Math.sqrt(V)},Dt.exports&&(Dt.exports=yt)},1955:Dt=>{function yt(Q,F,V){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(Q,F,V)}yt.prototype.init=function(Q,F,V){this.assignments=[],this.centroids=[],void 0!==Q&&(this.dataset=Q),void 0!==F&&(this.k=F),void 0!==V&&(this.distance=V)},yt.prototype.run=function(Q,F){this.init(Q,F);for(var V=this.dataset.length,I=0;I<this.k;I++)this.centroids[I]=this.randomCentroid();for(var c=!0;c;){c=this.assign();for(var nt=0;nt<this.k;nt++){for(var H=new Array(Tt),ot=0,ft=0;ft<Tt;ft++)H[ft]=0;for(var It=0;It<V;It++){var Tt=this.dataset[It].length;if(nt===this.assignments[It]){for(ft=0;ft<Tt;ft++)H[ft]+=this.dataset[It][ft];ot++}}if(ot>0){for(ft=0;ft<Tt;ft++)H[ft]/=ot;this.centroids[nt]=H}else this.centroids[nt]=this.randomCentroid(),c=!0}}return this.getClusters()},yt.prototype.randomCentroid=function(){var F,V,Q=this.dataset.length-1;do{V=Math.round(Math.random()*Q),F=this.dataset[V]}while(this.centroids.indexOf(F)>=0);return F},yt.prototype.assign=function(){for(var V,Q=!1,F=this.dataset.length,I=0;I<F;I++)(V=this.argmin(this.dataset[I],this.centroids,this.distance))!=this.assignments[I]&&(this.assignments[I]=V,Q=!0);return Q},yt.prototype.getClusters=function(){for(var F,Q=new Array(this.k),V=0;V<this.assignments.length;V++)void 0===Q[F=this.assignments[V]]&&(Q[F]=[]),Q[F].push(V);return Q},yt.prototype.argmin=function(Q,F,V){for(var H,I=Number.MAX_VALUE,c=0,nt=F.length,ot=0;ot<nt;ot++)(H=V(Q,F[ot]))<I&&(I=H,c=ot);return c},yt.prototype.distance=function(Q,F){for(var V=0,I=Math.min(Q.length,F.length);I--;){var c=Q[I]-F[I];V+=c*c}return Math.sqrt(V)},Dt.exports&&(Dt.exports=yt)},5e3:(Dt,yt,Q)=>{if(Dt.exports)var F=Q(571);function V(I,c,nt,H){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(I,c,nt,H)}V.prototype.run=function(I,c,nt,H){this._init(I,c,nt,H);for(var ot=0,ft=this.dataset.length;ot<ft;ot++)if(1!==this._processed[ot]){this._processed[ot]=1,this.clusters.push([ot]);var It=this.clusters.length-1;this._orderedList.push(ot);var Tt=new F(null,null,"asc"),xt=this._regionQuery(ot);void 0!==this._distanceToCore(ot)&&(this._updateQueue(ot,xt,Tt),this._expandCluster(It,Tt))}return this.clusters},V.prototype.getReachabilityPlot=function(){for(var I=[],c=0,nt=this._orderedList.length;c<nt;c++){var H=this._orderedList[c];I.push([H,this._reachability[H]])}return I},V.prototype._init=function(I,c,nt,H){if(I){if(!(I instanceof Array))throw Error("Dataset must be of type array, "+typeof I+" given");this.dataset=I,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}c&&(this.epsilon=c),nt&&(this.minPts=nt),H&&(this.distance=H)},V.prototype._updateQueue=function(I,c,nt){var H=this;this._coreDistance=this._distanceToCore(I),c.forEach(function(ot){if(void 0===H._processed[ot]){var ft=H.distance(H.dataset[I],H.dataset[ot]),It=Math.max(H._coreDistance,ft);void 0===H._reachability[ot]?(H._reachability[ot]=It,nt.insert(ot,It)):It<H._reachability[ot]&&(H._reachability[ot]=It,nt.remove(ot),nt.insert(ot,It))}})},V.prototype._expandCluster=function(I,c){for(var nt=c.getElements(),H=0,ot=nt.length;H<ot;H++){var ft=nt[H];if(void 0===this._processed[ft]){var It=this._regionQuery(ft);this._processed[ft]=1,this.clusters[I].push(ft),this._orderedList.push(ft),void 0!==this._distanceToCore(ft)&&(this._updateQueue(ft,It,c),this._expandCluster(I,c))}}},V.prototype._distanceToCore=function(I){for(var c=this.epsilon,nt=0;nt<c;nt++)if(this._regionQuery(I,nt).length>=this.minPts)return nt},V.prototype._regionQuery=function(I,c){c=c||this.epsilon;for(var nt=[],H=0,ot=this.dataset.length;H<ot;H++)this.distance(this.dataset[I],this.dataset[H])<c&&nt.push(H);return nt},V.prototype._euclideanDistance=function(I,c){for(var nt=0,H=Math.min(I.length,c.length);H--;)nt+=(I[H]-c[H])*(I[H]-c[H]);return Math.sqrt(nt)},Dt.exports&&(Dt.exports=V)},571:Dt=>{function yt(Q,F,V){this._queue=[],this._priorities=[],this._sorting="desc",this._init(Q,F,V)}yt.prototype.insert=function(Q,F){for(var V=this._queue.length,I=V;I--;){var c=this._priorities[I];"desc"===this._sorting?F>c&&(V=I):F<c&&(V=I)}this._insertAt(Q,F,V)},yt.prototype.remove=function(Q){for(var F=this._queue.length;F--;)if(Q===this._queue[F]){this._queue.splice(F,1),this._priorities.splice(F,1);break}},yt.prototype.forEach=function(Q){this._queue.forEach(Q)},yt.prototype.getElements=function(){return this._queue},yt.prototype.getElementPriority=function(Q){return this._priorities[Q]},yt.prototype.getPriorities=function(){return this._priorities},yt.prototype.getElementsWithPriorities=function(){for(var Q=[],F=0,V=this._queue.length;F<V;F++)Q.push([this._queue[F],this._priorities[F]]);return Q},yt.prototype._init=function(Q,F,V){if(Q&&F){if(this._queue=[],this._priorities=[],Q.length!==F.length)throw new Error("Arrays must have the same length");for(var I=0;I<Q.length;I++)this.insert(Q[I],F[I])}V&&(this._sorting=V)},yt.prototype._insertAt=function(Q,F,V){this._queue.length===V?(this._queue.push(Q),this._priorities.push(F)):(this._queue.splice(V,0,Q),this._priorities.splice(V,0,F))},Dt.exports&&(Dt.exports=yt)},6882:(Dt,yt,Q)=>{Dt.exports&&(Dt.exports={DBSCAN:Q(5810),KMEANS:Q(1955),OPTICS:Q(5e3),PriorityQueue:Q(571)})},1604:Dt=>{"use strict";function yt(G,lt,J){J=J||2;var Lt,Xt,At,ie,fe,ue,Jt,at=lt&&lt.length,ct=at?lt[0]*J:G.length,Z=Q(G,0,ct,J,!0),bt=[];if(!Z||Z.next===Z.prev)return bt;if(at&&(Z=function(G,lt,J,at){var Z,bt,At,ct=[];for(Z=0,bt=lt.length;Z<bt;Z++)(At=Q(G,lt[Z]*at,Z<bt-1?lt[Z+1]*at:G.length,at,!1))===At.next&&(At.steiner=!0),ct.push(et(At));for(ct.sort(ft),Z=0;Z<ct.length;Z++)J=F(J=It(ct[Z],J),J.next);return J}(G,lt,Z,J)),G.length>80*J){Lt=At=G[0],Xt=ie=G[1];for(var Wt=J;Wt<ct;Wt+=J)(fe=G[Wt])<Lt&&(Lt=fe),(ue=G[Wt+1])<Xt&&(Xt=ue),fe>At&&(At=fe),ue>ie&&(ie=ue);Jt=0!==(Jt=Math.max(At-Lt,ie-Xt))?1/Jt:0}return V(Z,bt,J,Lt,Xt,Jt),bt}function Q(G,lt,J,at,ct){var Z,bt;if(ct===Nt(G,lt,J,at)>0)for(Z=lt;Z<J;Z+=at)bt=K(Z,G[Z],G[Z+1],bt);else for(Z=J-at;Z>=lt;Z-=at)bt=K(Z,G[Z],G[Z+1],bt);return bt&&M(bt,bt.next)&&(R(bt),bt=bt.next),bt}function F(G,lt){if(!G)return G;lt||(lt=G);var at,J=G;do{if(at=!1,J.steiner||!M(J,J.next)&&0!==S(J.prev,J,J.next))J=J.next;else{if(R(J),(J=lt=J.prev)===J.next)break;at=!0}}while(at||J!==lt);return lt}function V(G,lt,J,at,ct,Z,bt){if(G){!bt&&Z&&function(G,lt,J,at){var ct=G;do{null===ct.z&&(ct.z=qt(ct.x,ct.y,lt,J,at)),ct.prevZ=ct.prev,ct.nextZ=ct.next,ct=ct.next}while(ct!==G);ct.prevZ.nextZ=null,ct.prevZ=null,function(G){var lt,J,at,ct,Z,bt,Lt,Xt,At=1;do{for(J=G,G=null,Z=null,bt=0;J;){for(bt++,at=J,Lt=0,lt=0;lt<At&&(Lt++,at=at.nextZ);lt++);for(Xt=At;Lt>0||Xt>0&&at;)0!==Lt&&(0===Xt||!at||J.z<=at.z)?(ct=J,J=J.nextZ,Lt--):(ct=at,at=at.nextZ,Xt--),Z?Z.nextZ=ct:G=ct,ct.prevZ=Z,Z=ct;J=at}Z.nextZ=null,At*=2}while(bt>1)}(ct)}(G,at,ct,Z);for(var Xt,At,Lt=G;G.prev!==G.next;)if(Xt=G.prev,At=G.next,Z?c(G,at,ct,Z):I(G))lt.push(Xt.i/J),lt.push(G.i/J),lt.push(At.i/J),R(G),G=At.next,Lt=At.next;else if((G=At)===Lt){bt?1===bt?V(G=nt(F(G),lt,J),lt,J,at,ct,Z,2):2===bt&&H(G,lt,J,at,ct,Z):V(F(G),lt,J,at,ct,Z,1);break}}}function I(G){var lt=G.prev,J=G,at=G.next;if(S(lt,J,at)>=0)return!1;for(var ct=G.next.next;ct!==G.prev;){if(pt(lt.x,lt.y,J.x,J.y,at.x,at.y,ct.x,ct.y)&&S(ct.prev,ct,ct.next)>=0)return!1;ct=ct.next}return!0}function c(G,lt,J,at){var ct=G.prev,Z=G,bt=G.next;if(S(ct,Z,bt)>=0)return!1;for(var At=ct.x>Z.x?ct.x>bt.x?ct.x:bt.x:Z.x>bt.x?Z.x:bt.x,ie=ct.y>Z.y?ct.y>bt.y?ct.y:bt.y:Z.y>bt.y?Z.y:bt.y,fe=qt(ct.x<Z.x?ct.x<bt.x?ct.x:bt.x:Z.x<bt.x?Z.x:bt.x,ct.y<Z.y?ct.y<bt.y?ct.y:bt.y:Z.y<bt.y?Z.y:bt.y,lt,J,at),ue=qt(At,ie,lt,J,at),Jt=G.prevZ,Wt=G.nextZ;Jt&&Jt.z>=fe&&Wt&&Wt.z<=ue;){if(Jt!==G.prev&&Jt!==G.next&&pt(ct.x,ct.y,Z.x,Z.y,bt.x,bt.y,Jt.x,Jt.y)&&S(Jt.prev,Jt,Jt.next)>=0||(Jt=Jt.prevZ,Wt!==G.prev&&Wt!==G.next&&pt(ct.x,ct.y,Z.x,Z.y,bt.x,bt.y,Wt.x,Wt.y)&&S(Wt.prev,Wt,Wt.next)>=0))return!1;Wt=Wt.nextZ}for(;Jt&&Jt.z>=fe;){if(Jt!==G.prev&&Jt!==G.next&&pt(ct.x,ct.y,Z.x,Z.y,bt.x,bt.y,Jt.x,Jt.y)&&S(Jt.prev,Jt,Jt.next)>=0)return!1;Jt=Jt.prevZ}for(;Wt&&Wt.z<=ue;){if(Wt!==G.prev&&Wt!==G.next&&pt(ct.x,ct.y,Z.x,Z.y,bt.x,bt.y,Wt.x,Wt.y)&&S(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.nextZ}return!0}function nt(G,lt,J){var at=G;do{var ct=at.prev,Z=at.next.next;!M(ct,Z)&&U(ct,at,at.next,Z)&&w(ct,Z)&&w(Z,ct)&&(lt.push(ct.i/J),lt.push(at.i/J),lt.push(Z.i/J),R(at),R(at.next),at=G=Z),at=at.next}while(at!==G);return F(at)}function H(G,lt,J,at,ct,Z){var bt=G;do{for(var Lt=bt.next.next;Lt!==bt.prev;){if(bt.i!==Lt.i&&b(bt,Lt)){var Xt=z(bt,Lt);return bt=F(bt,bt.next),Xt=F(Xt,Xt.next),V(bt,lt,J,at,ct,Z),void V(Xt,lt,J,at,ct,Z)}Lt=Lt.next}bt=bt.next}while(bt!==G)}function ft(G,lt){return G.x-lt.x}function It(G,lt){var J=function(G,lt){var bt,J=lt,at=G.x,ct=G.y,Z=-1/0;do{if(ct<=J.y&&ct>=J.next.y&&J.next.y!==J.y){var Lt=J.x+(ct-J.y)*(J.next.x-J.x)/(J.next.y-J.y);if(Lt<=at&&Lt>Z){if(Z=Lt,Lt===at){if(ct===J.y)return J;if(ct===J.next.y)return J.next}bt=J.x<J.next.x?J:J.next}}J=J.next}while(J!==lt);if(!bt)return null;if(at===Z)return bt;var ue,Xt=bt,At=bt.x,ie=bt.y,fe=1/0;J=bt;do{at>=J.x&&J.x>=At&&at!==J.x&&pt(ct<ie?at:Z,ct,At,ie,ct<ie?Z:at,ct,J.x,J.y)&&(ue=Math.abs(ct-J.y)/(at-J.x),w(J,G)&&(ue<fe||ue===fe&&(J.x>bt.x||J.x===bt.x&&xt(bt,J)))&&(bt=J,fe=ue)),J=J.next}while(J!==Xt);return bt}(G,lt);if(!J)return lt;var at=z(J,G),ct=F(J,J.next);return F(at,at.next),lt===J?ct:lt}function xt(G,lt){return S(G.prev,G,lt.prev)<0&&S(lt.next,G,G.next)<0}function qt(G,lt,J,at,ct){return(G=1431655765&((G=858993459&((G=252645135&((G=16711935&((G=32767*(G-J)*ct)|G<<8))|G<<4))|G<<2))|G<<1))|(lt=1431655765&((lt=858993459&((lt=252645135&((lt=16711935&((lt=32767*(lt-at)*ct)|lt<<8))|lt<<4))|lt<<2))|lt<<1))<<1}function et(G){var lt=G,J=G;do{(lt.x<J.x||lt.x===J.x&&lt.y<J.y)&&(J=lt),lt=lt.next}while(lt!==G);return J}function pt(G,lt,J,at,ct,Z,bt,Lt){return(ct-bt)*(lt-Lt)-(G-bt)*(Z-Lt)>=0&&(G-bt)*(at-Lt)-(J-bt)*(lt-Lt)>=0&&(J-bt)*(Z-Lt)-(ct-bt)*(at-Lt)>=0}function b(G,lt){return G.next.i!==lt.i&&G.prev.i!==lt.i&&!function(G,lt){var J=G;do{if(J.i!==G.i&&J.next.i!==G.i&&J.i!==lt.i&&J.next.i!==lt.i&&U(J,J.next,G,lt))return!0;J=J.next}while(J!==G);return!1}(G,lt)&&(w(G,lt)&&w(lt,G)&&function(G,lt){var J=G,at=!1,ct=(G.x+lt.x)/2,Z=(G.y+lt.y)/2;do{J.y>Z!=J.next.y>Z&&J.next.y!==J.y&&ct<(J.next.x-J.x)*(Z-J.y)/(J.next.y-J.y)+J.x&&(at=!at),J=J.next}while(J!==G);return at}(G,lt)&&(S(G.prev,G,lt.prev)||S(G,lt.prev,lt))||M(G,lt)&&S(G.prev,G,G.next)>0&&S(lt.prev,lt,lt.next)>0)}function S(G,lt,J){return(lt.y-G.y)*(J.x-lt.x)-(lt.x-G.x)*(J.y-lt.y)}function M(G,lt){return G.x===lt.x&&G.y===lt.y}function U(G,lt,J,at){var ct=N(S(G,lt,J)),Z=N(S(G,lt,at)),bt=N(S(J,at,G)),Lt=N(S(J,at,lt));return!!(ct!==Z&&bt!==Lt||0===ct&&P(G,J,lt)||0===Z&&P(G,at,lt)||0===bt&&P(J,G,at)||0===Lt&&P(J,lt,at))}function P(G,lt,J){return lt.x<=Math.max(G.x,J.x)&&lt.x>=Math.min(G.x,J.x)&&lt.y<=Math.max(G.y,J.y)&&lt.y>=Math.min(G.y,J.y)}function N(G){return G>0?1:G<0?-1:0}function w(G,lt){return S(G.prev,G,G.next)<0?S(G,lt,G.next)>=0&&S(G,G.prev,lt)>=0:S(G,lt,G.prev)<0||S(G,G.next,lt)<0}function z(G,lt){var J=new Ot(G.i,G.x,G.y),at=new Ot(lt.i,lt.x,lt.y),ct=G.next,Z=lt.prev;return G.next=lt,lt.prev=G,J.next=ct,ct.prev=J,at.next=J,J.prev=at,Z.next=at,at.prev=Z,at}function K(G,lt,J,at){var ct=new Ot(G,lt,J);return at?(ct.next=at.next,ct.prev=at,at.next.prev=ct,at.next=ct):(ct.prev=ct,ct.next=ct),ct}function R(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function Ot(G,lt,J){this.i=G,this.x=lt,this.y=J,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nt(G,lt,J,at){for(var ct=0,Z=lt,bt=J-at;Z<J;Z+=at)ct+=(G[bt]-G[Z])*(G[Z+1]+G[bt+1]),bt=Z;return ct}Dt.exports=yt,Dt.exports.default=yt,yt.deviation=function(G,lt,J,at){var ct=lt&&lt.length,bt=Math.abs(Nt(G,0,ct?lt[0]*J:G.length,J));if(ct)for(var Lt=0,Xt=lt.length;Lt<Xt;Lt++)bt-=Math.abs(Nt(G,lt[Lt]*J,Lt<Xt-1?lt[Lt+1]*J:G.length,J));var fe=0;for(Lt=0;Lt<at.length;Lt+=3){var ue=at[Lt]*J,Jt=at[Lt+1]*J,Wt=at[Lt+2]*J;fe+=Math.abs((G[ue]-G[Wt])*(G[Jt+1]-G[ue+1])-(G[ue]-G[Jt])*(G[Wt+1]-G[ue+1]))}return 0===bt&&0===fe?0:Math.abs((fe-bt)/bt)},yt.flatten=function(G){for(var lt=G[0][0].length,J={vertices:[],holes:[],dimensions:lt},at=0,ct=0;ct<G.length;ct++){for(var Z=0;Z<G[ct].length;Z++)for(var bt=0;bt<lt;bt++)J.vertices.push(G[ct][Z][bt]);ct>0&&J.holes.push(at+=G[ct-1].length)}return J}},1609:Dt=>{"use strict";var yt="Function.prototype.bind called on incompatible ",Q=Array.prototype.slice,F=Object.prototype.toString,V="[object Function]";Dt.exports=function(c){var nt=this;if("function"!=typeof nt||F.call(nt)!==V)throw new TypeError(yt+nt);for(var ot,H=Q.call(arguments,1),ft=function(){if(this instanceof ot){var wt=nt.apply(this,H.concat(Q.call(arguments)));return Object(wt)===wt?wt:this}return nt.apply(c,H.concat(Q.call(arguments)))},It=Math.max(0,nt.length-H.length),Tt=[],xt=0;xt<It;xt++)Tt.push("$"+xt);if(ot=Function("binder","return function ("+Tt.join(",")+"){ return binder.apply(this,arguments); }")(ft),nt.prototype){var mt=function(){};mt.prototype=nt.prototype,ot.prototype=new mt,mt.prototype=null}return ot}},5396:(Dt,yt,Q)=>{"use strict";var F=Q(1609);Dt.exports=Function.prototype.bind||F},9331:(Dt,yt,Q)=>{var F=Q(2978),V=function(H){this.precision=H&&H.precision?H.precision:17,this.direction=!(!H||!H.direction)&&H.direction,this.pseudoNode=!(!H||!H.pseudoNode)&&H.pseudoNode,this.objectComparator=H&&H.objectComparator?H.objectComparator:nt};function I(H){return H.coordinates.map(function(ot){return{type:H.type.replace("Multi",""),coordinates:ot}})}function c(H,ot){return H.hasOwnProperty("coordinates")?H.coordinates.length===ot.coordinates.length:H.length===ot.length}function nt(H,ot){return F(H,ot,{strict:!0})}V.prototype.compare=function(H,ot){if(H.type!==ot.type||!c(H,ot))return!1;switch(H.type){case"Point":return this.compareCoord(H.coordinates,ot.coordinates);case"LineString":return this.compareLine(H.coordinates,ot.coordinates,0,!1);case"Polygon":return this.comparePolygon(H,ot);case"Feature":return this.compareFeature(H,ot);default:if(0===H.type.indexOf("Multi")){var ft=this,It=I(H),Tt=I(ot);return It.every(function(xt){return this.some(function(mt){return ft.compare(xt,mt)})},Tt)}}return!1},V.prototype.compareCoord=function(H,ot){if(H.length!==ot.length)return!1;for(var ft=0;ft<H.length;ft++)if(H[ft].toFixed(this.precision)!==ot[ft].toFixed(this.precision))return!1;return!0},V.prototype.compareLine=function(H,ot,ft,It){if(!c(H,ot))return!1;var Tt=this.pseudoNode?H:this.removePseudo(H),xt=this.pseudoNode?ot:this.removePseudo(ot);if(!It||this.compareCoord(Tt[0],xt[0])||(xt=this.fixStartIndex(xt,Tt))){var mt=this.compareCoord(Tt[ft],xt[ft]);return this.direction||mt?this.comparePath(Tt,xt):!!this.compareCoord(Tt[ft],xt[xt.length-(1+ft)])&&this.comparePath(Tt.slice().reverse(),xt)}},V.prototype.fixStartIndex=function(H,ot){for(var ft,It=-1,Tt=0;Tt<H.length;Tt++)if(this.compareCoord(H[Tt],ot[0])){It=Tt;break}return It>=0&&(ft=[].concat(H.slice(It,H.length),H.slice(1,It+1))),ft},V.prototype.comparePath=function(H,ot){var ft=this;return H.every(function(It,Tt){return ft.compareCoord(It,this[Tt])},ot)},V.prototype.comparePolygon=function(H,ot){if(this.compareLine(H.coordinates[0],ot.coordinates[0],1,!0)){var ft=H.coordinates.slice(1,H.coordinates.length),It=ot.coordinates.slice(1,ot.coordinates.length),Tt=this;return ft.every(function(xt){return this.some(function(mt){return Tt.compareLine(xt,mt,1,!0)})},It)}return!1},V.prototype.compareFeature=function(H,ot){return!(H.id!==ot.id||!this.objectComparator(H.properties,ot.properties)||!this.compareBBox(H,ot))&&this.compare(H.geometry,ot.geometry)},V.prototype.compareBBox=function(H,ot){return!!(!H.bbox&&!ot.bbox||H.bbox&&ot.bbox&&this.compareCoord(H.bbox,ot.bbox))},V.prototype.removePseudo=function(H){return H},Dt.exports=V},2689:(Dt,yt,Q)=>{var F=Q(3036),V=Q(8410),I=Q(3033),c=Q(185).Z,nt=I.featureEach,ft=V.featureCollection;function It(Tt){var xt=new F(Tt);return xt.insert=function(mt){if("Feature"!==mt.type)throw new Error("invalid feature");return mt.bbox=mt.bbox?mt.bbox:c(mt),F.prototype.insert.call(this,mt)},xt.load=function(mt){var wt=[];return Array.isArray(mt)?mt.forEach(function(qt){if("Feature"!==qt.type)throw new Error("invalid features");qt.bbox=qt.bbox?qt.bbox:c(qt),wt.push(qt)}):nt(mt,function(qt){if("Feature"!==qt.type)throw new Error("invalid features");qt.bbox=qt.bbox?qt.bbox:c(qt),wt.push(qt)}),F.prototype.load.call(this,wt)},xt.remove=function(mt,wt){if("Feature"!==mt.type)throw new Error("invalid feature");return mt.bbox=mt.bbox?mt.bbox:c(mt),F.prototype.remove.call(this,mt,wt)},xt.clear=function(){return F.prototype.clear.call(this)},xt.search=function(mt){var wt=F.prototype.search.call(this,this.toBBox(mt));return ft(wt)},xt.collides=function(mt){return F.prototype.collides.call(this,this.toBBox(mt))},xt.all=function(){var mt=F.prototype.all.call(this);return ft(mt)},xt.toJSON=function(){return F.prototype.toJSON.call(this)},xt.fromJSON=function(mt){return F.prototype.fromJSON.call(this,mt)},xt.toBBox=function(mt){var wt;if(mt.bbox)wt=mt.bbox;else if(Array.isArray(mt)&&4===mt.length)wt=mt;else if(Array.isArray(mt)&&6===mt.length)wt=[mt[0],mt[1],mt[3],mt[4]];else if("Feature"===mt.type)wt=c(mt);else{if("FeatureCollection"!==mt.type)throw new Error("invalid geojson");wt=c(mt)}return{minX:wt[0],minY:wt[1],maxX:wt[2],maxY:wt[3]}},xt}Dt.exports=It,Dt.exports.default=It},8540:(Dt,yt,Q)=>{"use strict";var F,V=SyntaxError,I=Function,c=TypeError,nt=function(z){try{return I('"use strict"; return ('+z+").constructor;")()}catch(K){}},H=Object.getOwnPropertyDescriptor;if(H)try{H({},"")}catch(z){H=null}var ot=function(){throw new c},ft=H?function(){try{return ot}catch(z){try{return H(arguments,"callee").get}catch(K){return ot}}}():ot,It=Q(9326)(),Tt=Object.getPrototypeOf||function(z){return z.__proto__},xt={},mt="undefined"==typeof Uint8Array?F:Tt(Uint8Array),wt={"%AggregateError%":"undefined"==typeof AggregateError?F:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?F:ArrayBuffer,"%ArrayIteratorPrototype%":It?Tt([][Symbol.iterator]()):F,"%AsyncFromSyncIteratorPrototype%":F,"%AsyncFunction%":xt,"%AsyncGenerator%":xt,"%AsyncGeneratorFunction%":xt,"%AsyncIteratorPrototype%":xt,"%Atomics%":"undefined"==typeof Atomics?F:Atomics,"%BigInt%":"undefined"==typeof BigInt?F:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?F:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?F:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?F:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?F:FinalizationRegistry,"%Function%":I,"%GeneratorFunction%":xt,"%Int8Array%":"undefined"==typeof Int8Array?F:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?F:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?F:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":It?Tt(Tt([][Symbol.iterator]())):F,"%JSON%":"object"==typeof JSON?JSON:F,"%Map%":"undefined"==typeof Map?F:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&It?Tt((new Map)[Symbol.iterator]()):F,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?F:Promise,"%Proxy%":"undefined"==typeof Proxy?F:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?F:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?F:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&It?Tt((new Set)[Symbol.iterator]()):F,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?F:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":It?Tt(""[Symbol.iterator]()):F,"%Symbol%":It?Symbol:F,"%SyntaxError%":V,"%ThrowTypeError%":ft,"%TypedArray%":mt,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?F:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?F:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?F:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?F:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?F:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?F:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?F:WeakSet},qt=function z(K){var R;if("%AsyncFunction%"===K)R=nt("async function () {}");else if("%GeneratorFunction%"===K)R=nt("function* () {}");else if("%AsyncGeneratorFunction%"===K)R=nt("async function* () {}");else if("%AsyncGenerator%"===K){var Ot=z("%AsyncGeneratorFunction%");Ot&&(R=Ot.prototype)}else if("%AsyncIteratorPrototype%"===K){var Nt=z("%AsyncGenerator%");Nt&&(R=Tt(Nt.prototype))}return wt[K]=R,R},et={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pt=Q(5396),b=Q(6558),S=pt.call(Function.call,Array.prototype.concat),M=pt.call(Function.apply,Array.prototype.splice),U=pt.call(Function.call,String.prototype.replace),P=pt.call(Function.call,String.prototype.slice),N=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,w=function(K){var R=P(K,0,1),Ot=P(K,-1);if("%"===R&&"%"!==Ot)throw new V("invalid intrinsic syntax, expected closing `%`");if("%"===Ot&&"%"!==R)throw new V("invalid intrinsic syntax, expected opening `%`");var Nt=[];return U(K,N,function(G,lt,J,at){Nt[Nt.length]=J?U(at,O,"$1"):lt||G}),Nt},st=function(K,R){var Nt,Ot=K;if(b(et,Ot)&&(Ot="%"+(Nt=et[Ot])[0]+"%"),b(wt,Ot)){var G=wt[Ot];if(G===xt&&(G=qt(Ot)),void 0===G&&!R)throw new c("intrinsic "+K+" exists, but is not available. Please file an issue!");return{alias:Nt,name:Ot,value:G}}throw new V("intrinsic "+K+" does not exist!")};Dt.exports=function(K,R){if("string"!=typeof K||0===K.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof R)throw new c('"allowMissing" argument must be a boolean');var Ot=w(K),Nt=Ot.length>0?Ot[0]:"",G=st("%"+Nt+"%",R),lt=G.name,J=G.value,at=!1,ct=G.alias;ct&&(Nt=ct[0],M(Ot,S([0,1],ct)));for(var Z=1,bt=!0;Z<Ot.length;Z+=1){var Lt=Ot[Z],Xt=P(Lt,0,1),At=P(Lt,-1);if(('"'===Xt||"'"===Xt||"`"===Xt||'"'===At||"'"===At||"`"===At)&&Xt!==At)throw new V("property names with quotes must have matching quotes");if(("constructor"===Lt||!bt)&&(at=!0),b(wt,lt="%"+(Nt+="."+Lt)+"%"))J=wt[lt];else if(null!=J){if(!(Lt in J)){if(!R)throw new c("base intrinsic for "+K+" exists, but the property is not available.");return}if(H&&Z+1>=Ot.length){var ie=H(J,Lt);J=(bt=!!ie)&&"get"in ie&&!("originalValue"in ie.get)?ie.get:J[Lt]}else bt=b(J,Lt),J=J[Lt];bt&&!at&&(wt[lt]=J)}}return J}},9326:(Dt,yt,Q)=>{"use strict";var F="undefined"!=typeof Symbol&&Symbol,V=Q(9045);Dt.exports=function(){return"function"==typeof F&&"function"==typeof Symbol&&"symbol"==typeof F("foo")&&"symbol"==typeof Symbol("bar")&&V()}},9045:Dt=>{"use strict";Dt.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var Q={},F=Symbol("test"),V=Object(F);if("string"==typeof F||"[object Symbol]"!==Object.prototype.toString.call(F)||"[object Symbol]"!==Object.prototype.toString.call(V))return!1;for(F in Q[F]=42,Q)return!1;if("function"==typeof Object.keys&&0!==Object.keys(Q).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(Q).length)return!1;var c=Object.getOwnPropertySymbols(Q);if(1!==c.length||c[0]!==F||!Object.prototype.propertyIsEnumerable.call(Q,F))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var nt=Object.getOwnPropertyDescriptor(Q,F);if(42!==nt.value||!0!==nt.enumerable)return!1}return!0}},1407:(Dt,yt,Q)=>{"use strict";var F=Q(9045);Dt.exports=function(){return F()&&!!Symbol.toStringTag}},6558:(Dt,yt,Q)=>{"use strict";var F=Q(5396);Dt.exports=F.call(Function.call,Object.prototype.hasOwnProperty)},7316:(Dt,yt,Q)=>{"use strict";var F=Q(1407)(),I=Q(9568)("Object.prototype.toString"),c=function(ft){return!(F&&ft&&"object"==typeof ft&&Symbol.toStringTag in ft)&&"[object Arguments]"===I(ft)},nt=function(ft){return!!c(ft)||null!==ft&&"object"==typeof ft&&"number"==typeof ft.length&&ft.length>=0&&"[object Array]"!==I(ft)&&"[object Function]"===I(ft.callee)},H=function(){return c(arguments)}();c.isLegacyArguments=nt,Dt.exports=H?c:nt},3105:(Dt,yt,Q)=>{"use strict";var F=Date.prototype.getDay,I=Object.prototype.toString,nt=Q(1407)();Dt.exports=function(ot){return"object"==typeof ot&&null!==ot&&(nt?function(ot){try{return F.call(ot),!0}catch(ft){return!1}}(ot):"[object Date]"===I.call(ot))}},5544:(Dt,yt,Q)=>{"use strict";var I,c,nt,H,F=Q(9568),V=Q(1407)();if(V){I=F("Object.prototype.hasOwnProperty"),c=F("RegExp.prototype.exec"),nt={};var ot=function(){throw nt};H={toString:ot,valueOf:ot},"symbol"==typeof Symbol.toPrimitive&&(H[Symbol.toPrimitive]=ot)}var ft=F("Object.prototype.toString"),It=Object.getOwnPropertyDescriptor;Dt.exports=V?function(mt){if(!mt||"object"!=typeof mt)return!1;var wt=It(mt,"lastIndex");if(!wt||!I(wt,"value"))return!1;try{c(mt,H)}catch(et){return et===nt}}:function(mt){return!(!mt||"object"!=typeof mt&&"function"!=typeof mt)&&"[object RegExp]"===ft(mt)}},8228:Dt=>{"use strict";var yt=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;function V(c){if(null==c)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}Dt.exports=function(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de","5"===Object.getOwnPropertyNames(c)[0])return!1;for(var nt={},H=0;H<10;H++)nt["_"+String.fromCharCode(H)]=H;if("0123456789"!==Object.getOwnPropertyNames(nt).map(function(It){return nt[It]}).join(""))return!1;var ft={};return"abcdefghijklmnopqrst".split("").forEach(function(It){ft[It]=It}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},ft)).join("")}catch(It){return!1}}()?Object.assign:function(c,nt){for(var H,ft,ot=V(c),It=1;It<arguments.length;It++){for(var Tt in H=Object(arguments[It]))Q.call(H,Tt)&&(ot[Tt]=H[Tt]);if(yt){ft=yt(H);for(var xt=0;xt<ft.length;xt++)F.call(H,ft[xt])&&(ot[ft[xt]]=H[ft[xt]])}}return ot}},7859:Dt=>{"use strict";var yt=function(Q){return Q!=Q};Dt.exports=function(F,V){return 0===F&&0===V?1/F==1/V:!!(F===V||yt(F)&&yt(V))}},4269:(Dt,yt,Q)=>{"use strict";var F=Q(6886),V=Q(44),I=Q(7859),c=Q(8593),nt=Q(6343),H=V(c(),Object);F(H,{getPolyfill:c,implementation:I,shim:nt}),Dt.exports=H},8593:(Dt,yt,Q)=>{"use strict";var F=Q(7859);Dt.exports=function(){return"function"==typeof Object.is?Object.is:F}},6343:(Dt,yt,Q)=>{"use strict";var F=Q(8593),V=Q(6886);Dt.exports=function(){var c=F();return V(Object,{is:c},{is:function(){return Object.is!==c}}),c}},6068:(Dt,yt,Q)=>{"use strict";var F;if(!Object.keys){var V=Object.prototype.hasOwnProperty,I=Object.prototype.toString,c=Q(2666),nt=Object.prototype.propertyIsEnumerable,H=!nt.call({toString:null},"toString"),ot=nt.call(function(){},"prototype"),ft=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],It=function(wt){var qt=wt.constructor;return qt&&qt.prototype===wt},Tt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},xt=function(){if("undefined"==typeof window)return!1;for(var wt in window)try{if(!Tt["$"+wt]&&V.call(window,wt)&&null!==window[wt]&&"object"==typeof window[wt])try{It(window[wt])}catch(qt){return!0}}catch(qt){return!0}return!1}();F=function(qt){var et=null!==qt&&"object"==typeof qt,pt="[object Function]"===I.call(qt),b=c(qt),S=et&&"[object String]"===I.call(qt),M=[];if(!et&&!pt&&!b)throw new TypeError("Object.keys called on a non-object");var U=ot&&pt;if(S&&qt.length>0&&!V.call(qt,0))for(var P=0;P<qt.length;++P)M.push(String(P));if(b&&qt.length>0)for(var N=0;N<qt.length;++N)M.push(String(N));else for(var O in qt)(!U||"prototype"!==O)&&V.call(qt,O)&&M.push(String(O));if(H)for(var w=function(wt){if("undefined"==typeof window||!xt)return It(wt);try{return It(wt)}catch(qt){return!1}}(qt),st=0;st<ft.length;++st)(!w||"constructor"!==ft[st])&&V.call(qt,ft[st])&&M.push(ft[st]);return M}}Dt.exports=F},8507:(Dt,yt,Q)=>{"use strict";var F=Array.prototype.slice,V=Q(2666),I=Object.keys,c=I?function(ot){return I(ot)}:Q(6068),nt=Object.keys;c.shim=function(){return Object.keys?function(){var ft=Object.keys(arguments);return ft&&ft.length===arguments.length}(1,2)||(Object.keys=function(It){return V(It)?nt(F.call(It)):nt(It)}):Object.keys=c,Object.keys||c},Dt.exports=c},2666:Dt=>{"use strict";var yt=Object.prototype.toString;Dt.exports=function(F){var V=yt.call(F),I="[object Arguments]"===V;return I||(I="[object Array]"!==V&&null!==F&&"object"==typeof F&&"number"==typeof F.length&&F.length>=0&&"[object Function]"===yt.call(F.callee)),I}},5751:Dt=>{Dt.exports=function(Q,F,V,I){var c=Q[0],nt=Q[1],H=!1;void 0===V&&(V=0),void 0===I&&(I=F.length);for(var ot=(I-V)/2,ft=0,It=ot-1;ft<ot;It=ft++){var Tt=F[V+2*ft+0],xt=F[V+2*ft+1],wt=F[V+2*It+1];xt>nt!=wt>nt&&c<(F[V+2*It+0]-Tt)*(nt-xt)/(wt-xt)+Tt&&(H=!H)}return H}},5503:(Dt,yt,Q)=>{var F=Q(5751),V=Q(5891);Dt.exports=function(c,nt,H,ot){return nt.length>0&&Array.isArray(nt[0])?V(c,nt,H,ot):F(c,nt,H,ot)},Dt.exports.nested=V,Dt.exports.flat=F},5891:Dt=>{Dt.exports=function(Q,F,V,I){var c=Q[0],nt=Q[1],H=!1;void 0===V&&(V=0),void 0===I&&(I=F.length);for(var ot=I-V,ft=0,It=ot-1;ft<ot;It=ft++){var Tt=F[ft+V][0],xt=F[ft+V][1],wt=F[It+V][1];xt>nt!=wt>nt&&c<(F[It+V][0]-Tt)*(nt-xt)/(wt-xt)+Tt&&(H=!H)}return H}},171:function(Dt){Dt.exports=function(){"use strict";function yt(dt,D){if(!(dt instanceof D))throw new TypeError("Cannot call a class as a function")}function Q(dt,D){for(var A=0;A<D.length;A++){var L=D[A];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(dt,L.key,L)}}function F(dt,D,A){return D&&Q(dt.prototype,D),A&&Q(dt,A),dt}var V=function(D,A){this.next=null,this.key=D,this.data=A,this.left=null,this.right=null};function I(dt,D){return dt>D?1:dt<D?-1:0}function c(dt,D,A){for(var L=new V(null,null),W=L,ut=L;;){var Ct=A(dt,D.key);if(Ct<0){if(null===D.left)break;if(A(dt,D.left.key)<0&&(D.left=(Rt=D.left).right,Rt.right=D,null===(D=Rt).left))break;ut.left=D,ut=D,D=D.left}else{if(!(Ct>0))break;if(null===D.right)break;var Rt;if(A(dt,D.right.key)>0&&(D.right=(Rt=D.right).left,Rt.left=D,null===(D=Rt).right))break;W.right=D,W=D,D=D.right}}return W.right=D.left,ut.left=D.right,D.left=L.right,D.right=L.left,D}function nt(dt,D,A,L){var W=new V(dt,D);if(null===A)return W.left=W.right=null,W;var ut=L(dt,(A=c(dt,A,L)).key);return ut<0?(W.left=A.left,W.right=A,A.left=null):ut>=0&&(W.right=A.right,W.left=A,A.right=null),W}function H(dt,D,A){var L=null,W=null;if(D){var ut=A((D=c(dt,D,A)).key,dt);0===ut?(L=D.left,W=D.right):ut<0?(W=D.right,D.right=null,L=D):(L=D.left,D.left=null,W=D)}return{left:L,right:W}}function ft(dt,D,A,L,W){if(dt){L(D+(A?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+W(dt)+"\n");var ut=D+(A?"    ":"\u2502   ");dt.left&&ft(dt.left,ut,!1,L,W),dt.right&&ft(dt.right,ut,!0,L,W)}}var It=function(){function dt(D){void 0===D&&(D=I),this._root=null,this._size=0,this._comparator=D}return dt.prototype.insert=function(D,A){return this._size++,this._root=nt(D,A,this._root,this._comparator)},dt.prototype.add=function(D,A){var L=new V(D,A);null===this._root&&(L.left=L.right=null,this._size++,this._root=L);var W=this._comparator,ut=c(D,this._root,W),Ct=W(D,ut.key);return 0===Ct?this._root=ut:(Ct<0?(L.left=ut.left,L.right=ut,ut.left=null):Ct>0&&(L.right=ut.right,L.left=ut,ut.right=null),this._size++,this._root=L),this._root},dt.prototype.remove=function(D){this._root=this._remove(D,this._root,this._comparator)},dt.prototype._remove=function(D,A,L){var W;return null===A?null:0===L(D,(A=c(D,A,L)).key)?(null===A.left?W=A.right:(W=c(D,A.left,L)).right=A.right,this._size--,W):A},dt.prototype.pop=function(){var D=this._root;if(D){for(;D.left;)D=D.left;return this._root=c(D.key,this._root,this._comparator),this._root=this._remove(D.key,this._root,this._comparator),{key:D.key,data:D.data}}return null},dt.prototype.findStatic=function(D){for(var A=this._root,L=this._comparator;A;){var W=L(D,A.key);if(0===W)return A;A=W<0?A.left:A.right}return null},dt.prototype.find=function(D){return this._root&&(this._root=c(D,this._root,this._comparator),0!==this._comparator(D,this._root.key))?null:this._root},dt.prototype.contains=function(D){for(var A=this._root,L=this._comparator;A;){var W=L(D,A.key);if(0===W)return!0;A=W<0?A.left:A.right}return!1},dt.prototype.forEach=function(D,A){for(var L=this._root,W=[],ut=!1;!ut;)null!==L?(W.push(L),L=L.left):0!==W.length?(L=W.pop(),D.call(A,L),L=L.right):ut=!0;return this},dt.prototype.range=function(D,A,L,W){for(var ut=[],Ct=this._comparator,Rt=this._root;0!==ut.length||Rt;)if(Rt)ut.push(Rt),Rt=Rt.left;else{if(Ct((Rt=ut.pop()).key,A)>0)break;if(Ct(Rt.key,D)>=0&&L.call(W,Rt))return this;Rt=Rt.right}return this},dt.prototype.keys=function(){var D=[];return this.forEach(function(A){return D.push(A.key)}),D},dt.prototype.values=function(){var D=[];return this.forEach(function(A){return D.push(A.data)}),D},dt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},dt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},dt.prototype.minNode=function(D){if(void 0===D&&(D=this._root),D)for(;D.left;)D=D.left;return D},dt.prototype.maxNode=function(D){if(void 0===D&&(D=this._root),D)for(;D.right;)D=D.right;return D},dt.prototype.at=function(D){for(var A=this._root,L=!1,W=0,ut=[];!L;)if(A)ut.push(A),A=A.left;else if(ut.length>0){if(A=ut.pop(),W===D)return A;W++,A=A.right}else L=!0;return null},dt.prototype.next=function(D){var A=this._root,L=null;if(D.right){for(L=D.right;L.left;)L=L.left;return L}for(var W=this._comparator;A;){var ut=W(D.key,A.key);if(0===ut)break;ut<0?(L=A,A=A.left):A=A.right}return L},dt.prototype.prev=function(D){var A=this._root,L=null;if(null!==D.left){for(L=D.left;L.right;)L=L.right;return L}for(var W=this._comparator;A;){var ut=W(D.key,A.key);if(0===ut)break;ut<0?A=A.left:(L=A,A=A.right)}return L},dt.prototype.clear=function(){return this._root=null,this._size=0,this},dt.prototype.toList=function(){return function(dt){for(var D=dt,A=[],L=!1,W=new V(null,null),ut=W;!L;)D?(A.push(D),D=D.left):A.length>0?D=(D=ut=ut.next=A.pop()).right:L=!0;return ut.next=null,W.next}(this._root)},dt.prototype.load=function(D,A,L){void 0===A&&(A=[]),void 0===L&&(L=!1);var W=D.length,ut=this._comparator;if(L&&et(D,A,0,W-1,ut),null===this._root)this._root=Tt(D,A,0,W),this._size=W;else{var Ct=function(dt,D,A){for(var L=new V(null,null),W=L,ut=dt,Ct=D;null!==ut&&null!==Ct;)A(ut.key,Ct.key)<0?(W.next=ut,ut=ut.next):(W.next=Ct,Ct=Ct.next),W=W.next;return null!==ut?W.next=ut:null!==Ct&&(W.next=Ct),L.next}(this.toList(),function(dt,D){for(var A=new V(null,null),L=A,W=0;W<dt.length;W++)L=L.next=new V(dt[W],D[W]);return L.next=null,A.next}(D,A),ut);this._root=wt({head:Ct},0,W=this._size+W)}return this},dt.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(dt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),dt.prototype.toString=function(D){void 0===D&&(D=function(W){return String(W.key)});var A=[];return ft(this._root,"",!0,function(L){return A.push(L)},D),A.join("")},dt.prototype.update=function(D,A,L){var W=this._comparator,ut=H(D,this._root,W),Ct=ut.left,Rt=ut.right;W(D,A)<0?Rt=nt(A,L,Rt,W):Ct=nt(A,L,Ct,W),this._root=function(dt,D,A){return null===D?dt:(null===dt||((D=c(dt.key,D,A)).left=dt),D)}(Ct,Rt,W)},dt.prototype.split=function(D){return H(D,this._root,this._comparator)},dt}();function Tt(dt,D,A,L){var W=L-A;if(W>0){var ut=A+Math.floor(W/2),Ft=new V(dt[ut],D[ut]);return Ft.left=Tt(dt,D,A,ut),Ft.right=Tt(dt,D,ut+1,L),Ft}return null}function wt(dt,D,A){var L=A-D;if(L>0){var W=D+Math.floor(L/2),ut=wt(dt,D,W),Ct=dt.head;return Ct.left=ut,dt.head=dt.head.next,Ct.right=wt(dt,W+1,A),Ct}return null}function et(dt,D,A,L,W){if(!(A>=L)){for(var ut=dt[A+L>>1],Ct=A-1,Rt=L+1;;){do{Ct++}while(W(dt[Ct],ut)<0);do{Rt--}while(W(dt[Rt],ut)>0);if(Ct>=Rt)break;var Ft=dt[Ct];dt[Ct]=dt[Rt],dt[Rt]=Ft,Ft=D[Ct],D[Ct]=D[Rt],D[Rt]=Ft}et(dt,D,A,Rt,W),et(dt,D,Rt+1,L,W)}}var pt=function(D,A){return D.ll.x<=A.x&&A.x<=D.ur.x&&D.ll.y<=A.y&&A.y<=D.ur.y},b=function(D,A){return A.ur.x<D.ll.x||D.ur.x<A.ll.x||A.ur.y<D.ll.y||D.ur.y<A.ll.y?null:{ll:{x:D.ll.x<A.ll.x?A.ll.x:D.ll.x,y:D.ll.y<A.ll.y?A.ll.y:D.ll.y},ur:{x:D.ur.x<A.ur.x?D.ur.x:A.ur.x,y:D.ur.y<A.ur.y?D.ur.y:A.ur.y}}},S=Number.EPSILON;void 0===S&&(S=Math.pow(2,-52));var M=S*S,U=function(D,A){if(-S<D&&D<S&&-S<A&&A<S)return 0;var L=D-A;return L*L<M*D*A?0:D<A?-1:1},P=function(){function dt(){yt(this,dt),this.reset()}return F(dt,[{key:"reset",value:function(){this.xRounder=new N,this.yRounder=new N}},{key:"round",value:function(A,L){return{x:this.xRounder.round(A),y:this.yRounder.round(L)}}}]),dt}(),N=function(){function dt(){yt(this,dt),this.tree=new It,this.round(0)}return F(dt,[{key:"round",value:function(A){var L=this.tree.add(A),W=this.tree.prev(L);if(null!==W&&0===U(L.key,W.key))return this.tree.remove(A),W.key;var ut=this.tree.next(L);return null!==ut&&0===U(L.key,ut.key)?(this.tree.remove(A),ut.key):A}}]),dt}(),O=new P,w=function(D,A){return D.x*A.y-D.y*A.x},st=function(D,A){return D.x*A.x+D.y*A.y},z=function(D,A,L){var Ct=w({x:A.x-D.x,y:A.y-D.y},{x:L.x-D.x,y:L.y-D.y});return U(Ct,0)},K=function(D){return Math.sqrt(st(D,D))},R=function(D,A,L){var W={x:A.x-D.x,y:A.y-D.y},ut={x:L.x-D.x,y:L.y-D.y};return w(ut,W)/K(ut)/K(W)},Ot=function(D,A,L){var W={x:A.x-D.x,y:A.y-D.y},ut={x:L.x-D.x,y:L.y-D.y};return st(ut,W)/K(ut)/K(W)},Nt=function(D,A,L){return 0===A.y?null:{x:D.x+A.x/A.y*(L-D.y),y:L}},G=function(D,A,L){return 0===A.x?null:{x:L,y:D.y+A.y/A.x*(L-D.x)}},J=function(){function dt(D,A){yt(this,dt),void 0===D.events?D.events=[this]:D.events.push(this),this.point=D,this.isLeft=A}return F(dt,null,[{key:"compare",value:function(A,L){var W=dt.comparePoints(A.point,L.point);return 0!==W?W:(A.point!==L.point&&A.link(L),A.isLeft!==L.isLeft?A.isLeft?1:-1:ct.compare(A.segment,L.segment))}},{key:"comparePoints",value:function(A,L){return A.x<L.x?-1:A.x>L.x?1:A.y<L.y?-1:A.y>L.y?1:0}}]),F(dt,[{key:"link",value:function(A){if(A.point===this.point)throw new Error("Tried to link already linked events");for(var L=A.point.events,W=0,ut=L.length;W<ut;W++){var Ct=L[W];this.point.events.push(Ct),Ct.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var A=this.point.events.length,L=0;L<A;L++){var W=this.point.events[L];if(void 0===W.segment.consumedBy)for(var ut=L+1;ut<A;ut++){var Ct=this.point.events[ut];void 0===Ct.consumedBy&&W.otherSE.point.events===Ct.otherSE.point.events&&W.segment.consume(Ct.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var A=[],L=0,W=this.point.events.length;L<W;L++){var ut=this.point.events[L];ut!==this&&!ut.segment.ringOut&&ut.segment.isInResult()&&A.push(ut)}return A}},{key:"getLeftmostComparator",value:function(A){var L=this,W=new Map,ut=function(Rt){var Ft=Rt.otherSE;W.set(Rt,{sine:R(L.point,A.point,Ft.point),cosine:Ot(L.point,A.point,Ft.point)})};return function(Ct,Rt){W.has(Ct)||ut(Ct),W.has(Rt)||ut(Rt);var Ft=W.get(Ct),Mt=Ft.sine,ae=Ft.cosine,ge=W.get(Rt),Gt=ge.sine,de=ge.cosine;return Mt>=0&&Gt>=0?ae<de?1:ae>de?-1:0:Mt<0&&Gt<0?ae<de?-1:ae>de?1:0:Gt<Mt?-1:Gt>Mt?1:0}}}]),dt}(),at=0,ct=function(){function dt(D,A,L,W){yt(this,dt),this.id=++at,this.leftSE=D,D.segment=this,D.otherSE=A,this.rightSE=A,A.segment=this,A.otherSE=D,this.rings=L,this.windings=W}return F(dt,null,[{key:"compare",value:function(A,L){var W=A.leftSE.point.x,ut=L.leftSE.point.x,Ct=A.rightSE.point.x,Rt=L.rightSE.point.x;if(Rt<W)return 1;if(Ct<ut)return-1;var Ft=A.leftSE.point.y,Mt=L.leftSE.point.y,ae=A.rightSE.point.y,ge=L.rightSE.point.y;if(W<ut){if(Mt<Ft&&Mt<ae)return 1;if(Mt>Ft&&Mt>ae)return-1;var Gt=A.comparePoint(L.leftSE.point);if(Gt<0)return 1;if(Gt>0)return-1;var de=L.comparePoint(A.rightSE.point);return 0!==de?de:-1}if(W>ut){if(Ft<Mt&&Ft<ge)return-1;if(Ft>Mt&&Ft>ge)return 1;var yn=L.comparePoint(A.leftSE.point);if(0!==yn)return yn;var we=A.comparePoint(L.rightSE.point);return we<0?1:we>0?-1:1}if(Ft<Mt)return-1;if(Ft>Mt)return 1;if(Ct<Rt){var tn=L.comparePoint(A.rightSE.point);if(0!==tn)return tn}if(Ct>Rt){var hn=A.comparePoint(L.rightSE.point);if(hn<0)return 1;if(hn>0)return-1}if(Ct!==Rt){var Cn=ae-Ft,Wn=Ct-W,Rn=ge-Mt,fr=Rt-ut;if(Cn>Wn&&Rn<fr)return 1;if(Cn<Wn&&Rn>fr)return-1}return Ct>Rt?1:Ct<Rt||ae<ge?-1:ae>ge?1:A.id<L.id?-1:A.id>L.id?1:0}}]),F(dt,[{key:"replaceRightSE",value:function(A){this.rightSE=A,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var A=this.leftSE.point.y,L=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:A<L?A:L},ur:{x:this.rightSE.point.x,y:A>L?A:L}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(A){return A.x===this.leftSE.point.x&&A.y===this.leftSE.point.y||A.x===this.rightSE.point.x&&A.y===this.rightSE.point.y}},{key:"comparePoint",value:function(A){if(this.isAnEndpoint(A))return 0;var L=this.leftSE.point,W=this.rightSE.point,ut=this.vector();if(L.x===W.x)return A.x===L.x?0:A.x<L.x?1:-1;if(A.x===L.x+(A.y-L.y)/ut.y*ut.x)return 0;var Mt=L.y+(A.x-L.x)/ut.x*ut.y;return A.y===Mt?0:A.y<Mt?-1:1}},{key:"getIntersection",value:function(A){var L=this.bbox(),W=A.bbox(),ut=b(L,W);if(null===ut)return null;var Ct=this.leftSE.point,Rt=this.rightSE.point,Ft=A.leftSE.point,Mt=A.rightSE.point,ae=pt(L,Ft)&&0===this.comparePoint(Ft),ge=pt(W,Ct)&&0===A.comparePoint(Ct),Gt=pt(L,Mt)&&0===this.comparePoint(Mt),de=pt(W,Rt)&&0===A.comparePoint(Rt);if(ge&&ae)return de&&!Gt?Rt:!de&&Gt?Mt:null;if(ge)return Gt&&Ct.x===Mt.x&&Ct.y===Mt.y?null:Ct;if(ae)return de&&Rt.x===Ft.x&&Rt.y===Ft.y?null:Ft;if(de&&Gt)return null;if(de)return Rt;if(Gt)return Mt;var yn=function(D,A,L,W){if(0===A.x)return G(L,W,D.x);if(0===W.x)return G(D,A,L.x);if(0===A.y)return Nt(L,W,D.y);if(0===W.y)return Nt(D,A,L.y);var ut=w(A,W);if(0==ut)return null;var Ct={x:L.x-D.x,y:L.y-D.y},Rt=w(Ct,A)/ut,Ft=w(Ct,W)/ut;return{x:(D.x+Ft*A.x+(L.x+Rt*W.x))/2,y:(D.y+Ft*A.y+(L.y+Rt*W.y))/2}}(Ct,this.vector(),Ft,A.vector());return null!==yn&&pt(ut,yn)?O.round(yn.x,yn.y):null}},{key:"split",value:function(A){var L=[],W=void 0!==A.events,ut=new J(A,!0),Ct=new J(A,!1),Rt=this.rightSE;this.replaceRightSE(Ct),L.push(Ct),L.push(ut);var Ft=new dt(ut,Rt,this.rings.slice(),this.windings.slice());return J.comparePoints(Ft.leftSE.point,Ft.rightSE.point)>0&&Ft.swapEvents(),J.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),W&&(ut.checkForConsuming(),Ct.checkForConsuming()),L}},{key:"swapEvents",value:function(){var A=this.rightSE;this.rightSE=this.leftSE,this.leftSE=A,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var L=0,W=this.windings.length;L<W;L++)this.windings[L]*=-1}},{key:"consume",value:function(A){for(var L=this,W=A;L.consumedBy;)L=L.consumedBy;for(;W.consumedBy;)W=W.consumedBy;var ut=dt.compare(L,W);if(0!==ut){if(ut>0){var Ct=L;L=W,W=Ct}if(L.prev===W){var Rt=L;L=W,W=Rt}for(var Ft=0,Mt=W.rings.length;Ft<Mt;Ft++){var ae=W.rings[Ft],ge=W.windings[Ft],Gt=L.rings.indexOf(ae);-1===Gt?(L.rings.push(ae),L.windings.push(ge)):L.windings[Gt]+=ge}W.rings=null,W.windings=null,W.consumedBy=L,W.leftSE.consumedBy=L.leftSE,W.rightSE.consumedBy=L.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var A=this.beforeState();this._afterState={rings:A.rings.slice(0),windings:A.windings.slice(0),multiPolys:[]};for(var L=this._afterState.rings,W=this._afterState.windings,ut=this._afterState.multiPolys,Ct=0,Rt=this.rings.length;Ct<Rt;Ct++){var Ft=this.rings[Ct],Mt=this.windings[Ct],ae=L.indexOf(Ft);-1===ae?(L.push(Ft),W.push(Mt)):W[ae]+=Mt}for(var ge=[],Gt=[],de=0,yn=L.length;de<yn;de++)if(0!==W[de]){var we=L[de],tn=we.poly;if(-1===Gt.indexOf(tn))if(we.isExterior)ge.push(tn);else{-1===Gt.indexOf(tn)&&Gt.push(tn);var hn=ge.indexOf(we.poly);-1!==hn&&ge.splice(hn,1)}}for(var Cn=0,Wn=ge.length;Cn<Wn;Cn++){var Rn=ge[Cn].multiPoly;-1===ut.indexOf(Rn)&&ut.push(Rn)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var A=this.beforeState().multiPolys,L=this.afterState().multiPolys;switch(Zt.type){case"union":this._isInResult=0===A.length!=(0===L.length);break;case"intersection":var Ct,Rt;A.length<L.length?(Ct=A.length,Rt=L.length):(Ct=L.length,Rt=A.length),this._isInResult=Rt===Zt.numMultiPolys&&Ct<Rt;break;case"xor":var Ft=Math.abs(A.length-L.length);this._isInResult=Ft%2==1;break;case"difference":var Mt=function(ge){return 1===ge.length&&ge[0].isSubject};this._isInResult=Mt(A)!==Mt(L);break;default:throw new Error("Unrecognized operation type found ".concat(Zt.type))}return this._isInResult}}],[{key:"fromRing",value:function(A,L,W){var ut,Ct,Rt,Ft=J.comparePoints(A,L);if(Ft<0)ut=A,Ct=L,Rt=1;else{if(!(Ft>0))throw new Error("Tried to create degenerate segment at [".concat(A.x,", ").concat(A.y,"]"));ut=L,Ct=A,Rt=-1}return new dt(new J(ut,!0),new J(Ct,!1),[W],[Rt])}}]),dt}(),Z=function(){function dt(D,A,L){if(yt(this,dt),!Array.isArray(D)||0===D.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=A,this.isExterior=L,this.segments=[],"number"!=typeof D[0][0]||"number"!=typeof D[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var W=O.round(D[0][0],D[0][1]);this.bbox={ll:{x:W.x,y:W.y},ur:{x:W.x,y:W.y}};for(var ut=W,Ct=1,Rt=D.length;Ct<Rt;Ct++){if("number"!=typeof D[Ct][0]||"number"!=typeof D[Ct][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Ft=O.round(D[Ct][0],D[Ct][1]);Ft.x===ut.x&&Ft.y===ut.y||(this.segments.push(ct.fromRing(ut,Ft,this)),Ft.x<this.bbox.ll.x&&(this.bbox.ll.x=Ft.x),Ft.y<this.bbox.ll.y&&(this.bbox.ll.y=Ft.y),Ft.x>this.bbox.ur.x&&(this.bbox.ur.x=Ft.x),Ft.y>this.bbox.ur.y&&(this.bbox.ur.y=Ft.y),ut=Ft)}(W.x!==ut.x||W.y!==ut.y)&&this.segments.push(ct.fromRing(ut,W,this))}return F(dt,[{key:"getSweepEvents",value:function(){for(var A=[],L=0,W=this.segments.length;L<W;L++){var ut=this.segments[L];A.push(ut.leftSE),A.push(ut.rightSE)}return A}}]),dt}(),bt=function(){function dt(D,A){if(yt(this,dt),!Array.isArray(D))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Z(D[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var L=1,W=D.length;L<W;L++){var ut=new Z(D[L],this,!1);ut.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=ut.bbox.ll.x),ut.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=ut.bbox.ll.y),ut.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=ut.bbox.ur.x),ut.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=ut.bbox.ur.y),this.interiorRings.push(ut)}this.multiPoly=A}return F(dt,[{key:"getSweepEvents",value:function(){for(var A=this.exteriorRing.getSweepEvents(),L=0,W=this.interiorRings.length;L<W;L++)for(var ut=this.interiorRings[L].getSweepEvents(),Ct=0,Rt=ut.length;Ct<Rt;Ct++)A.push(ut[Ct]);return A}}]),dt}(),Lt=function(){function dt(D,A){if(yt(this,dt),!Array.isArray(D))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof D[0][0][0]&&(D=[D])}catch(Ct){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var L=0,W=D.length;L<W;L++){var ut=new bt(D[L],this);ut.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=ut.bbox.ll.x),ut.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=ut.bbox.ll.y),ut.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=ut.bbox.ur.x),ut.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=ut.bbox.ur.y),this.polys.push(ut)}this.isSubject=A}return F(dt,[{key:"getSweepEvents",value:function(){for(var A=[],L=0,W=this.polys.length;L<W;L++)for(var ut=this.polys[L].getSweepEvents(),Ct=0,Rt=ut.length;Ct<Rt;Ct++)A.push(ut[Ct]);return A}}]),dt}(),Xt=function(){function dt(D){yt(this,dt),this.events=D;for(var A=0,L=D.length;A<L;A++)D[A].segment.ringOut=this;this.poly=null}return F(dt,null,[{key:"factory",value:function(A){for(var L=[],W=0,ut=A.length;W<ut;W++){var Ct=A[W];if(Ct.isInResult()&&!Ct.ringOut){for(var Rt=null,Ft=Ct.leftSE,Mt=Ct.rightSE,ae=[Ft],ge=Ft.point,Gt=[];Rt=Ft,ae.push(Ft=Mt),Ft.point!==ge;)for(;;){var de=Ft.getAvailableLinkedEvents();if(0===de.length){var yn=ae[0].point,we=ae[ae.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(yn.x,",")+" ".concat(yn.y,"]. Last matching segment found ends at")+" [".concat(we.x,", ").concat(we.y,"]."))}if(1===de.length){Mt=de[0].otherSE;break}for(var tn=null,hn=0,Cn=Gt.length;hn<Cn;hn++)if(Gt[hn].point===Ft.point){tn=hn;break}if(null===tn){Gt.push({index:ae.length,point:Ft.point});var fr=Ft.getLeftmostComparator(Rt);Mt=de.sort(fr)[0].otherSE;break}var Wn=Gt.splice(tn)[0],Rn=ae.splice(Wn.index);Rn.unshift(Rn[0].otherSE),L.push(new dt(Rn.reverse()))}L.push(new dt(ae))}}return L}}]),F(dt,[{key:"getGeom",value:function(){for(var A=this.events[0].point,L=[A],W=1,ut=this.events.length-1;W<ut;W++){var Ct=this.events[W].point;0!==z(Ct,A,this.events[W+1].point)&&(L.push(Ct),A=Ct)}if(1===L.length)return null;0===z(L[0],A,L[1])&&L.shift(),L.push(L[0]);for(var ae=this.isExteriorRing()?1:-1,ge=this.isExteriorRing()?0:L.length-1,Gt=this.isExteriorRing()?L.length:-1,de=[],yn=ge;yn!=Gt;yn+=ae)de.push([L[yn].x,L[yn].y]);return de}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var A=this.enclosingRing();this._isExteriorRing=!A||!A.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var A=this.events[0],L=1,W=this.events.length;L<W;L++){var ut=this.events[L];J.compare(A,ut)>0&&(A=ut)}for(var Ct=A.segment.prevInResult(),Rt=Ct?Ct.prevInResult():null;;){if(!Ct)return null;if(!Rt)return Ct.ringOut;if(Rt.ringOut!==Ct.ringOut)return Rt.ringOut.enclosingRing()!==Ct.ringOut?Ct.ringOut:Ct.ringOut.enclosingRing();Ct=Rt.prevInResult(),Rt=Ct?Ct.prevInResult():null}}}]),dt}(),At=function(){function dt(D){yt(this,dt),this.exteriorRing=D,D.poly=this,this.interiorRings=[]}return F(dt,[{key:"addInterior",value:function(A){this.interiorRings.push(A),A.poly=this}},{key:"getGeom",value:function(){var A=[this.exteriorRing.getGeom()];if(null===A[0])return null;for(var L=0,W=this.interiorRings.length;L<W;L++){var ut=this.interiorRings[L].getGeom();null!==ut&&A.push(ut)}return A}}]),dt}(),ie=function(){function dt(D){yt(this,dt),this.rings=D,this.polys=this._composePolys(D)}return F(dt,[{key:"getGeom",value:function(){for(var A=[],L=0,W=this.polys.length;L<W;L++){var ut=this.polys[L].getGeom();null!==ut&&A.push(ut)}return A}},{key:"_composePolys",value:function(A){for(var L=[],W=0,ut=A.length;W<ut;W++){var Ct=A[W];if(!Ct.poly)if(Ct.isExteriorRing())L.push(new At(Ct));else{var Rt=Ct.enclosingRing();Rt.poly||L.push(new At(Rt)),Rt.poly.addInterior(Ct)}}return L}}]),dt}(),fe=function(){function dt(D){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct.compare;yt(this,dt),this.queue=D,this.tree=new It(A),this.segments=[]}return F(dt,[{key:"process",value:function(A){var L=A.segment,W=[];if(A.consumedBy)return A.isLeft?this.queue.remove(A.otherSE):this.tree.remove(L),W;var ut=A.isLeft?this.tree.insert(L):this.tree.find(L);if(!ut)throw new Error("Unable to find segment #".concat(L.id," ")+"[".concat(L.leftSE.point.x,", ").concat(L.leftSE.point.y,"] -> ")+"[".concat(L.rightSE.point.x,", ").concat(L.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Ct=ut,Rt=ut,Ft=void 0,Mt=void 0;void 0===Ft;)null===(Ct=this.tree.prev(Ct))?Ft=null:void 0===Ct.key.consumedBy&&(Ft=Ct.key);for(;void 0===Mt;)null===(Rt=this.tree.next(Rt))?Mt=null:void 0===Rt.key.consumedBy&&(Mt=Rt.key);if(A.isLeft){var ae=null;if(Ft){var ge=Ft.getIntersection(L);if(null!==ge&&(L.isAnEndpoint(ge)||(ae=ge),!Ft.isAnEndpoint(ge)))for(var Gt=this._splitSafely(Ft,ge),de=0,yn=Gt.length;de<yn;de++)W.push(Gt[de])}var we=null;if(Mt){var tn=Mt.getIntersection(L);if(null!==tn&&(L.isAnEndpoint(tn)||(we=tn),!Mt.isAnEndpoint(tn)))for(var hn=this._splitSafely(Mt,tn),Cn=0,Wn=hn.length;Cn<Wn;Cn++)W.push(hn[Cn])}if(null!==ae||null!==we){var Rn;Rn=null===ae?we:null===we||J.comparePoints(ae,we)<=0?ae:we,this.queue.remove(L.rightSE),W.push(L.rightSE);for(var pn=L.split(Rn),Tr=0,Xn=pn.length;Tr<Xn;Tr++)W.push(pn[Tr])}W.length>0?(this.tree.remove(L),W.push(A)):(this.segments.push(L),L.prev=Ft)}else{if(Ft&&Mt){var kt=Ft.getIntersection(Mt);if(null!==kt){if(!Ft.isAnEndpoint(kt))for(var Oo=this._splitSafely(Ft,kt),Wr=0,pe=Oo.length;Wr<pe;Wr++)W.push(Oo[Wr]);if(!Mt.isAnEndpoint(kt))for(var kr=this._splitSafely(Mt,kt),di=0,_e=kr.length;di<_e;di++)W.push(kr[di])}}this.tree.remove(L)}return W}},{key:"_splitSafely",value:function(A,L){this.tree.remove(A);var W=A.rightSE;this.queue.remove(W);var ut=A.split(L);return ut.push(W),void 0===A.consumedBy&&this.tree.insert(A),ut}}]),dt}(),ue="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Jt="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Zt=new(function(){function dt(){yt(this,dt)}return F(dt,[{key:"run",value:function(A,L,W){Zt.type=A,O.reset();for(var ut=[new Lt(L,!0)],Ct=0,Rt=W.length;Ct<Rt;Ct++)ut.push(new Lt(W[Ct],!1));if(Zt.numMultiPolys=ut.length,"difference"===Zt.type)for(var Ft=ut[0],Mt=1;Mt<ut.length;)null!==b(ut[Mt].bbox,Ft.bbox)?Mt++:ut.splice(Mt,1);if("intersection"===Zt.type)for(var ae=0,ge=ut.length;ae<ge;ae++)for(var Gt=ut[ae],de=ae+1,yn=ut.length;de<yn;de++)if(null===b(Gt.bbox,ut[de].bbox))return[];for(var we=new It(J.compare),tn=0,hn=ut.length;tn<hn;tn++)for(var Cn=ut[tn].getSweepEvents(),Wn=0,Rn=Cn.length;Wn<Rn;Wn++)if(we.insert(Cn[Wn]),we.size>ue)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var fr=new fe(we),pn=we.size,Tr=we.pop();Tr;){var Xn=Tr.key;if(we.size===pn){var kt=Xn.segment;throw new Error("Unable to pop() ".concat(Xn.isLeft?"left":"right"," SweepEvent ")+"[".concat(Xn.point.x,", ").concat(Xn.point.y,"] from segment #").concat(kt.id," ")+"[".concat(kt.leftSE.point.x,", ").concat(kt.leftSE.point.y,"] -> ")+"[".concat(kt.rightSE.point.x,", ").concat(kt.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(we.size>ue)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(fr.segments.length>Jt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Oo=fr.process(Xn),Wr=0,pe=Oo.length;Wr<pe;Wr++){var kr=Oo[Wr];void 0===kr.consumedBy&&we.insert(kr)}pn=we.size,Tr=we.pop()}O.reset();var di=Xt.factory(fr.segments);return new ie(di).getGeom()}}]),dt}());return{union:function(D){for(var A=arguments.length,L=new Array(A>1?A-1:0),W=1;W<A;W++)L[W-1]=arguments[W];return Zt.run("union",D,L)},intersection:function(D){for(var A=arguments.length,L=new Array(A>1?A-1:0),W=1;W<A;W++)L[W-1]=arguments[W];return Zt.run("intersection",D,L)},xor:function(D){for(var A=arguments.length,L=new Array(A>1?A-1:0),W=1;W<A;W++)L[W-1]=arguments[W];return Zt.run("xor",D,L)},difference:function(D){for(var A=arguments.length,L=new Array(A>1?A-1:0),W=1;W<A;W++)L[W-1]=arguments[W];return Zt.run("difference",D,L)}}}()},3036:function(Dt){Dt.exports=function(){"use strict";function yt(et,pt,b,S,M){!function U(P,N,O,w,st){for(;w>O;){if(w-O>600){var z=w-O+1,K=N-O+1,R=Math.log(z),Ot=.5*Math.exp(2*R/3),Nt=.5*Math.sqrt(R*Ot*(z-Ot)/z)*(K-z/2<0?-1:1);U(P,N,Math.max(O,Math.floor(N-K*Ot/z+Nt)),Math.min(w,Math.floor(N+(z-K)*Ot/z+Nt)),st)}var J=P[N],at=O,ct=w;for(Q(P,O,N),st(P[w],J)>0&&Q(P,O,w);at<ct;){for(Q(P,at,ct),at++,ct--;st(P[at],J)<0;)at++;for(;st(P[ct],J)>0;)ct--}0===st(P[O],J)?Q(P,O,ct):Q(P,++ct,w),ct<=N&&(O=ct+1),N<=ct&&(w=ct-1)}}(et,pt,b||0,S||et.length-1,M||F)}function Q(et,pt,b){var S=et[pt];et[pt]=et[b],et[b]=S}function F(et,pt){return et<pt?-1:et>pt?1:0}var V=function(et){void 0===et&&(et=9),this._maxEntries=Math.max(4,et),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function I(et,pt,b){if(!b)return pt.indexOf(et);for(var S=0;S<pt.length;S++)if(b(et,pt[S]))return S;return-1}function c(et,pt){nt(et,0,et.children.length,pt,et)}function nt(et,pt,b,S,M){M||(M=wt(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var U=pt;U<b;U++){var P=et.children[U];H(M,et.leaf?S(P):P)}return M}function H(et,pt){return et.minX=Math.min(et.minX,pt.minX),et.minY=Math.min(et.minY,pt.minY),et.maxX=Math.max(et.maxX,pt.maxX),et.maxY=Math.max(et.maxY,pt.maxY),et}function ot(et,pt){return et.minX-pt.minX}function ft(et,pt){return et.minY-pt.minY}function It(et){return(et.maxX-et.minX)*(et.maxY-et.minY)}function Tt(et){return et.maxX-et.minX+(et.maxY-et.minY)}function xt(et,pt){return et.minX<=pt.minX&&et.minY<=pt.minY&&pt.maxX<=et.maxX&&pt.maxY<=et.maxY}function mt(et,pt){return pt.minX<=et.maxX&&pt.minY<=et.maxY&&pt.maxX>=et.minX&&pt.maxY>=et.minY}function wt(et){return{children:et,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function qt(et,pt,b,S,M){for(var U=[pt,b];U.length;)if(!((b=U.pop())-(pt=U.pop())<=S)){var P=pt+Math.ceil((b-pt)/S/2)*S;yt(et,P,pt,b,M),U.push(pt,P,P,b)}}return V.prototype.all=function(){return this._all(this.data,[])},V.prototype.search=function(et){var pt=this.data,b=[];if(!mt(et,pt))return b;for(var S=this.toBBox,M=[];pt;){for(var U=0;U<pt.children.length;U++){var P=pt.children[U],N=pt.leaf?S(P):P;mt(et,N)&&(pt.leaf?b.push(P):xt(et,N)?this._all(P,b):M.push(P))}pt=M.pop()}return b},V.prototype.collides=function(et){var pt=this.data;if(!mt(et,pt))return!1;for(var b=[];pt;){for(var S=0;S<pt.children.length;S++){var M=pt.children[S],U=pt.leaf?this.toBBox(M):M;if(mt(et,U)){if(pt.leaf||xt(et,U))return!0;b.push(M)}}pt=b.pop()}return!1},V.prototype.load=function(et){if(!et||!et.length)return this;if(et.length<this._minEntries){for(var pt=0;pt<et.length;pt++)this.insert(et[pt]);return this}var b=this._build(et.slice(),0,et.length-1,0);if(this.data.children.length)if(this.data.height===b.height)this._splitRoot(this.data,b);else{if(this.data.height<b.height){var S=this.data;this.data=b,b=S}this._insert(b,this.data.height-b.height-1,!0)}else this.data=b;return this},V.prototype.insert=function(et){return et&&this._insert(et,this.data.height-1),this},V.prototype.clear=function(){return this.data=wt([]),this},V.prototype.remove=function(et,pt){if(!et)return this;for(var b,S,M,U=this.data,P=this.toBBox(et),N=[],O=[];U||N.length;){if(U||(U=N.pop(),S=N[N.length-1],b=O.pop(),M=!0),U.leaf){var w=I(et,U.children,pt);if(-1!==w)return U.children.splice(w,1),N.push(U),this._condense(N),this}M||U.leaf||!xt(U,P)?S?(b++,U=S.children[b],M=!1):U=null:(N.push(U),O.push(b),b=0,S=U,U=U.children[0])}return this},V.prototype.toBBox=function(et){return et},V.prototype.compareMinX=function(et,pt){return et.minX-pt.minX},V.prototype.compareMinY=function(et,pt){return et.minY-pt.minY},V.prototype.toJSON=function(){return this.data},V.prototype.fromJSON=function(et){return this.data=et,this},V.prototype._all=function(et,pt){for(var b=[];et;)et.leaf?pt.push.apply(pt,et.children):b.push.apply(b,et.children),et=b.pop();return pt},V.prototype._build=function(et,pt,b,S){var M,U=b-pt+1,P=this._maxEntries;if(U<=P)return c(M=wt(et.slice(pt,b+1)),this.toBBox),M;S||(S=Math.ceil(Math.log(U)/Math.log(P)),P=Math.ceil(U/Math.pow(P,S-1))),(M=wt([])).leaf=!1,M.height=S;var N=Math.ceil(U/P),O=N*Math.ceil(Math.sqrt(P));qt(et,pt,b,O,this.compareMinX);for(var w=pt;w<=b;w+=O){var st=Math.min(w+O-1,b);qt(et,w,st,N,this.compareMinY);for(var z=w;z<=st;z+=N){var K=Math.min(z+N-1,st);M.children.push(this._build(et,z,K,S-1))}}return c(M,this.toBBox),M},V.prototype._chooseSubtree=function(et,pt,b,S){for(;S.push(pt),!pt.leaf&&S.length-1!==b;){for(var M=1/0,U=1/0,P=void 0,N=0;N<pt.children.length;N++){var O=pt.children[N],w=It(O),st=(z=et,K=O,(Math.max(K.maxX,z.maxX)-Math.min(K.minX,z.minX))*(Math.max(K.maxY,z.maxY)-Math.min(K.minY,z.minY))-w);st<U?(U=st,M=w<M?w:M,P=O):st===U&&w<M&&(M=w,P=O)}pt=P||pt.children[0]}var z,K;return pt},V.prototype._insert=function(et,pt,b){var S=b?et:this.toBBox(et),M=[],U=this._chooseSubtree(S,this.data,pt,M);for(U.children.push(et),H(U,S);pt>=0&&M[pt].children.length>this._maxEntries;)this._split(M,pt),pt--;this._adjustParentBBoxes(S,M,pt)},V.prototype._split=function(et,pt){var b=et[pt],S=b.children.length,M=this._minEntries;this._chooseSplitAxis(b,M,S);var U=this._chooseSplitIndex(b,M,S),P=wt(b.children.splice(U,b.children.length-U));P.height=b.height,P.leaf=b.leaf,c(b,this.toBBox),c(P,this.toBBox),pt?et[pt-1].children.push(P):this._splitRoot(b,P)},V.prototype._splitRoot=function(et,pt){this.data=wt([et,pt]),this.data.height=et.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},V.prototype._chooseSplitIndex=function(et,pt,b){for(var S,M,U,P,N,O,w,st=1/0,z=1/0,K=pt;K<=b-pt;K++){var R=nt(et,0,K,this.toBBox),Ot=nt(et,K,b,this.toBBox),Nt=(M=R,U=Ot,void 0,void 0,void 0,void 0,P=Math.max(M.minX,U.minX),N=Math.max(M.minY,U.minY),O=Math.min(M.maxX,U.maxX),w=Math.min(M.maxY,U.maxY),Math.max(0,O-P)*Math.max(0,w-N)),G=It(R)+It(Ot);Nt<st?(st=Nt,S=K,z=G<z?G:z):Nt===st&&G<z&&(z=G,S=K)}return S||b-pt},V.prototype._chooseSplitAxis=function(et,pt,b){var S=et.leaf?this.compareMinX:ot,M=et.leaf?this.compareMinY:ft;this._allDistMargin(et,pt,b,S)<this._allDistMargin(et,pt,b,M)&&et.children.sort(S)},V.prototype._allDistMargin=function(et,pt,b,S){et.children.sort(S);for(var M=this.toBBox,U=nt(et,0,pt,M),P=nt(et,b-pt,b,M),N=Tt(U)+Tt(P),O=pt;O<b-pt;O++){var w=et.children[O];H(U,et.leaf?M(w):w),N+=Tt(U)}for(var st=b-pt-1;st>=pt;st--){var z=et.children[st];H(P,et.leaf?M(z):z),N+=Tt(P)}return N},V.prototype._adjustParentBBoxes=function(et,pt,b){for(var S=b;S>=0;S--)H(pt[S],et)},V.prototype._condense=function(et){for(var pt=et.length-1,b=void 0;pt>=0;pt--)0===et[pt].children.length?pt>0?(b=et[pt-1].children).splice(b.indexOf(et[pt]),1):this.clear():c(et[pt],this.toBBox)},V}()},565:Dt=>{"use strict";var yt=Object,Q=TypeError;Dt.exports=function(){if(null!=this&&this!==yt(this))throw new Q("RegExp.prototype.flags getter called on non-object");var V="";return this.hasIndices&&(V+="d"),this.global&&(V+="g"),this.ignoreCase&&(V+="i"),this.multiline&&(V+="m"),this.dotAll&&(V+="s"),this.unicode&&(V+="u"),this.sticky&&(V+="y"),V}},437:(Dt,yt,Q)=>{"use strict";var F=Q(6886),V=Q(44),I=Q(565),c=Q(3880),nt=Q(9129),H=V(c());F(H,{getPolyfill:c,implementation:I,shim:nt}),Dt.exports=H},3880:(Dt,yt,Q)=>{"use strict";var F=Q(565),V=Q(6886).supportsDescriptors,I=Object.getOwnPropertyDescriptor;Dt.exports=function(){if(V&&"gim"===/a/gim.flags){var nt=I(RegExp.prototype,"flags");if(nt&&"function"==typeof nt.get&&"boolean"==typeof/a/.dotAll)return nt.get}return F}},9129:(Dt,yt,Q)=>{"use strict";var F=Q(6886).supportsDescriptors,V=Q(3880),I=Object.getOwnPropertyDescriptor,c=Object.defineProperty,nt=TypeError,H=Object.getPrototypeOf,ot=/a/;Dt.exports=function(){if(!F||!H)throw new nt("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var It=V(),Tt=H(ot),xt=I(Tt,"flags");return(!xt||xt.get!==It)&&c(Tt,"flags",{configurable:!0,enumerable:!1,get:It}),It}},5322:function(Dt,yt){!function(Q){"use strict";const F=134217729;function I(wt,qt,et,pt,b){let S,M,U,P,N=qt[0],O=pt[0],w=0,st=0;O>N==O>-N?(S=N,N=qt[++w]):(S=O,O=pt[++st]);let z=0;if(w<wt&&st<et)for(O>N==O>-N?(U=S-((M=N+S)-N),N=qt[++w]):(U=S-((M=O+S)-O),O=pt[++st]),S=M,0!==U&&(b[z++]=U);w<wt&&st<et;)O>N==O>-N?(U=S-((M=S+N)-(P=M-S))+(N-P),N=qt[++w]):(U=S-((M=S+O)-(P=M-S))+(O-P),O=pt[++st]),S=M,0!==U&&(b[z++]=U);for(;w<wt;)U=S-((M=S+N)-(P=M-S))+(N-P),N=qt[++w],S=M,0!==U&&(b[z++]=U);for(;st<et;)U=S-((M=S+O)-(P=M-S))+(O-P),O=pt[++st],S=M,0!==U&&(b[z++]=U);return 0===S&&0!==z||(b[z++]=S),z}function c(wt){return new Float64Array(wt)}const ft=c(4),It=c(8),Tt=c(12),xt=c(16),mt=c(4);Q.orient2d=function(wt,qt,et,pt,b,S){const M=(qt-S)*(et-b),U=(wt-b)*(pt-S),P=M-U;if(0===M||0===U||M>0!=U>0)return P;const N=Math.abs(M+U);return Math.abs(P)>=33306690738754716e-32*N?P:-function(O,w,st,z,K,R,Ot){let Nt,G,lt,J,at,ct,Z,bt,Lt,Xt,At,ie,fe,ue,Jt,Wt,Zt,Ln;const on=O-K,vn=st-K,ln=w-R,On=z-R;at=(Jt=(bt=on-(Z=(ct=F*on)-(ct-on)))*(Xt=On-(Lt=(ct=F*On)-(ct-On)))-((ue=on*On)-Z*Lt-bt*Lt-Z*Xt))-(At=Jt-(Zt=(bt=ln-(Z=(ct=F*ln)-(ct-ln)))*(Xt=vn-(Lt=(ct=F*vn)-(ct-vn)))-((Wt=ln*vn)-Z*Lt-bt*Lt-Z*Xt))),ft[0]=Jt-(At+at)+(at-Zt),at=(fe=ue-((ie=ue+At)-(at=ie-ue))+(At-at))-(At=fe-Wt),ft[1]=fe-(At+at)+(at-Wt),at=(Ln=ie+At)-ie,ft[2]=ie-(Ln-at)+(At-at),ft[3]=Ln;let dt=function(ut,Ct){let Rt=Ct[0];for(let Ft=1;Ft<4;Ft++)Rt+=Ct[Ft];return Rt}(0,ft),D=22204460492503146e-32*Ot;if(dt>=D||-dt>=D||(Nt=O-(on+(at=O-on))+(at-K),lt=st-(vn+(at=st-vn))+(at-K),G=w-(ln+(at=w-ln))+(at-R),J=z-(On+(at=z-On))+(at-R),0===Nt&&0===G&&0===lt&&0===J)||(D=11093356479670487e-47*Ot+33306690738754706e-32*Math.abs(dt),(dt+=on*J+On*Nt-(ln*lt+vn*G))>=D||-dt>=D))return dt;at=(Jt=(bt=Nt-(Z=(ct=F*Nt)-(ct-Nt)))*(Xt=On-(Lt=(ct=F*On)-(ct-On)))-((ue=Nt*On)-Z*Lt-bt*Lt-Z*Xt))-(At=Jt-(Zt=(bt=G-(Z=(ct=F*G)-(ct-G)))*(Xt=vn-(Lt=(ct=F*vn)-(ct-vn)))-((Wt=G*vn)-Z*Lt-bt*Lt-Z*Xt))),mt[0]=Jt-(At+at)+(at-Zt),at=(fe=ue-((ie=ue+At)-(at=ie-ue))+(At-at))-(At=fe-Wt),mt[1]=fe-(At+at)+(at-Wt),at=(Ln=ie+At)-ie,mt[2]=ie-(Ln-at)+(At-at),mt[3]=Ln;const A=I(4,ft,4,mt,It);at=(Jt=(bt=on-(Z=(ct=F*on)-(ct-on)))*(Xt=J-(Lt=(ct=F*J)-(ct-J)))-((ue=on*J)-Z*Lt-bt*Lt-Z*Xt))-(At=Jt-(Zt=(bt=ln-(Z=(ct=F*ln)-(ct-ln)))*(Xt=lt-(Lt=(ct=F*lt)-(ct-lt)))-((Wt=ln*lt)-Z*Lt-bt*Lt-Z*Xt))),mt[0]=Jt-(At+at)+(at-Zt),at=(fe=ue-((ie=ue+At)-(at=ie-ue))+(At-at))-(At=fe-Wt),mt[1]=fe-(At+at)+(at-Wt),at=(Ln=ie+At)-ie,mt[2]=ie-(Ln-at)+(At-at),mt[3]=Ln;const L=I(A,It,4,mt,Tt);at=(Jt=(bt=Nt-(Z=(ct=F*Nt)-(ct-Nt)))*(Xt=J-(Lt=(ct=F*J)-(ct-J)))-((ue=Nt*J)-Z*Lt-bt*Lt-Z*Xt))-(At=Jt-(Zt=(bt=G-(Z=(ct=F*G)-(ct-G)))*(Xt=lt-(Lt=(ct=F*lt)-(ct-lt)))-((Wt=G*lt)-Z*Lt-bt*Lt-Z*Xt))),mt[0]=Jt-(At+at)+(at-Zt),at=(fe=ue-((ie=ue+At)-(at=ie-ue))+(At-at))-(At=fe-Wt),mt[1]=fe-(At+at)+(at-Wt),at=(Ln=ie+At)-ie,mt[2]=ie-(Ln-at)+(At-at),mt[3]=Ln;const W=I(L,Tt,4,mt,xt);return xt[W-1]}(wt,qt,et,pt,b,S,N)},Q.orient2dfast=function(wt,qt,et,pt,b,S){return(qt-S)*(et-b)-(wt-b)*(pt-S)},Object.defineProperty(Q,"__esModule",{value:!0})}(yt)},6257:Dt=>{"use strict";Dt.exports={eudist:function(Q,F,V){for(var I=Q.length,c=0,nt=0;nt<I;nt++){var H=(Q[nt]||0)-(F[nt]||0);c+=H*H}return V?Math.sqrt(c):c},mandist:function(Q,F,V){for(var I=Q.length,c=0,nt=0;nt<I;nt++)c+=Math.abs((Q[nt]||0)-(F[nt]||0));return V?Math.sqrt(c):c},dist:function(Q,F,V){var I=Math.abs(Q-F);return V?I:I*I}}},6019:(Dt,yt,Q)=>{"use strict";var F=Q(6257),V=F.eudist,I=F.dist;Dt.exports={kmrand:function(nt,H){for(var ot={},ft=[],It=H<<2,Tt=nt.length,xt=nt[0].length>0;ft.length<H&&It-- >0;){var mt=nt[Math.floor(Math.random()*Tt)],wt=xt?mt.join("_"):""+mt;ot[wt]||(ot[wt]=!0,ft.push(mt))}if(ft.length<H)throw new Error("Error initializating clusters");return ft},kmpp:function(nt,H){var ot=nt[0].length?V:I,ft=[],It=nt.length,Tt=nt[0].length>0,mt=nt[Math.floor(Math.random()*It)];for(Tt&&mt.join("_"),ft.push(mt);ft.length<H;){for(var qt=[],et=ft.length,pt=0,b=[],S=0;S<It;S++){for(var M=1/0,U=0;U<et;U++){var P=ot(nt[S],ft[U]);P<=M&&(M=P)}qt[S]=M}for(var N=0;N<It;N++)pt+=qt[N];for(var O=0;O<It;O++)b[O]={i:O,v:nt[O],pr:qt[O]/pt,cs:0};b.sort(function(K,R){return K.pr-R.pr}),b[0].cs=b[0].pr;for(var w=1;w<It;w++)b[w].cs=b[w-1].cs+b[w].pr;for(var st=Math.random(),z=0;z<It-1&&b[z++].cs<st;);ft.push(b[z-1].v)}return ft}}},3212:(Dt,yt,Q)=>{"use strict";var F=Q(6257),V=Q(6019),I=F.eudist,H=V.kmrand,ot=V.kmpp;function It(xt,mt,wt){wt=wt||[];for(var qt=0;qt<xt;qt++)wt[qt]=mt;return wt}Dt.exports=function(xt,mt,wt,qt){var et=[],pt=[],b=[],S=[],M=!1,U=qt||1e4,P=xt.length,N=xt[0].length,O=N>0,w=[];if(wt)et="kmrand"==wt?H(xt,mt):"kmpp"==wt?ot(xt,mt):wt;else for(var st={};et.length<mt;){var z=Math.floor(Math.random()*P);st[z]||(st[z]=!0,et.push(xt[z]))}do{It(mt,0,w);for(var K=0;K<P;K++){for(var R=1/0,Ot=0,Nt=0;Nt<mt;Nt++)(S=O?I(xt[K],et[Nt]):Math.abs(xt[K]-et[Nt]))<=R&&(R=S,Ot=Nt);b[K]=Ot,w[Ot]++}for(var G=[],J=(pt=[],0);J<mt;J++)G[J]=O?It(N,0,G[J]):0,pt[J]=et[J];if(O){for(var at=0;at<mt;at++)et[at]=[];for(var ct=0;ct<P;ct++)for(var bt=G[b[ct]],Lt=xt[ct],Xt=0;Xt<N;Xt++)bt[Xt]+=Lt[Xt];M=!0;for(var At=0;At<mt;At++){for(var ie=et[At],fe=G[At],ue=pt[At],Jt=w[At],Wt=0;Wt<N;Wt++)ie[Wt]=fe[Wt]/Jt||0;if(M)for(var Zt=0;Zt<N;Zt++)if(ue[Zt]!=ie[Zt]){M=!1;break}}}else{for(var Ln=0;Ln<P;Ln++)G[b[Ln]]+=xt[Ln];for(var vn=0;vn<mt;vn++)et[vn]=G[vn]/w[vn]||0;M=!0;for(var ln=0;ln<mt;ln++)if(pt[ln]!=et[ln]){M=!1;break}}M=M||--U<=0}while(!M);return{it:1e4-U,k:mt,idxs:b,centroids:et}}},54:(Dt,yt,Q)=>{"use strict";Q.r(yt),Q.d(yt,{default:()=>F});class F{constructor(c=[],nt=V){if(this.data=c,this.length=this.data.length,this.compare=nt,this.length>0)for(let H=(this.length>>1)-1;H>=0;H--)this._down(H)}push(c){this.data.push(c),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const c=this.data[0],nt=this.data.pop();return this.length--,this.length>0&&(this.data[0]=nt,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:nt,compare:H}=this,ot=nt[c];for(;c>0;){const ft=c-1>>1,It=nt[ft];if(H(ot,It)>=0)break;nt[c]=It,c=ft}nt[c]=ot}_down(c){const{data:nt,compare:H}=this,ot=this.length>>1,ft=nt[c];for(;c<ot;){let It=1+(c<<1),Tt=nt[It];const xt=It+1;if(xt<this.length&&H(nt[xt],Tt)<0&&(It=xt,Tt=nt[xt]),H(Tt,ft)>=0)break;nt[c]=Tt,c=It}nt[c]=ft}}function V(I,c){return I<c?-1:I>c?1:0}},7299:function(Dt,yt){!function(Q){"use strict";function F(){}function V(t){this.message=t||""}function I(t){this.message=t||""}function c(t){this.message=t||""}function nt(){}function H(t){return null===t?Vr:t.color}function ot(t){return null===t?null:t.parent}function ft(t,e){null!==t&&(t.color=e)}function It(t){return null===t?null:t.left}function Tt(t){return null===t?null:t.right}function xt(){this.root_=null,this.size_=0}function mt(){}function wt(){this.array_=[],arguments[0]instanceof pn&&this.addAll(arguments[0])}function qt(){}function et(t){this.message=t||""}function pt(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),o=Math.max(Math.min(e.length,9007199254740991),0)||0,a=1 in arguments&&parseInt(Number(arguments[1]),10)||0;a=a<0?Math.max(o+a,0):Math.min(a,o);var f=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:o;for(f=f<0?Math.max(o+arguments[2],0):Math.min(f,o);a<f;)e[a]=t,++a;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var b=function(){};b.prototype.interfaces_=function(){return[]},b.prototype.getClass=function(){return b},b.prototype.equalsWithTolerance=function(t,e,o){return Math.abs(t-e)<=o};var S=function(t){function e(o){t.call(this,o),this.name="IllegalArgumentException",this.message=o,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),M=function(){},U={MAX_VALUE:{configurable:!0}};M.isNaN=function(t){return Number.isNaN(t)},M.doubleToLongBits=function(t){return t},M.longBitsToDouble=function(t){return t},M.isInfinite=function(t){return!Number.isFinite(t)},U.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(M,U);var P=function(){},N=function(){},O=function(){},w=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},st={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};w.prototype.setOrdinate=function(t,e){switch(t){case w.X:this.x=e;break;case w.Y:this.y=e;break;case w.Z:this.z=e;break;default:throw new S("Invalid ordinate index: "+t)}},w.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],o=arguments[1];return!!b.equalsWithTolerance(this.x,e.x,o)&&!!b.equalsWithTolerance(this.y,e.y,o)}},w.prototype.getOrdinate=function(t){switch(t){case w.X:return this.x;case w.Y:return this.y;case w.Z:return this.z}throw new S("Invalid ordinate index: "+t)},w.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||M.isNaN(this.z))&&M.isNaN(t.z)},w.prototype.equals=function(t){return t instanceof w&&this.equals2D(t)},w.prototype.equalInZ=function(t,e){return b.equalsWithTolerance(this.z,t.z,e)},w.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},w.prototype.clone=function(){},w.prototype.copy=function(){return new w(this)},w.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},w.prototype.distance3D=function(t){var e=this.x-t.x,o=this.y-t.y,a=this.z-t.z;return Math.sqrt(e*e+o*o+a*a)},w.prototype.distance=function(t){var e=this.x-t.x,o=this.y-t.y;return Math.sqrt(e*e+o*o)},w.prototype.hashCode=function(){var t=17;return 37*(t=37*t+w.hashCode(this.x))+w.hashCode(this.y)},w.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},w.prototype.interfaces_=function(){return[P,N,F]},w.prototype.getClass=function(){return w},w.hashCode=function(){if(1===arguments.length){var e=M.doubleToLongBits(arguments[0]);return Math.trunc((e^e)>>>32)}},st.DimensionalComparator.get=function(){return z},st.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},st.NULL_ORDINATE.get=function(){return M.NaN},st.X.get=function(){return 0},st.Y.get=function(){return 1},st.Z.get=function(){return 2},Object.defineProperties(w,st);var z=function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new S("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};z.prototype.compare=function(t,e){var o=t,a=e,f=z.compare(o.x,a.x);if(0!==f)return f;var y=z.compare(o.y,a.y);return 0!==y?y:this._dimensionsToTest<=2?0:z.compare(o.z,a.z)},z.prototype.interfaces_=function(){return[O]},z.prototype.getClass=function(){return z},z.compare=function(t,e){return t<e?-1:t>e?1:M.isNaN(t)?M.isNaN(e)?0:-1:M.isNaN(e)?1:0};var K=function(){};K.prototype.create=function(){},K.prototype.interfaces_=function(){return[]},K.prototype.getClass=function(){return K};var R=function(){},Ot={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};R.prototype.interfaces_=function(){return[]},R.prototype.getClass=function(){return R},R.toLocationSymbol=function(t){switch(t){case R.EXTERIOR:return"e";case R.BOUNDARY:return"b";case R.INTERIOR:return"i";case R.NONE:return"-"}throw new S("Unknown location value: "+t)},Ot.INTERIOR.get=function(){return 0},Ot.BOUNDARY.get=function(){return 1},Ot.EXTERIOR.get=function(){return 2},Ot.NONE.get=function(){return-1},Object.defineProperties(R,Ot);var Nt=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},G=function(){},lt={LOG_10:{configurable:!0}};G.prototype.interfaces_=function(){return[]},G.prototype.getClass=function(){return G},G.log10=function(t){var e=Math.log(t);return M.isInfinite(e)||M.isNaN(e)?e:e/G.LOG_10},G.min=function(t,e,o,a){var f=t;return e<f&&(f=e),o<f&&(f=o),a<f&&(f=a),f},G.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],o=arguments[2];return t<e?e:t>o?o:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],f=arguments[1],y=arguments[2];return a<f?f:a>y?y:a}},G.wrap=function(t,e){return t<0?e- -t%e:t%e},G.max=function(){if(3===arguments.length){var e=arguments[1],o=arguments[2],a=arguments[0];return e>a&&(a=e),o>a&&(a=o),a}if(4===arguments.length){var y=arguments[1],x=arguments[2],C=arguments[3],B=arguments[0];return y>B&&(B=y),x>B&&(B=x),C>B&&(B=C),B}},G.average=function(t,e){return(t+e)/2},lt.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(G,lt);var J=function(t){this.str=t};J.prototype.append=function(t){this.str+=t},J.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},J.prototype.toString=function(t){return this.str};var at=function(t){this.value=t};at.prototype.intValue=function(){return this.value},at.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},at.isNaN=function(t){return Number.isNaN(t)};var ct=function(){};ct.isWhitespace=function(t){return t<=32&&t>=0||127===t},ct.toUpperCase=function(t){return t.toUpperCase()};var Z=function t(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof t?this.init(arguments[0]):"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},bt={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Z.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Z.prototype.extractSignificantDigits=function(t,e){var o=this.abs(),a=Z.magnitude(o._hi),f=Z.TEN.pow(a);(o=o.divide(f)).gt(Z.TEN)?(o=o.divide(Z.TEN),a+=1):o.lt(Z.ONE)&&(o=o.multiply(Z.TEN),a-=1);for(var y=a+1,x=new J,C=Z.MAX_PRINT_DIGITS-1,B=0;B<=C;B++){t&&B===y&&x.append(".");var rt=Math.trunc(o._hi);if(rt<0)break;var Et=!1,Pt=0;rt>9?(Et=!0,Pt="9"):Pt="0"+rt,x.append(Pt),o=o.subtract(Z.valueOf(rt)).multiply(Z.TEN),Et&&o.selfAdd(Z.TEN);var Ut=!0,Yt=Z.magnitude(o._hi);if(Yt<0&&Math.abs(Yt)>=C-B&&(Ut=!1),!Ut)break}return e[0]=a,x.toString()},Z.prototype.sqr=function(){return this.multiply(this)},Z.prototype.doubleValue=function(){return this._hi+this._lo},Z.prototype.subtract=function(){return arguments[0]instanceof Z?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},Z.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Z.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Z.prototype.selfSubtract=function(){if(arguments[0]instanceof Z){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Z.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Z.prototype.min=function(t){return this.le(t)?this:t},Z.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var o=arguments[0],f=null,y=null,x=null,C=null,B=null,rt=null,Et=null,Pt=null;return this._hi=Pt=(B=this._hi/o)+(rt=(this._hi-(Et=B*o)-(Pt=(f=(rt=Z.SPLIT*B)-(f=rt-B))*(x=(Pt=Z.SPLIT*o)-(x=Pt-o))-Et+f*(C=o-x)+(y=B-f)*x+y*C)+this._lo-B*arguments[1])/o),this._lo=B-Pt+rt,this}},Z.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Z.prototype.divide=function(){if(arguments[0]instanceof Z){var t=arguments[0],e=null,o=null,a=null,f=null,y=null,x=null,C=null,B=null;return o=(y=this._hi/t._hi)-(e=(x=Z.SPLIT*y)-(e=x-y)),B=e*(a=(B=Z.SPLIT*t._hi)-(a=B-t._hi))-(C=y*t._hi)+e*(f=t._hi-a)+o*a+o*f,new Z(B=y+(x=(this._hi-C-B+this._lo-y*t._lo)/t._hi),y-B+x)}if("number"==typeof arguments[0]){var rt=arguments[0];return M.isNaN(rt)?Z.createNaN():Z.copy(this).selfDivide(rt,0)}},Z.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Z.prototype.pow=function(t){if(0===t)return Z.valueOf(1);var e=new Z(this),o=Z.valueOf(1),a=Math.abs(t);if(a>1)for(;a>0;)a%2==1&&o.selfMultiply(e),(a/=2)>0&&(e=e.sqr());else o=e;return t<0?o.reciprocal():o},Z.prototype.ceil=function(){if(this.isNaN())return Z.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Z(t,e)},Z.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},Z.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Z.prototype.setValue=function(){return arguments[0]instanceof Z||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},Z.prototype.max=function(t){return this.ge(t)?this:t},Z.prototype.sqrt=function(){if(this.isZero())return Z.valueOf(0);if(this.isNegative())return Z.NaN;var t=1/Math.sqrt(this._hi),o=Z.valueOf(this._hi*t),a=this.subtract(o.sqr())._hi*(.5*t);return o.add(a)},Z.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],o=null,a=null,f=null,x=null,C=null;return this._hi=(o=(f=this._hi+e)+(C=e-(x=f-this._hi)+(this._hi-(f-x))+this._lo))+(a=C+(f-o)),this._lo=a+(o-this._hi),this}}else if(2===arguments.length){var B=arguments[0],rt=arguments[1],Et=null,Pt=null,Ut=null,Yt=null,$t=null,ne=null,nn=null;$t=(Yt=this._hi+B)-(ne=Yt-this._hi),Ut=(Pt=this._lo+rt)-(nn=Pt-this._lo);var wn=(Et=Yt+(ne=($t=B-ne+(this._hi-$t))+Pt))+(ne=(Ut=rt-nn+(this._lo-Ut))+(ne+(Yt-Et))),lr=ne+(Et-wn);return this._hi=wn,this._lo=lr,this}},Z.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var o=arguments[0],f=null,y=null,x=null,C=null,B=null,rt=null;f=(B=Z.SPLIT*this._hi)-this._hi,f=B-f;var Et=(B=this._hi*o)+(rt=f*(x=(rt=Z.SPLIT*o)-(x=rt-o))-B+f*(C=o-x)+(y=this._hi-f)*x+y*C+(this._hi*arguments[1]+this._lo*o)),Pt=rt+(f=B-Et);return this._hi=Et,this._lo=Pt,this}},Z.prototype.selfSqr=function(){return this.selfMultiply(this)},Z.prototype.floor=function(){if(this.isNaN())return Z.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Z(t,e)},Z.prototype.negate=function(){return this.isNaN()?this:new Z(-this._hi,-this._lo)},Z.prototype.clone=function(){},Z.prototype.multiply=function(){if(arguments[0]instanceof Z){var t=arguments[0];return t.isNaN()?Z.createNaN():Z.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return M.isNaN(e)?Z.createNaN():Z.copy(this).selfMultiply(e,0)}},Z.prototype.isNaN=function(){return M.isNaN(this._hi)},Z.prototype.intValue=function(){return Math.trunc(this._hi)},Z.prototype.toString=function(){var t=Z.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Z.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),o=this.extractSignificantDigits(!0,e),a=e[0]+1,f=o;return"."===o.charAt(0)?f="0"+o:a<0?f="0."+Z.stringOfChar("0",-a)+o:-1===o.indexOf(".")&&(f=o+Z.stringOfChar("0",a-o.length)+".0"),this.isNegative()?"-"+f:f},Z.prototype.reciprocal=function(){var e,a,f,x,t=null,o=null,y=null,C=null;e=(f=1/this._hi)-(t=(y=Z.SPLIT*f)-(t=y-f)),o=(C=Z.SPLIT*this._hi)-this._hi;var B=f+(y=(1-(x=f*this._hi)-(C=t*(o=C-o)-x+t*(a=this._hi-o)+e*o+e*a)-f*this._lo)/this._hi);return new Z(B,f-B+y)},Z.prototype.toSciNotation=function(){if(this.isZero())return Z.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),o=this.extractSignificantDigits(!1,e),a=Z.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===o.charAt(0))throw new Error("Found leading zero: "+o);var f="";o.length>1&&(f=o.substring(1));var y=o.charAt(0)+"."+f;return this.isNegative()?"-"+y+a:y+a},Z.prototype.abs=function(){return this.isNaN()?Z.NaN:this.isNegative()?this.negate():new Z(this)},Z.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Z.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Z.prototype.add=function(){if(arguments[0]instanceof Z){var t=arguments[0];return Z.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Z.copy(this).selfAdd(e)}},Z.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof Z){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var a=arguments[1];this._hi=arguments[0],this._lo=a}},Z.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Z.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Z.prototype.trunc=function(){return this.isNaN()?Z.NaN:this.isPositive()?this.floor():this.ceil()},Z.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Z.prototype.interfaces_=function(){return[F,P,N]},Z.prototype.getClass=function(){return Z},Z.sqr=function(t){return Z.valueOf(t).selfMultiply(t)},Z.valueOf=function(){return"string"==typeof arguments[0]?Z.parse(arguments[0]):"number"==typeof arguments[0]?new Z(arguments[0]):void 0},Z.sqrt=function(t){return Z.valueOf(t).sqrt()},Z.parse=function(t){for(var e=0,o=t.length;ct.isWhitespace(t.charAt(e));)e++;var a=!1;if(e<o){var f=t.charAt(e);"-"!==f&&"+"!==f||(e++,"-"===f&&(a=!0))}for(var y=new Z,x=0,C=0,B=0;!(e>=o);){var rt=t.charAt(e);if(e++,ct.isDigit(rt)){var Et=rt-"0";y.selfMultiply(Z.TEN),y.selfAdd(Et),x++}else{if("."!==rt){if("e"===rt||"E"===rt){var Pt=t.substring(e);try{B=at.parseInt(Pt)}catch(nn){throw nn instanceof Error?new Error("Invalid exponent "+Pt+" in string "+t):nn}break}throw new Error("Unexpected character '"+rt+"' at position "+e+" in string "+t)}C=x}}var Ut=y,Yt=x-C-B;if(0===Yt)Ut=y;else if(Yt>0){var $t=Z.TEN.pow(Yt);Ut=y.divide($t)}else if(Yt<0){var ne=Z.TEN.pow(-Yt);Ut=y.multiply(ne)}return a?Ut.negate():Ut},Z.createNaN=function(){return new Z(M.NaN,M.NaN)},Z.copy=function(t){return new Z(t)},Z.magnitude=function(t){var e=Math.abs(t),o=Math.log(e)/Math.log(10),a=Math.trunc(Math.floor(o));return 10*Math.pow(10,a)<=e&&(a+=1),a},Z.stringOfChar=function(t,e){for(var o=new J,a=0;a<e;a++)o.append(t);return o.toString()},bt.PI.get=function(){return new Z(3.141592653589793,12246467991473532e-32)},bt.TWO_PI.get=function(){return new Z(6.283185307179586,24492935982947064e-32)},bt.PI_2.get=function(){return new Z(1.5707963267948966,6123233995736766e-32)},bt.E.get=function(){return new Z(2.718281828459045,14456468917292502e-32)},bt.NaN.get=function(){return new Z(M.NaN,M.NaN)},bt.EPS.get=function(){return 123259516440783e-46},bt.SPLIT.get=function(){return 134217729},bt.MAX_PRINT_DIGITS.get=function(){return 32},bt.TEN.get=function(){return Z.valueOf(10)},bt.ONE.get=function(){return Z.valueOf(1)},bt.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},bt.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Z,bt);var Lt=function(){},Xt={DP_SAFE_EPSILON:{configurable:!0}};Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt},Lt.orientationIndex=function(t,e,o){var a=Lt.orientationIndexFilter(t,e,o);if(a<=1)return a;var f=Z.valueOf(e.x).selfAdd(-t.x),y=Z.valueOf(e.y).selfAdd(-t.y),x=Z.valueOf(o.x).selfAdd(-e.x),C=Z.valueOf(o.y).selfAdd(-e.y);return f.selfMultiply(C).selfSubtract(y.selfMultiply(x)).signum()},Lt.signOfDet2x2=function(t,e,o,a){return t.multiply(a).selfSubtract(e.multiply(o)).signum()},Lt.intersection=function(t,e,o,a){var f=Z.valueOf(a.y).selfSubtract(o.y).selfMultiply(Z.valueOf(e.x).selfSubtract(t.x)),y=Z.valueOf(a.x).selfSubtract(o.x).selfMultiply(Z.valueOf(e.y).selfSubtract(t.y)),x=f.subtract(y),C=Z.valueOf(a.x).selfSubtract(o.x).selfMultiply(Z.valueOf(t.y).selfSubtract(o.y)),B=Z.valueOf(a.y).selfSubtract(o.y).selfMultiply(Z.valueOf(t.x).selfSubtract(o.x)),rt=C.subtract(B).selfDivide(x).doubleValue(),Et=Z.valueOf(t.x).selfAdd(Z.valueOf(e.x).selfSubtract(t.x).selfMultiply(rt)).doubleValue(),Pt=Z.valueOf(e.x).selfSubtract(t.x).selfMultiply(Z.valueOf(t.y).selfSubtract(o.y)),Ut=Z.valueOf(e.y).selfSubtract(t.y).selfMultiply(Z.valueOf(t.x).selfSubtract(o.x)),Yt=Pt.subtract(Ut).selfDivide(x).doubleValue(),$t=Z.valueOf(o.y).selfAdd(Z.valueOf(a.y).selfSubtract(o.y).selfMultiply(Yt)).doubleValue();return new w(Et,$t)},Lt.orientationIndexFilter=function(t,e,o){var a=null,f=(t.x-o.x)*(e.y-o.y),y=(t.y-o.y)*(e.x-o.x),x=f-y;if(f>0){if(y<=0)return Lt.signum(x);a=f+y}else{if(!(f<0)||y>=0)return Lt.signum(x);a=-f-y}var C=Lt.DP_SAFE_EPSILON*a;return x>=C||-x>=C?Lt.signum(x):2},Lt.signum=function(t){return t>0?1:t<0?-1:0},Xt.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Lt,Xt);var At=function(){},ie={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ie.X.get=function(){return 0},ie.Y.get=function(){return 1},ie.Z.get=function(){return 2},ie.M.get=function(){return 3},At.prototype.setOrdinate=function(t,e,o){},At.prototype.size=function(){},At.prototype.getOrdinate=function(t,e){},At.prototype.getCoordinate=function(){},At.prototype.getCoordinateCopy=function(t){},At.prototype.getDimension=function(){},At.prototype.getX=function(t){},At.prototype.clone=function(){},At.prototype.expandEnvelope=function(t){},At.prototype.copy=function(){},At.prototype.getY=function(t){},At.prototype.toCoordinateArray=function(){},At.prototype.interfaces_=function(){return[N]},At.prototype.getClass=function(){return At},Object.defineProperties(At,ie);var fe=function(){},ue=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fe),Jt=function(){};Jt.arraycopy=function(t,e,o,a,f){for(var y=0,x=e;x<e+f;x++)o[a+y]=t[x],y++},Jt.getProperty=function(t){return{"line.separator":"\n"}[t]};var Wt=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var a=arguments[1];this.x=arguments[0],this.y=a,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var f=arguments[0],y=arguments[1];this.x=f.y*y.w-y.y*f.w,this.y=y.x*f.w-f.x*y.w,this.w=f.x*y.y-y.x*f.y}else if(arguments[0]instanceof w&&arguments[1]instanceof w){var x=arguments[0],C=arguments[1];this.x=x.y-C.y,this.y=C.x-x.x,this.w=x.x*C.y-C.x*x.y}}else if(3===arguments.length){var rt=arguments[1],Et=arguments[2];this.x=arguments[0],this.y=rt,this.w=Et}else if(4===arguments.length){var Pt=arguments[0],Ut=arguments[1],Yt=arguments[2],$t=arguments[3],ne=Pt.y-Ut.y,nn=Ut.x-Pt.x,wn=Pt.x*Ut.y-Ut.x*Pt.y,lr=Yt.y-$t.y,Si=$t.x-Yt.x,Jr=Yt.x*$t.y-$t.x*Yt.y;this.x=nn*Jr-Si*wn,this.y=lr*wn-ne*Jr,this.w=ne*Si-lr*nn}};Wt.prototype.getY=function(){var t=this.y/this.w;if(M.isNaN(t)||M.isInfinite(t))throw new ue;return t},Wt.prototype.getX=function(){var t=this.x/this.w;if(M.isNaN(t)||M.isInfinite(t))throw new ue;return t},Wt.prototype.getCoordinate=function(){var t=new w;return t.x=this.getX(),t.y=this.getY(),t},Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.intersection=function(t,e,o,a){var f=t.y-e.y,y=e.x-t.x,x=t.x*e.y-e.x*t.y,C=o.y-a.y,B=a.x-o.x,rt=o.x*a.y-a.x*o.y,Et=f*B-C*y,Pt=(y*rt-B*x)/Et,Ut=(C*x-f*rt)/Et;if(M.isNaN(Pt)||M.isInfinite(Pt)||M.isNaN(Ut)||M.isInfinite(Ut))throw new ue;return new w(Pt,Ut)};var Zt=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof w){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof t&&this.init(arguments[0]);else if(2===arguments.length){var a=arguments[0],f=arguments[1];this.init(a.x,f.x,a.y,f.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},Ln={serialVersionUID:{configurable:!0}};Zt.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Zt.prototype.equals=function(t){if(!(t instanceof Zt))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Zt.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new Zt:new Zt(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},Zt.prototype.isNull=function(){return this._maxx<this._minx},Zt.prototype.getMaxX=function(){return this._maxx},Zt.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Zt){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var o=arguments[0],a=arguments[1];return!this.isNull()&&o>=this._minx&&o<=this._maxx&&a>=this._miny&&a<=this._maxy}},Zt.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Zt){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof w){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var o=arguments[0],a=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||a>this._maxy||a<this._miny)}},Zt.prototype.getMinY=function(){return this._miny},Zt.prototype.getMinX=function(){return this._minx},Zt.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Zt){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var o=arguments[0],a=arguments[1];this.isNull()?(this._minx=o,this._maxx=o,this._miny=a,this._maxy=a):(o<this._minx&&(this._minx=o),o>this._maxx&&(this._maxx=o),a<this._miny&&(this._miny=a),a>this._maxy&&(this._maxy=a))}},Zt.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Zt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Zt.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Zt.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Zt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Zt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Zt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Zt.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Zt.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],o=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=o,this._maxy+=o,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Zt.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Zt)return this.covers(arguments[0]);if(arguments[0]instanceof w)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},Zt.prototype.centre=function(){return this.isNull()?null:new w((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Zt.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Zt){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var o=arguments[0],a=arguments[1];this.init(o.x,a.x,o.y,a.y)}else if(4===arguments.length){var f=arguments[0],y=arguments[1],x=arguments[2],C=arguments[3];f<y?(this._minx=f,this._maxx=y):(this._minx=y,this._maxx=f),x<C?(this._miny=x,this._maxy=C):(this._miny=C,this._maxy=x)}},Zt.prototype.getMaxY=function(){return this._maxy},Zt.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var o=0;return this._maxy<t._miny?o=t._miny-this._maxy:this._miny>t._maxy&&(o=this._miny-t._maxy),0===e?o:0===o?e:Math.sqrt(e*e+o*o)},Zt.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+w.hashCode(this._minx))+w.hashCode(this._maxx))+w.hashCode(this._miny))+w.hashCode(this._maxy)},Zt.prototype.interfaces_=function(){return[P,F]},Zt.prototype.getClass=function(){return Zt},Zt.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],o=arguments[2];return o.x>=(t.x<e.x?t.x:e.x)&&o.x<=(t.x>e.x?t.x:e.x)&&o.y>=(t.y<e.y?t.y:e.y)&&o.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var a=arguments[0],f=arguments[1],y=arguments[2],x=arguments[3],C=Math.min(y.x,x.x),B=Math.max(y.x,x.x),rt=Math.min(a.x,f.x),Et=Math.max(a.x,f.x);return!(rt>B||Et<C||(C=Math.min(y.y,x.y),B=Math.max(y.y,x.y),rt=Math.min(a.y,f.y),Et=Math.max(a.y,f.y),rt>B||Et<C))}},Ln.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Zt,Ln);var on={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},vn=function(t){this.geometryFactory=t||new ve};vn.prototype.read=function(t){var e,o;t=t.replace(/[\n\r]/g," ");var f=on.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((f=on.emptyTypeStr.exec(t))[2]=void 0),f&&(o=f[1].toLowerCase(),On[o]&&(e=On[o].apply(this,[f[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},vn.prototype.write=function(t){return this.extractGeometry(t)},vn.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!ln[e])return null;var o=e.toUpperCase();return t.isEmpty()?o+" EMPTY":o+"("+ln[e].apply(this,[t])+")"};var ln={coordinate:function(t){return t.x+" "+t.y},point:function(t){return ln.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],o=0,a=t._geometries.length;o<a;++o)e.push("("+ln.point.apply(this,[t._geometries[o]])+")");return e.join(",")},linestring:function(t){for(var e=[],o=0,a=t._points._coordinates.length;o<a;++o)e.push(ln.coordinate.apply(this,[t._points._coordinates[o]]));return e.join(",")},linearring:function(t){for(var e=[],o=0,a=t._points._coordinates.length;o<a;++o)e.push(ln.coordinate.apply(this,[t._points._coordinates[o]]));return e.join(",")},multilinestring:function(t){for(var e=[],o=0,a=t._geometries.length;o<a;++o)e.push("("+ln.linestring.apply(this,[t._geometries[o]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+ln.linestring.apply(this,[t._shell])+")");for(var o=0,a=t._holes.length;o<a;++o)e.push("("+ln.linestring.apply(this,[t._holes[o]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],o=0,a=t._geometries.length;o<a;++o)e.push("("+ln.polygon.apply(this,[t._geometries[o]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],o=0,a=t._geometries.length;o<a;++o)e.push(this.extractGeometry(t._geometries[o]));return e.join(",")}},On={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(on.spaces);return this.geometryFactory.createPoint(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,o=t.trim().split(","),a=[],f=0,y=o.length;f<y;++f)e=o[f].replace(on.trimParens,"$1"),a.push(On.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(a)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,o=t.trim().split(","),a=[],f=0,y=o.length;f<y;++f)e=o[f].trim().split(on.spaces),a.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(a)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,o=t.trim().split(","),a=[],f=0,y=o.length;f<y;++f)e=o[f].trim().split(on.spaces),a.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(a)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,o=t.trim().split(on.parenComma),a=[],f=0,y=o.length;f<y;++f)e=o[f].replace(on.trimParens,"$1"),a.push(On.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(a)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,o,a,f,y=t.trim().split(on.parenComma),x=[],C=0,B=y.length;C<B;++C)e=y[C].replace(on.trimParens,"$1"),o=On.linestring.apply(this,[e]),a=this.geometryFactory.createLinearRing(o._points),0===C?f=a:x.push(a);return this.geometryFactory.createPolygon(f,x)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,o=t.trim().split(on.doubleParenComma),a=[],f=0,y=o.length;f<y;++f)e=o[f].replace(on.trimParens,"$1"),a.push(On.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(a)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),o=[],a=0,f=e.length;a<f;++a)o.push(this.read(e[a]));return this.geometryFactory.createGeometryCollection(o)}},dt=function(t){this.parser=new vn(t)};dt.prototype.write=function(t){return this.parser.write(t)},dt.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var D=function(t){function e(o){t.call(this,o),this.name="RuntimeException",this.message=o,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),A=function(t){function e(){t.call(this),0===arguments.length?t.call(this):1===arguments.length&&t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(D),L=function(){};L.prototype.interfaces_=function(){return[]},L.prototype.getClass=function(){return L},L.shouldNeverReachHere=function(){if(0===arguments.length)L.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new A("Should never reach here"+(null!==t?": "+t:""))}},L.isTrue=function(){var e;if(1===arguments.length)L.isTrue(arguments[0],null);else if(2===arguments.length&&(e=arguments[1],!arguments[0]))throw null===e?new A:new A(e)},L.equals=function(){var t,e,o;if(2===arguments.length)L.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(o=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new A("Expected "+t+" but encountered "+e+(null!==o?": "+o:""))};var W=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new w,this._intPt[1]=new w,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ut={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};W.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},W.prototype.getTopologySummary=function(){var t=new J;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},W.prototype.computeIntersection=function(t,e,o,a){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=o,this._inputLines[1][1]=a,this._result=this.computeIntersect(t,e,o,a)},W.prototype.getIntersectionNum=function(){return this._result},W.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},W.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},W.prototype.setPrecisionModel=function(t){this._precisionModel=t},W.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},W.prototype.getIntersection=function(t){return this._intPt[t]},W.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},W.prototype.hasIntersection=function(){return this._result!==W.NO_INTERSECTION},W.prototype.getEdgeDistance=function(t,e){return W.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},W.prototype.isCollinear=function(){return this._result===W.COLLINEAR_INTERSECTION},W.prototype.toString=function(){return dt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+dt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},W.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},W.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},W.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},W.prototype.interfaces_=function(){return[]},W.prototype.getClass=function(){return W},W.computeEdgeDistance=function(t,e,o){var a=Math.abs(o.x-e.x),f=Math.abs(o.y-e.y),y=-1;if(t.equals(e))y=0;else if(t.equals(o))y=a>f?a:f;else{var x=Math.abs(t.x-e.x),C=Math.abs(t.y-e.y);0!==(y=a>f?x:C)||t.equals(e)||(y=Math.max(x,C))}return L.isTrue(!(0===y&&!t.equals(e)),"Bad distance calculation"),y},W.nonRobustComputeEdgeDistance=function(t,e,o){var a=t.x-e.x,f=t.y-e.y,y=Math.sqrt(a*a+f*f);return L.isTrue(!(0===y&&!t.equals(e)),"Invalid distance calculation"),y},ut.DONT_INTERSECT.get=function(){return 0},ut.DO_INTERSECT.get=function(){return 1},ut.COLLINEAR.get=function(){return 2},ut.NO_INTERSECTION.get=function(){return 0},ut.POINT_INTERSECTION.get=function(){return 1},ut.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(W,ut);var Ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(o){var a=new Zt(this._inputLines[0][0],this._inputLines[0][1]),f=new Zt(this._inputLines[1][0],this._inputLines[1][1]);return a.contains(o)&&f.contains(o)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var o=arguments[0],a=arguments[1],f=arguments[2];if(this._isProper=!1,Zt.intersects(a,f,o)&&0===Mt.orientationIndex(a,f,o)&&0===Mt.orientationIndex(f,a,o))return this._isProper=!0,(o.equals(a)||o.equals(f))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(o,a,f,y,x){x.x=this.smallestInAbsValue(o.x,a.x,f.x,y.x),x.y=this.smallestInAbsValue(o.y,a.y,f.y,y.y),o.x-=x.x,o.y-=x.y,a.x-=x.x,a.y-=x.y,f.x-=x.x,f.y-=x.y,y.x-=x.x,y.y-=x.y},e.prototype.safeHCoordinateIntersection=function(o,a,f,y){var x=null;try{x=Wt.intersection(o,a,f,y)}catch(C){if(!(C instanceof ue))throw C;x=e.nearestEndpoint(o,a,f,y)}return x},e.prototype.intersection=function(o,a,f,y){var x=this.intersectionWithNormalization(o,a,f,y);return this.isInSegmentEnvelopes(x)||(x=new w(e.nearestEndpoint(o,a,f,y))),null!==this._precisionModel&&this._precisionModel.makePrecise(x),x},e.prototype.smallestInAbsValue=function(o,a,f,y){var x=o,C=Math.abs(x);return Math.abs(a)<C&&(x=a,C=Math.abs(a)),Math.abs(f)<C&&(x=f,C=Math.abs(f)),Math.abs(y)<C&&(x=y),x},e.prototype.checkDD=function(o,a,f,y,x){var C=Lt.intersection(o,a,f,y),B=this.isInSegmentEnvelopes(C);Jt.out.println("DD in env = "+B+"  --------------------- "+C),x.distance(C)>1e-4&&Jt.out.println("Distance = "+x.distance(C))},e.prototype.intersectionWithNormalization=function(o,a,f,y){var x=new w(o),C=new w(a),B=new w(f),rt=new w(y),Et=new w;this.normalizeToEnvCentre(x,C,B,rt,Et);var Pt=this.safeHCoordinateIntersection(x,C,B,rt);return Pt.x+=Et.x,Pt.y+=Et.y,Pt},e.prototype.computeCollinearIntersection=function(o,a,f,y){var x=Zt.intersects(o,a,f),C=Zt.intersects(o,a,y),B=Zt.intersects(f,y,o),rt=Zt.intersects(f,y,a);return x&&C?(this._intPt[0]=f,this._intPt[1]=y,t.COLLINEAR_INTERSECTION):B&&rt?(this._intPt[0]=o,this._intPt[1]=a,t.COLLINEAR_INTERSECTION):x&&B?(this._intPt[0]=f,this._intPt[1]=o,!f.equals(o)||C||rt?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):x&&rt?(this._intPt[0]=f,this._intPt[1]=a,!f.equals(a)||C||B?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):C&&B?(this._intPt[0]=y,this._intPt[1]=o,!y.equals(o)||x||rt?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):C&&rt?(this._intPt[0]=y,this._intPt[1]=a,!y.equals(a)||x||B?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(o,a,f,y,x){var C=o.x<a.x?o.x:a.x,B=o.y<a.y?o.y:a.y,rt=o.x>a.x?o.x:a.x,Et=o.y>a.y?o.y:a.y,Pt=f.x<y.x?f.x:y.x,Ut=f.y<y.y?f.y:y.y,Yt=f.x>y.x?f.x:y.x,$t=f.y>y.y?f.y:y.y,nn=((B>Ut?B:Ut)+(Et<$t?Et:$t))/2;x.x=((C>Pt?C:Pt)+(rt<Yt?rt:Yt))/2,x.y=nn,o.x-=x.x,o.y-=x.y,a.x-=x.x,a.y-=x.y,f.x-=x.x,f.y-=x.y,y.x-=x.x,y.y-=x.y},e.prototype.computeIntersect=function(o,a,f,y){if(this._isProper=!1,!Zt.intersects(o,a,f,y))return t.NO_INTERSECTION;var x=Mt.orientationIndex(o,a,f),C=Mt.orientationIndex(o,a,y);if(x>0&&C>0||x<0&&C<0)return t.NO_INTERSECTION;var B=Mt.orientationIndex(f,y,o),rt=Mt.orientationIndex(f,y,a);return B>0&&rt>0||B<0&&rt<0?t.NO_INTERSECTION:0===x&&0===C&&0===B&&0===rt?this.computeCollinearIntersection(o,a,f,y):(0===x||0===C||0===B||0===rt?(this._isProper=!1,o.equals2D(f)||o.equals2D(y)?this._intPt[0]=o:a.equals2D(f)||a.equals2D(y)?this._intPt[0]=a:0===x?this._intPt[0]=new w(f):0===C?this._intPt[0]=new w(y):0===B?this._intPt[0]=new w(o):0===rt&&(this._intPt[0]=new w(a))):(this._isProper=!0,this._intPt[0]=this.intersection(o,a,f,y)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(o,a,f,y){var x=o,C=Mt.distancePointLine(o,f,y),B=Mt.distancePointLine(a,f,y);return B<C&&(C=B,x=a),(B=Mt.distancePointLine(f,o,a))<C&&(C=B,x=f),(B=Mt.distancePointLine(y,o,a))<C&&(C=B,x=y),x},e}(W),Rt=function(){};Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt},Rt.orientationIndex=function(t,e,o){return Rt.signOfDet2x2(e.x-t.x,e.y-t.y,o.x-e.x,o.y-e.y)},Rt.signOfDet2x2=function(t,e,o,a){var f=null,y=null,x=null;if(f=1,0===t||0===a)return 0===e||0===o?0:e>0?o>0?-f:f:o>0?f:-f;if(0===e||0===o)return a>0?t>0?f:-f:t>0?-f:f;if(e>0?a>0?e<=a||(f=-f,y=t,t=o,o=y,y=e,e=a,a=y):e<=-a?(f=-f,o=-o,a=-a):(y=t,t=-o,o=y,y=e,e=-a,a=y):a>0?-e<=a?(f=-f,t=-t,e=-e):(y=-t,t=o,o=y,y=-e,e=a,a=y):e>=a?(t=-t,e=-e,o=-o,a=-a):(f=-f,y=-t,t=-o,o=y,y=-e,e=-a,a=y),t>0){if(!(o>0&&t<=o))return f}else{if(o>0||!(t>=o))return-f;f=-f,t=-t,o=-o}for(;;){if((a-=(x=Math.floor(o/t))*e)<0)return-f;if(a>e)return f;if(t>(o-=x*t)+o){if(e<a+a)return f}else{if(e>a+a)return-f;o=t-o,a=e-a,f=-f}if(0===a)return 0===o?0:-f;if(0===o||(t-=(x=Math.floor(t/o))*o,(e-=x*a)<0))return f;if(e>a)return-f;if(o>t+t){if(a<e+e)return-f}else{if(a>e+e)return f;t=o-t,e=a-e,f=-f}if(0===e)return 0===t?0:f;if(0===t)return-f}};var Ft=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Ft.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var o=t.x,a=e.x;return o>a&&(o=e.x,a=t.x),this._p.x>=o&&this._p.x<=a&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var y=t.y-this._p.y,C=e.y-this._p.y,B=Rt.signOfDet2x2(t.x-this._p.x,y,e.x-this._p.x,C);if(0===B)return this._isPointOnSegment=!0,null;C<y&&(B=-B),B>0&&this._crossingCount++}},Ft.prototype.isPointInPolygon=function(){return this.getLocation()!==R.EXTERIOR},Ft.prototype.getLocation=function(){return this._isPointOnSegment?R.BOUNDARY:this._crossingCount%2==1?R.INTERIOR:R.EXTERIOR},Ft.prototype.isOnSegment=function(){return this._isPointOnSegment},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.locatePointInRing=function(){if(arguments[0]instanceof w&&Nt(arguments[1],At)){for(var e=arguments[1],o=new Ft(arguments[0]),a=new w,f=new w,y=1;y<e.size();y++)if(e.getCoordinate(y,a),e.getCoordinate(y-1,f),o.countSegment(a,f),o.isOnSegment())return o.getLocation();return o.getLocation()}if(arguments[0]instanceof w&&arguments[1]instanceof Array){for(var C=arguments[1],B=new Ft(arguments[0]),rt=1;rt<C.length;rt++)if(B.countSegment(C[rt],C[rt-1]),B.isOnSegment())return B.getLocation();return B.getLocation()}};var Mt=function(){},ae={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt},Mt.orientationIndex=function(t,e,o){return Lt.orientationIndex(t,e,o)},Mt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,o=t[0].x,a=1;a<t.length-1;a++)e+=(t[a].x-o)*(t[a-1].y-t[a+1].y);return e/2}if(Nt(arguments[0],At)){var x=arguments[0],C=x.size();if(C<3)return 0;var B=new w,rt=new w,Et=new w;x.getCoordinate(0,rt),x.getCoordinate(1,Et);var Pt=rt.x;Et.x-=Pt;for(var Ut=0,Yt=1;Yt<C-1;Yt++)B.y=rt.y,rt.x=Et.x,rt.y=Et.y,x.getCoordinate(Yt+1,Et),Et.x-=Pt,Ut+=rt.x*(B.y-Et.y);return Ut/2}},Mt.distanceLineLine=function(t,e,o,a){if(t.equals(e))return Mt.distancePointLine(t,o,a);if(o.equals(a))return Mt.distancePointLine(a,t,e);var f=!1;if(Zt.intersects(t,e,o,a)){var y=(e.x-t.x)*(a.y-o.y)-(e.y-t.y)*(a.x-o.x);if(0===y)f=!0;else{var C=((t.y-o.y)*(e.x-t.x)-(t.x-o.x)*(e.y-t.y))/y,B=((t.y-o.y)*(a.x-o.x)-(t.x-o.x)*(a.y-o.y))/y;(B<0||B>1||C<0||C>1)&&(f=!0)}}else f=!0;return f?G.min(Mt.distancePointLine(t,o,a),Mt.distancePointLine(e,o,a),Mt.distancePointLine(o,t,e),Mt.distancePointLine(a,t,e)):0},Mt.isPointInRing=function(t,e){return Mt.locatePointInRing(t,e)!==R.EXTERIOR},Mt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var o=0,a=new w;t.getCoordinate(0,a);for(var f=a.x,y=a.y,x=1;x<e;x++){t.getCoordinate(x,a);var C=a.x,B=a.y,rt=C-f,Et=B-y;o+=Math.sqrt(rt*rt+Et*Et),f=C,y=B}return o},Mt.isCCW=function(t){var e=t.length-1;if(e<3)throw new S("Ring has fewer than 4 points, so orientation cannot be determined");for(var o=t[0],a=0,f=1;f<=e;f++){var y=t[f];y.y>o.y&&(o=y,a=f)}var x=a;do{(x-=1)<0&&(x=e)}while(t[x].equals2D(o)&&x!==a);var C=a;do{C=(C+1)%e}while(t[C].equals2D(o)&&C!==a);var B=t[x],rt=t[C];if(B.equals2D(o)||rt.equals2D(o)||B.equals2D(rt))return!1;var Et=Mt.computeOrientation(B,o,rt);return 0===Et?B.x>rt.x:Et>0},Mt.locatePointInRing=function(t,e){return Ft.locatePointInRing(t,e)},Mt.distancePointLinePerpendicular=function(t,e,o){var a=(o.x-e.x)*(o.x-e.x)+(o.y-e.y)*(o.y-e.y);return Math.abs(((e.y-t.y)*(o.x-e.x)-(e.x-t.x)*(o.y-e.y))/a)*Math.sqrt(a)},Mt.computeOrientation=function(t,e,o){return Mt.orientationIndex(t,e,o)},Mt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new S("Line array must contain at least one vertex");for(var o=t.distance(e[0]),a=0;a<e.length-1;a++){var f=Mt.distancePointLine(t,e[a],e[a+1]);f<o&&(o=f)}return o}if(3===arguments.length){var y=arguments[0],x=arguments[1],C=arguments[2];if(x.x===C.x&&x.y===C.y)return y.distance(x);var B=(C.x-x.x)*(C.x-x.x)+(C.y-x.y)*(C.y-x.y),rt=((y.x-x.x)*(C.x-x.x)+(y.y-x.y)*(C.y-x.y))/B;return rt<=0?y.distance(x):rt>=1?y.distance(C):Math.abs(((x.y-y.y)*(C.x-x.x)-(x.x-y.x)*(C.y-x.y))/B)*Math.sqrt(B)}},Mt.isOnLine=function(t,e){for(var o=new Ct,a=1;a<e.length;a++)if(o.computeIntersection(t,e[a-1],e[a]),o.hasIntersection())return!0;return!1},ae.CLOCKWISE.get=function(){return-1},ae.RIGHT.get=function(){return Mt.CLOCKWISE},ae.COUNTERCLOCKWISE.get=function(){return 1},ae.LEFT.get=function(){return Mt.COUNTERCLOCKWISE},ae.COLLINEAR.get=function(){return 0},ae.STRAIGHT.get=function(){return Mt.COLLINEAR},Object.defineProperties(Mt,ae);var ge=function(){};ge.prototype.filter=function(t){},ge.prototype.interfaces_=function(){return[]},ge.prototype.getClass=function(){return ge};var Gt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},de={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Gt.prototype.isGeometryCollection=function(){return this.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION},Gt.prototype.getFactory=function(){return this._factory},Gt.prototype.getGeometryN=function(t){return this},Gt.prototype.getArea=function(){return 0},Gt.prototype.isRectangle=function(){return!1},Gt.prototype.equals=function(){if(arguments[0]instanceof Gt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];return e instanceof Gt&&this.equalsExact(e)}},Gt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Gt.prototype.geometryChanged=function(){this.apply(Gt.geometryChangedFilter)},Gt.prototype.geometryChangedAction=function(){this._envelope=null},Gt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Gt.prototype.getLength=function(){return 0},Gt.prototype.getNumGeometries=function(){return 1},Gt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var o=arguments[0],a=arguments[1];return this.getSortIndex()!==o.getSortIndex()?this.getSortIndex()-o.getSortIndex():this.isEmpty()&&o.isEmpty()?0:this.isEmpty()?-1:o.isEmpty()?1:this.compareToSameClass(o,a)}},Gt.prototype.getUserData=function(){return this._userData},Gt.prototype.getSRID=function(){return this._SRID},Gt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Gt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION)throw new S("This method does not support GeometryCollection arguments")},Gt.prototype.equal=function(t,e,o){return 0===o?t.equals(e):t.distance(e)<=o},Gt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Gt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Gt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Zt(this._envelope)},Gt.prototype.setSRID=function(t){this._SRID=t},Gt.prototype.setUserData=function(t){this._userData=t},Gt.prototype.compare=function(t,e){for(var o=t.iterator(),a=e.iterator();o.hasNext()&&a.hasNext();){var f=o.next(),y=a.next(),x=f.compareTo(y);if(0!==x)return x}return o.hasNext()?1:a.hasNext()?-1:0},Gt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Gt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Gt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Gt.SORTINDEX_MULTIPOINT||this.getSortIndex()===Gt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Gt.SORTINDEX_MULTIPOLYGON},Gt.prototype.interfaces_=function(){return[N,P,F]},Gt.prototype.getClass=function(){return Gt},Gt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Gt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},de.serialVersionUID.get=function(){return 0x799ea46522854c00},de.SORTINDEX_POINT.get=function(){return 0},de.SORTINDEX_MULTIPOINT.get=function(){return 1},de.SORTINDEX_LINESTRING.get=function(){return 2},de.SORTINDEX_LINEARRING.get=function(){return 3},de.SORTINDEX_MULTILINESTRING.get=function(){return 4},de.SORTINDEX_POLYGON.get=function(){return 5},de.SORTINDEX_MULTIPOLYGON.get=function(){return 6},de.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},de.geometryChangedFilter.get=function(){return yn},Object.defineProperties(Gt,de);var yn=function(){};yn.interfaces_=function(){return[ge]},yn.filter=function(t){t.geometryChangedAction()};var we=function(){};we.prototype.filter=function(t){},we.prototype.interfaces_=function(){return[]},we.prototype.getClass=function(){return we};var tn=function(){},hn={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};tn.prototype.isInBoundary=function(t){},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn},hn.Mod2BoundaryNodeRule.get=function(){return Cn},hn.EndPointBoundaryNodeRule.get=function(){return Wn},hn.MultiValentEndPointBoundaryNodeRule.get=function(){return Rn},hn.MonoValentEndPointBoundaryNodeRule.get=function(){return fr},hn.MOD2_BOUNDARY_RULE.get=function(){return new Cn},hn.ENDPOINT_BOUNDARY_RULE.get=function(){return new Wn},hn.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Rn},hn.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new fr},hn.OGC_SFS_BOUNDARY_RULE.get=function(){return tn.MOD2_BOUNDARY_RULE},Object.defineProperties(tn,hn);var Cn=function(){};Cn.prototype.isInBoundary=function(t){return t%2==1},Cn.prototype.interfaces_=function(){return[tn]},Cn.prototype.getClass=function(){return Cn};var Wn=function(){};Wn.prototype.isInBoundary=function(t){return t>0},Wn.prototype.interfaces_=function(){return[tn]},Wn.prototype.getClass=function(){return Wn};var Rn=function(){};Rn.prototype.isInBoundary=function(t){return t>1},Rn.prototype.interfaces_=function(){return[tn]},Rn.prototype.getClass=function(){return Rn};var fr=function(){};fr.prototype.isInBoundary=function(t){return 1===t},fr.prototype.interfaces_=function(){return[tn]},fr.prototype.getClass=function(){return fr};var pn=function(){};pn.prototype.add=function(){},pn.prototype.addAll=function(){},pn.prototype.isEmpty=function(){},pn.prototype.iterator=function(){},pn.prototype.size=function(){},pn.prototype.toArray=function(){},pn.prototype.remove=function(){},(V.prototype=new Error).name="IndexOutOfBoundsException";var Tr=function(){};Tr.prototype.hasNext=function(){},Tr.prototype.next=function(){},Tr.prototype.remove=function(){};var Xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(pn);(I.prototype=new Error).name="NoSuchElementException";var kt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof pn&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,pn]},e.prototype.add=function(o){return 1===arguments.length?this.array_.push(o):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(o){for(var a=o.iterator();a.hasNext();)this.add(a.next());return!0},e.prototype.set=function(o,a){var f=this.array_[o];return this.array_[o]=a,f},e.prototype.iterator=function(){return new Oo(this)},e.prototype.get=function(o){if(o<0||o>=this.size())throw new V;return this.array_[o]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var o=[],a=0,f=this.array_.length;a<f;a++)o.push(this.array_[a]);return o},e.prototype.remove=function(o){for(var a=!1,f=0,y=this.array_.length;f<y;f++)if(this.array_[f]===o){this.array_.splice(f,1),a=!0;break}return a},e}(Xn),Oo=function(t){function e(o){t.call(this),this.arrayList_=o,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new I;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(o){return this.arrayList_.set(this.position_-1,o)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Tr),Wr=function(t){function e(){if(t.call(this),0!==arguments.length)if(1===arguments.length){var a=arguments[0];this.ensureCapacity(a.length),this.add(a,!0)}else if(2===arguments.length){var f=arguments[0],y=arguments[1];this.ensureCapacity(f.length),this.add(f,y)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={coordArrayType:{configurable:!0}};return o.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(a){return this.get(a)},e.prototype.addAll=function(){if(2===arguments.length){for(var f=arguments[1],y=!1,x=arguments[0].iterator();x.hasNext();)this.add(x.next(),f),y=!0;return y}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var a=t.prototype.clone.call(this),f=0;f<this.size();f++)a.add(f,this.get(f).copy());return a},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length)t.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof w&&"boolean"==typeof arguments[1]){var x=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(x))return null;t.prototype.add.call(this,x)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var rt=arguments[0],Et=arguments[1];if(arguments[2])for(var Pt=0;Pt<rt.length;Pt++)this.add(rt[Pt],Et);else for(var Ut=rt.length-1;Ut>=0;Ut--)this.add(rt[Ut],Et);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof w){var Yt=arguments[0],$t=arguments[1];if(!arguments[2]){var ne=this.size();if(ne>0&&(Yt>0&&this.get(Yt-1).equals2D($t)||Yt<ne&&this.get(Yt).equals2D($t)))return null}t.prototype.add.call(this,Yt,$t)}}else if(4===arguments.length){var nn=arguments[0],wn=arguments[1],lr=arguments[2],Si=arguments[3],Jr=1;lr>Si&&(Jr=-1);for(var xa=lr;xa!==Si;xa+=Jr)this.add(nn[xa],wn);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new w(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,o),e}(kt),pe=function(){},kr={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};kr.ForwardComparator.get=function(){return di},kr.BidirectionalComparator.get=function(){return _e},kr.coordArrayType.get=function(){return new Array(0).fill(null)},pe.prototype.interfaces_=function(){return[]},pe.prototype.getClass=function(){return pe},pe.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},pe.ptNotInList=function(t,e){for(var o=0;o<t.length;o++){var a=t[o];if(pe.indexOf(a,e)<0)return a}return null},pe.scroll=function(t,e){var o=pe.indexOf(e,t);if(o<0)return null;var a=new Array(t.length).fill(null);Jt.arraycopy(t,o,a,0,t.length-o),Jt.arraycopy(t,0,a,t.length-o,o),Jt.arraycopy(a,0,t,0,t.length)},pe.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(!t[o].equals(e[o]))return!1;return!0}if(3===arguments.length){var a=arguments[0],f=arguments[1],y=arguments[2];if(a===f)return!0;if(null===a||null===f||a.length!==f.length)return!1;for(var x=0;x<a.length;x++)if(0!==y.compare(a[x],f[x]))return!1;return!0}},pe.intersection=function(t,e){for(var o=new Wr,a=0;a<t.length;a++)e.intersects(t[a])&&o.add(t[a],!0);return o.toCoordinateArray()},pe.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},pe.removeRepeatedPoints=function(t){return pe.hasRepeatedPoints(t)?new Wr(t,!1).toCoordinateArray():t},pe.reverse=function(t){for(var e=t.length-1,o=Math.trunc(e/2),a=0;a<=o;a++){var f=t[a];t[a]=t[e-a],t[e-a]=f}},pe.removeNull=function(t){for(var e=0,o=0;o<t.length;o++)null!==t[o]&&e++;var a=new Array(e).fill(null);if(0===e)return a;for(var f=0,y=0;y<t.length;y++)null!==t[y]&&(a[f++]=t[y]);return a},pe.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),o=0;o<t.length;o++)e[o]=new w(t[o]);return e}if(5===arguments.length)for(var a=arguments[0],f=arguments[1],y=arguments[2],x=arguments[3],C=arguments[4],B=0;B<C;B++)y[x+B]=new w(a[f+B])},pe.isEqualReversed=function(t,e){for(var o=0;o<t.length;o++)if(0!==t[o].compareTo(e[t.length-o-1]))return!1;return!0},pe.envelope=function(t){for(var e=new Zt,o=0;o<t.length;o++)e.expandToInclude(t[o]);return e},pe.toCoordinateArray=function(t){return t.toArray(pe.coordArrayType)},pe.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},pe.indexOf=function(t,e){for(var o=0;o<e.length;o++)if(t.equals(e[o]))return o;return-1},pe.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var a=t[e].compareTo(t[t.length-1-e]);if(0!==a)return a}return 1},pe.compare=function(t,e){for(var o=0;o<t.length&&o<e.length;){var a=t[o].compareTo(e[o]);if(0!==a)return a;o++}return o<e.length?-1:o<t.length?1:0},pe.minCoordinate=function(t){for(var e=null,o=0;o<t.length;o++)(null===e||e.compareTo(t[o])>0)&&(e=t[o]);return e},pe.extract=function(t,e,o){e=G.clamp(e,0,t.length);var a=(o=G.clamp(o,-1,t.length))-e+1;o<0&&(a=0),e>=t.length&&(a=0),o<e&&(a=0);var f=new Array(a).fill(null);if(0===a)return f;for(var y=0,x=e;x<=o;x++)f[y++]=t[x];return f},Object.defineProperties(pe,kr);var di=function(){};di.prototype.compare=function(t,e){return pe.compare(t,e)},di.prototype.interfaces_=function(){return[O]},di.prototype.getClass=function(){return di};var _e=function(){};_e.prototype.compare=function(t,e){var o=t,a=e;if(o.length<a.length)return-1;if(o.length>a.length)return 1;if(0===o.length)return 0;var f=pe.compare(o,a);return pe.isEqualReversed(o,a)?0:f},_e.prototype.OLDcompare=function(t,e){var o=t,a=e;if(o.length<a.length)return-1;if(o.length>a.length)return 1;if(0===o.length)return 0;for(var f=pe.increasingDirection(o),y=pe.increasingDirection(a),x=f>0?0:o.length-1,C=y>0?0:o.length-1,B=0;B<o.length;B++){var rt=o[x].compareTo(a[C]);if(0!==rt)return rt;x+=f,C+=y}return 0},_e.prototype.interfaces_=function(){return[O]},_e.prototype.getClass=function(){return _e};var ho=function(){};ho.prototype.get=function(){},ho.prototype.put=function(){},ho.prototype.size=function(){},ho.prototype.values=function(){},ho.prototype.entrySet=function(){};var nu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ho);(c.prototype=new Error).name="OperationNotSupported",(nt.prototype=new pn).contains=function(){};var fs=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof pn&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(o){for(var a=0,f=this.array_.length;a<f;a++)if(this.array_[a]===o)return!0;return!1},e.prototype.add=function(o){return!this.contains(o)&&(this.array_.push(o),!0)},e.prototype.addAll=function(o){for(var a=o.iterator();a.hasNext();)this.add(a.next());return!0},e.prototype.remove=function(o){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var o=[],a=0,f=this.array_.length;a<f;a++)o.push(this.array_[a]);return o},e.prototype.iterator=function(){return new ga(this)},e}(nt),ga=function(t){function e(o){t.call(this),this.hashSet_=o,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new I;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new c},e}(Tr),Vr=0;(xt.prototype=new nu).get=function(t){for(var e=this.root_;null!==e;){var o=t.compareTo(e.key);if(o<0)e=e.left;else{if(!(o>0))return e.value;e=e.right}}return null},xt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Vr,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var o,a,f=this.root_;do{if(o=f,(a=t.compareTo(f.key))<0)f=f.left;else{if(!(a>0)){var y=f.value;return f.value=e,y}f=f.right}}while(null!==f);var x={key:t,left:null,right:null,value:e,parent:o,color:Vr,getValue:function(){return this.value},getKey:function(){return this.key}};return a<0?o.left=x:o.right=x,this.fixAfterInsertion(x),this.size_++,null},xt.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(ot(t)===It(ot(ot(t)))){var e=Tt(ot(ot(t)));1===H(e)?(ft(ot(t),Vr),ft(e,Vr),ft(ot(ot(t)),1),t=ot(ot(t))):(t===Tt(ot(t))&&(t=ot(t),this.rotateLeft(t)),ft(ot(t),Vr),ft(ot(ot(t)),1),this.rotateRight(ot(ot(t))))}else{var o=It(ot(ot(t)));1===H(o)?(ft(ot(t),Vr),ft(o,Vr),ft(ot(ot(t)),1),t=ot(ot(t))):(t===It(ot(t))&&(t=ot(t),this.rotateRight(t)),ft(ot(t),Vr),ft(ot(ot(t)),1),this.rotateLeft(ot(ot(t))))}this.root_.color=Vr},xt.prototype.values=function(){var t=new kt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=xt.successor(e));)t.add(e.value);return t},xt.prototype.entrySet=function(){var t=new fs,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=xt.successor(e));)t.add(e);return t},xt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},xt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},xt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},xt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var o=t.parent,a=t;null!==o&&a===o.right;)a=o,o=o.parent;return o},xt.prototype.size=function(){return this.size_};var Jo=function(){};Jo.prototype.interfaces_=function(){return[]},Jo.prototype.getClass=function(){return Jo},mt.prototype=new nt,(wt.prototype=new mt).contains=function(t){for(var e=0,o=this.array_.length;e<o;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},wt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,o=this.array_.length;e<o;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},wt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},wt.prototype.remove=function(t){throw new c},wt.prototype.size=function(){return this.array_.length},wt.prototype.isEmpty=function(){return 0===this.array_.length},wt.prototype.toArray=function(){for(var t=[],e=0,o=this.array_.length;e<o;e++)t.push(this.array_[e]);return t},wt.prototype.iterator=function(){return new hs(this)};var hs=function(t){this.treeSet_=t,this.position_=0};hs.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new I;return this.treeSet_.array_[this.position_++]},hs.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},hs.prototype.remove=function(){throw new c};var Wi=function(){};Wi.sort=function(){var t,e,o,f=arguments[0];if(1===arguments.length)f.sort(function(x,C){return x.compareTo(C)});else if(2===arguments.length)o=arguments[1],f.sort(function(x,C){return o.compare(x,C)});else if(3===arguments.length){(e=f.slice(arguments[1],arguments[2])).sort();var y=f.slice(0,arguments[1]).concat(e,f.slice(arguments[2],f.length));for(f.splice(0,f.length),t=0;t<y.length;t++)f.push(y[t])}else if(4===arguments.length)for(e=f.slice(arguments[1],arguments[2]),o=arguments[3],e.sort(function(x,C){return o.compare(x,C)}),y=f.slice(0,arguments[1]).concat(e,f.slice(arguments[2],f.length)),f.splice(0,f.length),t=0;t<y.length;t++)f.push(y[t])},Wi.asList=function(t){for(var e=new kt,o=0,a=t.length;o<a;o++)e.add(t[o]);return e};var be=function(){},Qr={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Qr.P.get=function(){return 0},Qr.L.get=function(){return 1},Qr.A.get=function(){return 2},Qr.FALSE.get=function(){return-1},Qr.TRUE.get=function(){return-2},Qr.DONTCARE.get=function(){return-3},Qr.SYM_FALSE.get=function(){return"F"},Qr.SYM_TRUE.get=function(){return"T"},Qr.SYM_DONTCARE.get=function(){return"*"},Qr.SYM_P.get=function(){return"0"},Qr.SYM_L.get=function(){return"1"},Qr.SYM_A.get=function(){return"2"},be.prototype.interfaces_=function(){return[]},be.prototype.getClass=function(){return be},be.toDimensionSymbol=function(t){switch(t){case be.FALSE:return be.SYM_FALSE;case be.TRUE:return be.SYM_TRUE;case be.DONTCARE:return be.SYM_DONTCARE;case be.P:return be.SYM_P;case be.L:return be.SYM_L;case be.A:return be.SYM_A}throw new S("Unknown dimension value: "+t)},be.toDimensionValue=function(t){switch(ct.toUpperCase(t)){case be.SYM_FALSE:return be.FALSE;case be.SYM_TRUE:return be.TRUE;case be.SYM_DONTCARE:return be.DONTCARE;case be.SYM_P:return be.P;case be.SYM_L:return be.L;case be.SYM_A:return be.A}throw new S("Unknown dimension symbol: "+t)},Object.defineProperties(be,Qr);var Kr=function(){};Kr.prototype.filter=function(t){},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr};var Br=function(){};Br.prototype.filter=function(t,e){},Br.prototype.isDone=function(){},Br.prototype.isGeometryChanged=function(){},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br};var hr=function(t){function e(a,f){if(t.call(this,f),this._geometries=a||[],t.hasNullElements(this._geometries))throw new S("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var a=new Zt,f=0;f<this._geometries.length;f++)a.expandToInclude(this._geometries[f].getEnvelopeInternal());return a},e.prototype.getGeometryN=function(a){return this._geometries[a]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var a=new Array(this.getNumPoints()).fill(null),f=-1,y=0;y<this._geometries.length;y++)for(var x=this._geometries[y].getCoordinates(),C=0;C<x.length;C++)a[++f]=x[C];return a},e.prototype.getArea=function(){for(var a=0,f=0;f<this._geometries.length;f++)a+=this._geometries[f].getArea();return a},e.prototype.equalsExact=function(){if(2===arguments.length){var a=arguments[0],f=arguments[1];if(!this.isEquivalentClass(a))return!1;var y=a;if(this._geometries.length!==y._geometries.length)return!1;for(var x=0;x<this._geometries.length;x++)if(!this._geometries[x].equalsExact(y._geometries[x],f))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var a=0;a<this._geometries.length;a++)this._geometries[a].normalize();Wi.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var a=be.FALSE,f=0;f<this._geometries.length;f++)a=Math.max(a,this._geometries[f].getBoundaryDimension());return a},e.prototype.getDimension=function(){for(var a=be.FALSE,f=0;f<this._geometries.length;f++)a=Math.max(a,this._geometries[f].getDimension());return a},e.prototype.getLength=function(){for(var a=0,f=0;f<this._geometries.length;f++)a+=this._geometries[f].getLength();return a},e.prototype.getNumPoints=function(){for(var a=0,f=0;f<this._geometries.length;f++)a+=this._geometries[f].getNumPoints();return a},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var f=new Array(this._geometries.length).fill(null),y=0;y<this._geometries.length;y++)f[y]=this._geometries[y].reverse();return this.getFactory().createGeometryCollection(f)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var a=arguments[0],f=new wt(Wi.asList(this._geometries)),y=new wt(Wi.asList(a._geometries));return this.compare(f,y)}if(2===arguments.length){for(var C=arguments[1],B=arguments[0],rt=this.getNumGeometries(),Et=B.getNumGeometries(),Pt=0;Pt<rt&&Pt<Et;){var Ut=this.getGeometryN(Pt),Yt=B.getGeometryN(Pt),$t=Ut.compareToSameClass(Yt,C);if(0!==$t)return $t;Pt++}return Pt<rt?1:Pt<Et?-1:0}},e.prototype.apply=function(){if(Nt(arguments[0],we))for(var a=arguments[0],f=0;f<this._geometries.length;f++)this._geometries[f].apply(a);else if(Nt(arguments[0],Br)){var y=arguments[0];if(0===this._geometries.length)return null;for(var x=0;x<this._geometries.length&&(this._geometries[x].apply(y),!y.isDone());x++);y.isGeometryChanged()&&this.geometryChanged()}else if(Nt(arguments[0],Kr)){var C=arguments[0];C.filter(this);for(var B=0;B<this._geometries.length;B++)this._geometries[B].apply(C)}else if(Nt(arguments[0],ge)){var rt=arguments[0];rt.filter(this);for(var Et=0;Et<this._geometries.length;Et++)this._geometries[Et].apply(rt)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),L.shouldNeverReachHere(),null},e.prototype.clone=function(){var a=t.prototype.clone.call(this);a._geometries=new Array(this._geometries.length).fill(null);for(var f=0;f<this._geometries.length;f++)a._geometries[f]=this._geometries[f].clone();return a},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var a=new Array(this._geometries.length).fill(null),f=0;f<a.length;f++)a[f]=this._geometries[f].copy();return new e(a,this._factory)},e.prototype.isEmpty=function(){for(var a=0;a<this._geometries.length;a++)if(!this._geometries[a].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,o),e}(Gt),po=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var a=arguments[0],f=arguments[1];return!!this.isEquivalentClass(a)&&t.prototype.equalsExact.call(this,a,f)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?be.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var a=0;a<this._geometries.length;a++)if(!this._geometries[a].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var a=this._geometries.length,f=new Array(a).fill(null),y=0;y<this._geometries.length;y++)f[a-1-y]=this._geometries[y].reverse();return this.getFactory().createMultiLineString(f)},e.prototype.getBoundary=function(){return new Zr(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var a=new Array(this._geometries.length).fill(null),f=0;f<a.length;f++)a[f]=this._geometries[f].copy();return new e(a,this._factory)},e.prototype.interfaces_=function(){return[Jo]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,o),e}(hr),Zr=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=tn.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var o=arguments[0],a=arguments[1];this._geom=o,this._geomFact=o.getFactory(),this._bnRule=a}};Zr.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Zr.prototype.getBoundary=function(){return this._geom instanceof _n?this.boundaryLineString(this._geom):this._geom instanceof po?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Zr.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Zr.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Zr.prototype.computeBoundaryCoordinates=function(t){var e=new kt;this._endpointMap=new xt;for(var o=0;o<t.getNumGeometries();o++){var a=t.getGeometryN(o);0!==a.getNumPoints()&&(this.addEndpoint(a.getCoordinateN(0)),this.addEndpoint(a.getCoordinateN(a.getNumPoints()-1)))}for(var f=this._endpointMap.entrySet().iterator();f.hasNext();){var y=f.next(),x=y.getValue().count;this._bnRule.isInBoundary(x)&&e.add(y.getKey())}return pe.toCoordinateArray(e)},Zr.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new jo,this._endpointMap.put(t,e)),e.count++},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.getBoundary=function(){return 1===arguments.length?new Zr(arguments[0]).getBoundary():2===arguments.length?new Zr(arguments[0],arguments[1]).getBoundary():void 0};var jo=function(){this.count=null};jo.prototype.interfaces_=function(){return[]},jo.prototype.getClass=function(){return jo};var Sr=function(){},Ds={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},Sr.chars=function(t,e){for(var o=new Array(e).fill(null),a=0;a<e;a++)o[a]=t;return String(o)},Sr.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},o=new function(){}(e);return t.printStackTrace(o),e.toString()}if(2===arguments.length){for(var f=arguments[1],y="",x=new function(){}(new function(){}(Sr.getStackTrace(arguments[0]))),C=0;C<f;C++)try{y+=x.readLine()+Sr.NEWLINE}catch(B){if(!(B instanceof qt))throw B;L.shouldNeverReachHere()}return y}},Sr.split=function(t,e){for(var o=e.length,a=new kt,f=""+t,y=f.indexOf(e);y>=0;){var x=f.substring(0,y);a.add(x),y=(f=f.substring(y+o)).indexOf(e)}f.length>0&&a.add(f);for(var C=new Array(a.size()).fill(null),B=0;B<C.length;B++)C[B]=a.get(B);return C},Sr.toString=function(){if(1===arguments.length)return Sr.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},Sr.spaces=function(t){return Sr.chars(" ",t)},Ds.NEWLINE.get=function(){return Jt.getProperty("line.separator")},Ds.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Sr,Ds);var In=function(){};In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.copyCoord=function(t,e,o,a){for(var f=Math.min(t.getDimension(),o.getDimension()),y=0;y<f;y++)o.setOrdinate(a,y,t.getOrdinate(e,y))},In.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,At.X)===t.getOrdinate(e-1,At.X)&&t.getOrdinate(0,At.Y)===t.getOrdinate(e-1,At.Y)},In.isEqual=function(t,e){var o=t.size();if(o!==e.size())return!1;for(var a=Math.min(t.getDimension(),e.getDimension()),f=0;f<o;f++)for(var y=0;y<a;y++){var x=t.getOrdinate(f,y),C=e.getOrdinate(f,y);if(!(t.getOrdinate(f,y)===e.getOrdinate(f,y)||M.isNaN(x)&&M.isNaN(C)))return!1}return!0},In.extend=function(t,e,o){var a=t.create(o,e.getDimension()),f=e.size();if(In.copy(e,0,a,0,f),f>0)for(var y=f;y<o;y++)In.copy(e,f-1,a,y,1);return a},In.reverse=function(t){for(var e=t.size()-1,o=Math.trunc(e/2),a=0;a<=o;a++)In.swap(t,a,e-a)},In.swap=function(t,e,o){if(e===o)return null;for(var a=0;a<t.getDimension();a++){var f=t.getOrdinate(e,a);t.setOrdinate(e,a,t.getOrdinate(o,a)),t.setOrdinate(o,a,f)}},In.copy=function(t,e,o,a,f){for(var y=0;y<f;y++)In.copyCoord(t,e+y,o,a+y)},In.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var o=t.getDimension(),a=new J;a.append("(");for(var f=0;f<e;f++){f>0&&a.append(" ");for(var y=0;y<o;y++)y>0&&a.append(","),a.append(Sr.toString(t.getOrdinate(f,y)))}return a.append(")"),a.toString()}},In.ensureValidRing=function(t,e){var o=e.size();return 0===o?e:o<=3?In.createClosedRing(t,e,4):e.getOrdinate(0,At.X)===e.getOrdinate(o-1,At.X)&&e.getOrdinate(0,At.Y)===e.getOrdinate(o-1,At.Y)?e:In.createClosedRing(t,e,o+1)},In.createClosedRing=function(t,e,o){var a=t.create(o,e.getDimension()),f=e.size();In.copy(e,0,a,0,f);for(var y=f;y<o;y++)In.copy(e,0,a,y,1);return a};var _n=function(t){function e(a,f){t.call(this,f),this._points=null,this.init(a)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Zt:this._points.expandEnvelope(new Zt)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var a=arguments[0],f=arguments[1];if(!this.isEquivalentClass(a))return!1;var y=a;if(this._points.size()!==y._points.size())return!1;for(var x=0;x<this._points.size();x++)if(!this.equal(this._points.getCoordinate(x),y._points.getCoordinate(x),f))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var a=0;a<Math.trunc(this._points.size()/2);a++){var f=this._points.size()-1-a;if(!this._points.getCoordinate(a).equals(this._points.getCoordinate(f)))return this._points.getCoordinate(a).compareTo(this._points.getCoordinate(f))>0&&In.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?be.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Mt.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var a=this._points.copy();return In.reverse(a),this.getFactory().createLineString(a)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var a=arguments[0],f=0,y=0;f<this._points.size()&&y<a._points.size();){var x=this._points.getCoordinate(f).compareTo(a._points.getCoordinate(y));if(0!==x)return x;f++,y++}return f<this._points.size()?1:y<a._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},e.prototype.apply=function(){if(Nt(arguments[0],we))for(var a=arguments[0],f=0;f<this._points.size();f++)a.filter(this._points.getCoordinate(f));else if(Nt(arguments[0],Br)){var y=arguments[0];if(0===this._points.size())return null;for(var x=0;x<this._points.size()&&(y.filter(this._points,x),!y.isDone());x++);y.isGeometryChanged()&&this.geometryChanged()}else(Nt(arguments[0],Kr)||Nt(arguments[0],ge))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Zr(this).getBoundary()},e.prototype.isEquivalentClass=function(a){return a instanceof e},e.prototype.clone=function(){var a=t.prototype.clone.call(this);return a._points=this._points.clone(),a},e.prototype.getCoordinateN=function(a){return this._points.getCoordinate(a)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(a){if(null===a&&(a=this.getFactory().getCoordinateSequenceFactory().create([])),1===a.size())throw new S("Invalid number of points in LineString (found "+a.size()+" - must be 0 or >= 2)");this._points=a},e.prototype.isCoordinate=function(a){for(var f=0;f<this._points.size();f++)if(this._points.getCoordinate(f).equals(a))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(a){return this.getFactory().createPoint(this._points.getCoordinate(a))},e.prototype.interfaces_=function(){return[Jo]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,o),e}(Gt),ps=function(){};ps.prototype.interfaces_=function(){return[]},ps.prototype.getClass=function(){return ps};var Pr=function(t){function e(a,f){t.call(this,f),this._coordinates=a||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Zt;var a=new Zt;return a.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),a},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var a=arguments[0],f=arguments[1];return!!this.isEquivalentClass(a)&&(!(!this.isEmpty()||!a.isEmpty())||this.isEmpty()===a.isEmpty()&&this.equal(a.getCoordinate(),this.getCoordinate(),f))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return be.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var a=arguments[0];return this.getCoordinate().compareTo(a.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},e.prototype.apply=function(){if(Nt(arguments[0],we)){var a=arguments[0];if(this.isEmpty())return null;a.filter(this.getCoordinate())}else if(Nt(arguments[0],Br)){var f=arguments[0];if(this.isEmpty())return null;f.filter(this._coordinates,0),f.isGeometryChanged()&&this.geometryChanged()}else(Nt(arguments[0],Kr)||Nt(arguments[0],ge))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var a=t.prototype.clone.call(this);return a._coordinates=this._coordinates.clone(),a},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(a){null===a&&(a=this.getFactory().getCoordinateSequenceFactory().create([])),L.isTrue(a.size()<=1),this._coordinates=a},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[ps]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,o),e}(Gt),Vi=function(){};Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi};var Sn=function(t){function e(a,f,y){if(t.call(this,y),this._shell=null,this._holes=null,null===a&&(a=this.getFactory().createLinearRing()),null===f&&(f=[]),t.hasNullElements(f))throw new S("holes must not contain null elements");if(a.isEmpty()&&t.hasNonEmptyElements(f))throw new S("shell is empty but holes are not");this._shell=a,this._holes=f}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var a=new Array(this.getNumPoints()).fill(null),f=-1,y=this._shell.getCoordinates(),x=0;x<y.length;x++)a[++f]=y[x];for(var C=0;C<this._holes.length;C++)for(var B=this._holes[C].getCoordinates(),rt=0;rt<B.length;rt++)a[++f]=B[rt];return a},e.prototype.getArea=function(){var a=0;a+=Math.abs(Mt.signedArea(this._shell.getCoordinateSequence()));for(var f=0;f<this._holes.length;f++)a-=Math.abs(Mt.signedArea(this._holes[f].getCoordinateSequence()));return a},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var a=this._shell.getCoordinateSequence(),f=this.getEnvelopeInternal(),y=0;y<5;y++){var x=a.getX(y);if(x!==f.getMinX()&&x!==f.getMaxX())return!1;var C=a.getY(y);if(C!==f.getMinY()&&C!==f.getMaxY())return!1}for(var B=a.getX(0),rt=a.getY(0),Et=1;Et<=4;Et++){var Pt=a.getX(Et),Ut=a.getY(Et);if(Pt!==B==(Ut!==rt))return!1;B=Pt,rt=Ut}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var a=arguments[0],f=arguments[1];if(!this.isEquivalentClass(a))return!1;var y=a;if(!this._shell.equalsExact(y._shell,f)||this._holes.length!==y._holes.length)return!1;for(var B=0;B<this._holes.length;B++)if(!this._holes[B].equalsExact(y._holes[B],f))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var a=0;a<this._holes.length;a++)this.normalize(this._holes[a],!1);Wi.sort(this._holes)}else if(2===arguments.length){var f=arguments[0],y=arguments[1];if(f.isEmpty())return null;var x=new Array(f.getCoordinates().length-1).fill(null);Jt.arraycopy(f.getCoordinates(),0,x,0,x.length);var C=pe.minCoordinate(f.getCoordinates());pe.scroll(x,C),Jt.arraycopy(x,0,f.getCoordinates(),0,x.length),f.getCoordinates()[x.length]=x[0],Mt.isCCW(f.getCoordinates())===y&&pe.reverse(f.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var a=0;a+=this._shell.getLength();for(var f=0;f<this._holes.length;f++)a+=this._holes[f].getLength();return a},e.prototype.getNumPoints=function(){for(var a=this._shell.getNumPoints(),f=0;f<this._holes.length;f++)a+=this._holes[f].getNumPoints();return a},e.prototype.reverse=function(){var a=this.copy();a._shell=this._shell.copy().reverse(),a._holes=new Array(this._holes.length).fill(null);for(var f=0;f<this._holes.length;f++)a._holes[f]=this._holes[f].copy().reverse();return a},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var C=arguments[1],B=arguments[0],Pt=this._shell.compareToSameClass(B._shell,C);if(0!==Pt)return Pt;for(var Ut=this.getNumInteriorRing(),Yt=B.getNumInteriorRing(),$t=0;$t<Ut&&$t<Yt;){var ne=this.getInteriorRingN($t),nn=B.getInteriorRingN($t),wn=ne.compareToSameClass(nn,C);if(0!==wn)return wn;$t++}return $t<Ut?1:$t<Yt?-1:0}},e.prototype.apply=function(a){if(Nt(a,we)){this._shell.apply(a);for(var f=0;f<this._holes.length;f++)this._holes[f].apply(a)}else if(Nt(a,Br)){if(this._shell.apply(a),!a.isDone())for(var y=0;y<this._holes.length&&(this._holes[y].apply(a),!a.isDone());y++);a.isGeometryChanged()&&this.geometryChanged()}else if(Nt(a,Kr))a.filter(this);else if(Nt(a,ge)){a.filter(this),this._shell.apply(a);for(var x=0;x<this._holes.length;x++)this._holes[x].apply(a)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var a=new Array(this._holes.length+1).fill(null);a[0]=this._shell;for(var f=0;f<this._holes.length;f++)a[f+1]=this._holes[f];return a.length<=1?this.getFactory().createLinearRing(a[0].getCoordinateSequence()):this.getFactory().createMultiLineString(a)},e.prototype.clone=function(){var a=t.prototype.clone.call(this);a._shell=this._shell.clone(),a._holes=new Array(this._holes.length).fill(null);for(var f=0;f<this._holes.length;f++)a._holes[f]=this._holes[f].clone();return a},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var a=this._shell.copy(),f=new Array(this._holes.length).fill(null),y=0;y<f.length;y++)f[y]=this._holes[y].copy();return new e(a,f,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(a){return this._holes[a]},e.prototype.interfaces_=function(){return[Vi]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,o),e}(Gt),Ro=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var a=arguments[0],f=arguments[1];return!!this.isEquivalentClass(a)&&t.prototype.equalsExact.call(this,a,f)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return be.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var a=new Array(this._geometries.length).fill(null),f=0;f<a.length;f++)a[f]=this._geometries[f].copy();return new e(a,this._factory)},e.prototype.interfaces_=function(){return[ps]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,o),e}(hr),yi=function(t){function e(a,f){a instanceof w&&f instanceof ve&&(a=f.getCoordinateSequenceFactory().create(a)),t.call(this,a,f),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Gt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return be.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var a=this._points.copy();return In.reverse(a),this.getFactory().createLinearRing(a)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new S("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new S("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},o.MINIMUM_VALID_SIZE.get=function(){return 4},o.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,o),e}(_n),mi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Gt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var a=arguments[0],f=arguments[1];return!!this.isEquivalentClass(a)&&t.prototype.equalsExact.call(this,a,f)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var f=new Array(this._geometries.length).fill(null),y=0;y<this._geometries.length;y++)f[y]=this._geometries[y].reverse();return this.getFactory().createMultiPolygon(f)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var a=new kt,f=0;f<this._geometries.length;f++)for(var y=this._geometries[f].getBoundary(),x=0;x<y.getNumGeometries();x++)a.add(y.getGeometryN(x));var C=new Array(a.size()).fill(null);return this.getFactory().createMultiLineString(a.toArray(C))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var a=new Array(this._geometries.length).fill(null),f=0;f<a.length;f++)a[f]=this._geometries[f].copy();return new e(a,this._factory)},e.prototype.interfaces_=function(){return[Vi]},e.prototype.getClass=function(){return e},o.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,o),e}(hr),Gr=function(t){this._factory=t||null,this._isUserDataCopied=!1},go={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Gr.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Gr.prototype.edit=function(t,e){if(null===t)return null;var o=this.editInternal(t,e);return this._isUserDataCopied&&o.setUserData(t.getUserData()),o},Gr.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof hr?this.editGeometryCollection(t,e):t instanceof Sn?this.editPolygon(t,e):t instanceof Pr||t instanceof _n?e.edit(t,this._factory):(L.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Gr.prototype.editGeometryCollection=function(t,e){for(var o=e.edit(t,this._factory),a=new kt,f=0;f<o.getNumGeometries();f++){var y=this.edit(o.getGeometryN(f),e);null===y||y.isEmpty()||a.add(y)}return o.getClass()===Ro?this._factory.createMultiPoint(a.toArray([])):o.getClass()===po?this._factory.createMultiLineString(a.toArray([])):o.getClass()===mi?this._factory.createMultiPolygon(a.toArray([])):this._factory.createGeometryCollection(a.toArray([]))},Gr.prototype.editPolygon=function(t,e){var o=e.edit(t,this._factory);if(null===o&&(o=this._factory.createPolygon(null)),o.isEmpty())return o;var a=this.edit(o.getExteriorRing(),e);if(null===a||a.isEmpty())return this._factory.createPolygon();for(var f=new kt,y=0;y<o.getNumInteriorRing();y++){var x=this.edit(o.getInteriorRingN(y),e);null===x||x.isEmpty()||f.add(x)}return this._factory.createPolygon(a,f.toArray([]))},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.GeometryEditorOperation=function(){},go.NoOpGeometryOperation.get=function(){return $o},go.CoordinateOperation.get=function(){return gs},go.CoordinateSequenceOperation.get=function(){return ds},Object.defineProperties(Gr,go);var $o=function(){};$o.prototype.edit=function(t,e){return t},$o.prototype.interfaces_=function(){return[Gr.GeometryEditorOperation]},$o.prototype.getClass=function(){return $o};var gs=function(){};gs.prototype.edit=function(t,e){var o=this.editCoordinates(t.getCoordinates(),t);return null===o?t:t instanceof yi?e.createLinearRing(o):t instanceof _n?e.createLineString(o):t instanceof Pr?o.length>0?e.createPoint(o[0]):e.createPoint():t},gs.prototype.interfaces_=function(){return[Gr.GeometryEditorOperation]},gs.prototype.getClass=function(){return gs};var ds=function(){};ds.prototype.edit=function(t,e){return t instanceof yi?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof _n?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Pr?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ds.prototype.interfaces_=function(){return[Gr.GeometryEditorOperation]},ds.prototype.getClass=function(){return ds};var Pn=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new w}else if(Nt(arguments[0],At)){var o=arguments[0];if(null===o)return this._coordinates=new Array(0).fill(null),null;this._dimension=o.getDimension(),this._coordinates=new Array(o.size()).fill(null);for(var a=0;a<this._coordinates.length;a++)this._coordinates[a]=o.getCoordinateCopy(a)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var f=arguments[0],y=arguments[1];this._coordinates=f,this._dimension=y,null===f&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var x=arguments[0],C=arguments[1];this._coordinates=new Array(x).fill(null),this._dimension=C;for(var B=0;B<x;B++)this._coordinates[B]=new w}},Fs={serialVersionUID:{configurable:!0}};Pn.prototype.setOrdinate=function(t,e,o){switch(e){case At.X:this._coordinates[t].x=o;break;case At.Y:this._coordinates[t].y=o;break;case At.Z:this._coordinates[t].z=o;break;default:throw new S("invalid ordinateIndex")}},Pn.prototype.size=function(){return this._coordinates.length},Pn.prototype.getOrdinate=function(t,e){switch(e){case At.X:return this._coordinates[t].x;case At.Y:return this._coordinates[t].y;case At.Z:return this._coordinates[t].z}return M.NaN},Pn.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var e=arguments[0],o=arguments[1];o.x=this._coordinates[e].x,o.y=this._coordinates[e].y,o.z=this._coordinates[e].z}},Pn.prototype.getCoordinateCopy=function(t){return new w(this._coordinates[t])},Pn.prototype.getDimension=function(){return this._dimension},Pn.prototype.getX=function(t){return this._coordinates[t].x},Pn.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Pn(t,this._dimension)},Pn.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Pn.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Pn(t,this._dimension)},Pn.prototype.toString=function(){if(this._coordinates.length>0){var t=new J(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Pn.prototype.getY=function(t){return this._coordinates[t].y},Pn.prototype.toCoordinateArray=function(){return this._coordinates},Pn.prototype.interfaces_=function(){return[At,F]},Pn.prototype.getClass=function(){return Pn},Fs.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Pn,Fs);var ti=function(){},Do={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ti.prototype.readResolve=function(){return ti.instance()},ti.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Pn(arguments[0]);if(Nt(arguments[0],At))return new Pn(arguments[0])}else if(2===arguments.length){var o=arguments[0],a=arguments[1];return a>3&&(a=3),a<2?new Pn(o):new Pn(o,a)}},ti.prototype.interfaces_=function(){return[K,F]},ti.prototype.getClass=function(){return ti},ti.instance=function(){return ti.instanceObject},Do.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Do.instanceObject.get=function(){return new ti},Object.defineProperties(ti,Do);var ru=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(o){return this.map_.get(o)||null},e.prototype.put=function(o,a){return this.map_.set(o,a),a},e.prototype.values=function(){for(var o=new kt,a=this.map_.values(),f=a.next();!f.done;)o.add(f.value),f=a.next();return o},e.prototype.entrySet=function(){var o=new fs;return this.map_.entries().forEach(function(a){return o.add(a)}),o},e.prototype.size=function(){return this.map_.size()},e}(ho),He=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ei){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var o=arguments[0];this._modelType=t.FIXED,this.setScale(o)}else if(arguments[0]instanceof t){var a=arguments[0];this._modelType=a._modelType,this._scale=a._scale}},da={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};He.prototype.equals=function(t){return t instanceof He&&this._modelType===t._modelType&&this._scale===t._scale},He.prototype.compareTo=function(t){var e=t,o=this.getMaximumSignificantDigits(),a=e.getMaximumSignificantDigits();return new at(o).compareTo(new at(a))},He.prototype.getScale=function(){return this._scale},He.prototype.isFloating=function(){return this._modelType===He.FLOATING||this._modelType===He.FLOATING_SINGLE},He.prototype.getType=function(){return this._modelType},He.prototype.toString=function(){var t="UNKNOWN";return this._modelType===He.FLOATING?t="Floating":this._modelType===He.FLOATING_SINGLE?t="Floating-Single":this._modelType===He.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},He.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return M.isNaN(t)||this._modelType===He.FLOATING_SINGLE?t:this._modelType===He.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof w){var e=arguments[0];if(this._modelType===He.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},He.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===He.FLOATING?t=16:this._modelType===He.FLOATING_SINGLE?t=6:this._modelType===He.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},He.prototype.setScale=function(t){this._scale=Math.abs(t)},He.prototype.interfaces_=function(){return[F,P]},He.prototype.getClass=function(){return He},He.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},da.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},da.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(He,da);var ei=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Ho={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ei.prototype.readResolve=function(){return ei.nameToTypeMap.get(this._name)},ei.prototype.toString=function(){return this._name},ei.prototype.interfaces_=function(){return[F]},ei.prototype.getClass=function(){return ei},Ho.serialVersionUID.get=function(){return-552860263173159e4},Ho.nameToTypeMap.get=function(){return new ru},Object.defineProperties(ei,Ho),He.Type=ei,He.FIXED=new ei("FIXED"),He.FLOATING=new ei("FLOATING"),He.FLOATING_SINGLE=new ei("FLOATING SINGLE");var ve=function t(){this._precisionModel=new He,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Nt(arguments[0],K)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof He&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},iu={serialVersionUID:{configurable:!0}};ve.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new w(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new w(t.getMinX(),t.getMinY()),new w(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new w(t.getMinX(),t.getMinY()),new w(t.getMinX(),t.getMaxY()),new w(t.getMaxX(),t.getMaxY()),new w(t.getMaxX(),t.getMinY()),new w(t.getMinX(),t.getMinY())]),null)},ve.prototype.createLineString=function(t){return t?t instanceof Array?new _n(this.getCoordinateSequenceFactory().create(t),this):Nt(t,At)?new _n(t,this):void 0:new _n(this.getCoordinateSequenceFactory().create([]),this)},ve.prototype.createMultiLineString=function(){return 0===arguments.length?new po(null,this):1===arguments.length?new po(arguments[0],this):void 0},ve.prototype.buildGeometry=function(t){for(var e=null,o=!1,a=!1,f=t.iterator();f.hasNext();){var y=f.next(),x=y.getClass();null===e&&(e=x),x!==e&&(o=!0),y.isGeometryCollectionOrDerived()&&(a=!0)}if(null===e)return this.createGeometryCollection();if(o||a)return this.createGeometryCollection(ve.toGeometryArray(t));var C=t.iterator().next();if(t.size()>1){if(C instanceof Sn)return this.createMultiPolygon(ve.toPolygonArray(t));if(C instanceof _n)return this.createMultiLineString(ve.toLineStringArray(t));if(C instanceof Pr)return this.createMultiPoint(ve.toPointArray(t));L.shouldNeverReachHere("Unhandled class: "+C.getClass().getName())}return C},ve.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ve.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Nt(arguments[0],At))return new Pr(arguments[0],this)}},ve.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ve.prototype.createPolygon=function(){if(0===arguments.length)return new Sn(null,null,this);if(1===arguments.length){if(Nt(arguments[0],At))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof yi)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new Sn(arguments[0],arguments[1],this)},ve.prototype.getSRID=function(){return this._SRID},ve.prototype.createGeometryCollection=function(){return 0===arguments.length?new hr(null,this):1===arguments.length?new hr(arguments[0],this):void 0},ve.prototype.createGeometry=function(t){return new Gr(this).edit(t,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},ve.prototype.getPrecisionModel=function(){return this._precisionModel},ve.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Nt(arguments[0],At))return new yi(arguments[0],this)}},ve.prototype.createMultiPolygon=function(){return 0===arguments.length?new mi(null,this):1===arguments.length?new mi(arguments[0],this):void 0},ve.prototype.createMultiPoint=function(){if(0===arguments.length)return new Ro(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ro(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Nt(arguments[0],At)){var o=arguments[0];if(null===o)return this.createMultiPoint(new Array(0).fill(null));for(var a=new Array(o.size()).fill(null),f=0;f<o.size();f++){var y=this.getCoordinateSequenceFactory().create(1,o.getDimension());In.copy(o,f,y,0,1),a[f]=this.createPoint(y)}return this.createMultiPoint(a)}}},ve.prototype.interfaces_=function(){return[F]},ve.prototype.getClass=function(){return ve},ve.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.getDefaultCoordinateSequenceFactory=function(){return ti.instance()},ve.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},iu.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ve,iu);var ml=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],qs=function(t){this.geometryFactory=t||new ve};qs.prototype.read=function(t){var e,o=(e="string"==typeof t?JSON.parse(t):t).type;if(!ni[o])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ml.indexOf(o)?ni[o].apply(this,[e.coordinates]):ni[o].apply(this,"GeometryCollection"===o?[e.geometries]:[e])},qs.prototype.write=function(t){var e=t.getGeometryType();if(!Li[e])throw new Error("Geometry is not supported");return Li[e].apply(this,[t])};var ni={Feature:function(t){var e={};for(var o in t)e[o]=t[o];if(t.geometry){if(!ni[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ni.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var o=0;o<t.features.length;++o)e.features.push(this.read(t.features[o]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],o=0;o<t.length;++o){var a=t[o];e.push(new w(a[0],a[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new w(t[0],t[1]),new w(t[2],t[1]),new w(t[2],t[3]),new w(t[0],t[3]),new w(t[0],t[1])])},Point:function(t){var e=new w(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],o=0;o<t.length;++o)e.push(ni.Point.apply(this,[t[o]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ni.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],o=0;o<t.length;++o)e.push(ni.LineString.apply(this,[t[o]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ni.coordinates.apply(this,[t[0]]),o=this.geometryFactory.createLinearRing(e),a=[],f=1;f<t.length;++f){var x=ni.coordinates.apply(this,[t[f]]),C=this.geometryFactory.createLinearRing(x);a.push(C)}return this.geometryFactory.createPolygon(o,a)},MultiPolygon:function(t){for(var e=[],o=0;o<t.length;++o)e.push(ni.Polygon.apply(this,[t[o]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],o=0;o<t.length;++o)e.push(this.read(t[o]));return this.geometryFactory.createGeometryCollection(e)}},Li={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Li.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],o=0;o<t._geometries.length;++o){var f=Li.Point.apply(this,[t._geometries[o]]);e.push(f.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],o=t.getCoordinates(),a=0;a<o.length;++a)e.push(Li.coordinate.apply(this,[o[a]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],o=0;o<t._geometries.length;++o){var f=Li.LineString.apply(this,[t._geometries[o]]);e.push(f.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],o=Li.LineString.apply(this,[t._shell]);e.push(o.coordinates);for(var a=0;a<t._holes.length;++a){var y=Li.LineString.apply(this,[t._holes[a]]);e.push(y.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],o=0;o<t._geometries.length;++o){var f=Li.Polygon.apply(this,[t._geometries[o]]);e.push(f.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],o=0;o<t._geometries.length;++o){var a=t._geometries[o],f=a.getGeometryType();e.push(Li[f].apply(this,[a]))}return{type:"GeometryCollection",geometries:e}}},ya=function(t){this.geometryFactory=t||new ve,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new qs(this.geometryFactory)};ya.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===He.FIXED&&this.reducePrecision(e),e},ya.prototype.reducePrecision=function(t){var e,o;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,o=t.points.length;e<o;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,o=t.geometries.length;e<o;e++)this.reducePrecision(t.geometries[e])};var ou=function(){this.parser=new qs(this.geometryFactory)};ou.prototype.write=function(t){return this.parser.write(t)};var Bt=function(){},ks={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt},Bt.opposite=function(t){return t===Bt.LEFT?Bt.RIGHT:t===Bt.RIGHT?Bt.LEFT:t},ks.ON.get=function(){return 0},ks.LEFT.get=function(){return 1},ks.RIGHT.get=function(){return 2},Object.defineProperties(Bt,ks),(et.prototype=new Error).name="EmptyStackException",(pt.prototype=new Xn).add=function(t){return this.array_.push(t),!0},pt.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},pt.prototype.push=function(t){return this.array_.push(t),t},pt.prototype.pop=function(t){if(0===this.array_.length)throw new et;return this.array_.pop()},pt.prototype.peek=function(){if(0===this.array_.length)throw new et;return this.array_[this.array_.length-1]},pt.prototype.empty=function(){return 0===this.array_.length},pt.prototype.isEmpty=function(){return this.empty()},pt.prototype.search=function(t){return this.array_.indexOf(t)},pt.prototype.size=function(){return this.array_.length},pt.prototype.toArray=function(){for(var t=[],e=0,o=this.array_.length;e<o;e++)t.push(this.array_[e]);return t};var vi=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};vi.prototype.getCoordinate=function(){return this._minCoord},vi.prototype.getRightmostSide=function(t,e){var o=this.getRightmostSideOfSegment(t,e);return o<0&&(o=this.getRightmostSideOfSegment(t,e-1)),o<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),o},vi.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();L.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],o=t[this._minIndex+1],a=Mt.computeOrientation(this._minCoord,o,e),f=!1;(e.y<this._minCoord.y&&o.y<this._minCoord.y&&a===Mt.COUNTERCLOCKWISE||e.y>this._minCoord.y&&o.y>this._minCoord.y&&a===Mt.CLOCKWISE)&&(f=!0),f&&(this._minIndex=this._minIndex-1)},vi.prototype.getRightmostSideOfSegment=function(t,e){var o=t.getEdge().getCoordinates();if(e<0||e+1>=o.length||o[e].y===o[e+1].y)return-1;var a=Bt.LEFT;return o[e].y<o[e+1].y&&(a=Bt.RIGHT),a},vi.prototype.getEdge=function(){return this._orientedDe},vi.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),o=0;o<e.length-1;o++)(null===this._minCoord||e[o].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=o,this._minCoord=e[o])},vi.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},vi.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next();o.isForward()&&this.checkForRightmostCoordinate(o)}L.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Bt.LEFT&&(this._orientedDe=this._minDe.getSym())},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi};var Ti=function(t){function e(o,a){t.call(this,e.msgWithCoord(o,a)),this.pt=a?new w(a):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(o,a){return a?o:o+" [ "+a+" ]"},e}(D),Bs=function(){this.array_=[]};Bs.prototype.addLast=function(t){this.array_.push(t)},Bs.prototype.removeFirst=function(){return this.array_.shift()},Bs.prototype.isEmpty=function(){return 0===this.array_.length};var pr=function(){this._finder=null,this._dirEdgeList=new kt,this._nodes=new kt,this._rightMostCoord=null,this._env=null,this._finder=new vi};pr.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},pr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},pr.prototype.computeNodeDepth=function(t){for(var e=null,o=t.getEdges().iterator();o.hasNext();){var a=o.next();if(a.isVisited()||a.getSym().isVisited()){e=a;break}}if(null===e)throw new Ti("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var f=t.getEdges().iterator();f.hasNext();){var y=f.next();y.setVisited(!0),this.copySymDepths(y)}},pr.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Bt.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},pr.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},pr.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Bt.RIGHT)>=1&&e.getDepth(Bt.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},pr.prototype.computeDepths=function(t){var e=new fs,o=new Bs,a=t.getNode();for(o.addLast(a),e.add(a),t.setVisited(!0);!o.isEmpty();){var f=o.removeFirst();e.add(f),this.computeNodeDepth(f);for(var y=f.getEdges().iterator();y.hasNext();){var x=y.next().getSym();if(!x.isVisited()){var C=x.getNode();e.contains(C)||(o.addLast(C),e.add(C))}}}},pr.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},pr.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Zt,e=this._dirEdgeList.iterator();e.hasNext();)for(var o=e.next().getEdge().getCoordinates(),a=0;a<o.length-1;a++)t.expandToInclude(o[a]);this._env=t}return this._env},pr.prototype.addReachable=function(t){var e=new pt;for(e.add(t);!e.empty();){var o=e.pop();this.add(o,e)}},pr.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Bt.LEFT,t.getDepth(Bt.RIGHT)),e.setDepth(Bt.RIGHT,t.getDepth(Bt.LEFT))},pr.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var o=t.getEdges().iterator();o.hasNext();){var a=o.next();this._dirEdgeList.add(a);var f=a.getSym().getNode();f.isVisited()||e.push(f)}},pr.prototype.getNodes=function(){return this._nodes},pr.prototype.getDirectedEdges=function(){return this._dirEdgeList},pr.prototype.interfaces_=function(){return[P]},pr.prototype.getClass=function(){return pr};var cn=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var o=arguments[0];this.init(1),this.location[Bt.ON]=o}else if(arguments[0]instanceof t){var a=arguments[0];if(this.init(a.location.length),null!==a)for(var f=0;f<this.location.length;f++)this.location[f]=a.location[f]}}else if(3===arguments.length){var y=arguments[0],x=arguments[1],C=arguments[2];this.init(3),this.location[Bt.ON]=y,this.location[Bt.LEFT]=x,this.location[Bt.RIGHT]=C}};cn.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},cn.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==R.NONE)return!1;return!0},cn.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===R.NONE&&(this.location[e]=t)},cn.prototype.isLine=function(){return 1===this.location.length},cn.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Bt.ON]=this.location[Bt.ON],e[Bt.LEFT]=R.NONE,e[Bt.RIGHT]=R.NONE,this.location=e}for(var o=0;o<this.location.length;o++)this.location[o]===R.NONE&&o<t.location.length&&(this.location[o]=t.location[o])},cn.prototype.getLocations=function(){return this.location},cn.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Bt.LEFT];this.location[Bt.LEFT]=this.location[Bt.RIGHT],this.location[Bt.RIGHT]=t},cn.prototype.toString=function(){var t=new J;return this.location.length>1&&t.append(R.toLocationSymbol(this.location[Bt.LEFT])),t.append(R.toLocationSymbol(this.location[Bt.ON])),this.location.length>1&&t.append(R.toLocationSymbol(this.location[Bt.RIGHT])),t.toString()},cn.prototype.setLocations=function(t,e,o){this.location[Bt.ON]=t,this.location[Bt.LEFT]=e,this.location[Bt.RIGHT]=o},cn.prototype.get=function(t){return t<this.location.length?this.location[t]:R.NONE},cn.prototype.isArea=function(){return this.location.length>1},cn.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===R.NONE)return!0;return!1},cn.prototype.setLocation=function(){1===arguments.length?this.setLocation(Bt.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},cn.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(R.NONE)},cn.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},cn.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var en=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new cn(e),this.elt[1]=new cn(e)}else if(arguments[0]instanceof t){var o=arguments[0];this.elt[0]=new cn(o.elt[0]),this.elt[1]=new cn(o.elt[1])}}else if(2===arguments.length){var a=arguments[0],f=arguments[1];this.elt[0]=new cn(R.NONE),this.elt[1]=new cn(R.NONE),this.elt[a].setLocation(f)}else if(3===arguments.length){var y=arguments[0],x=arguments[1],C=arguments[2];this.elt[0]=new cn(y,x,C),this.elt[1]=new cn(y,x,C)}else if(4===arguments.length){var B=arguments[0],rt=arguments[1],Et=arguments[2],Pt=arguments[3];this.elt[0]=new cn(R.NONE,R.NONE,R.NONE),this.elt[1]=new cn(R.NONE,R.NONE,R.NONE),this.elt[B].setLocations(rt,Et,Pt)}};en.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},en.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},en.prototype.isNull=function(t){return this.elt[t].isNull()},en.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},en.prototype.isLine=function(t){return this.elt[t].isLine()},en.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new cn(t.elt[e]):this.elt[e].merge(t.elt[e])},en.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},en.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(Bt.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},en.prototype.toString=function(){var t=new J;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},en.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},en.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},en.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(Bt.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},en.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},en.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},en.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new cn(this.elt[t].location[0]))},en.prototype.interfaces_=function(){return[]},en.prototype.getClass=function(){return en},en.toLineLabel=function(t){for(var e=new en(R.NONE),o=0;o<2;o++)e.setLocation(o,t.getLocation(o));return e};var Tn=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new kt,this._pts=new kt,this._label=new en(R.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new kt,this._geometryFactory=null;var t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()};Tn.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Mt.isCCW(this._ring.getCoordinates())},Tn.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Tn.prototype.computePoints=function(t){this._startDe=t;var e=t,o=!0;do{if(null===e)throw new Ti("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ti("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var a=e.getLabel();L.isTrue(a.isArea()),this.mergeLabel(a),this.addPoints(e.getEdge(),e.isForward(),o),o=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Tn.prototype.getLinearRing=function(){return this._ring},Tn.prototype.getCoordinate=function(t){return this._pts.get(t)},Tn.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Tn.prototype.addPoints=function(t,e,o){var a=t.getCoordinates();if(e){var f=1;o&&(f=0);for(var y=f;y<a.length;y++)this._pts.add(a[y])}else{var x=a.length-2;o&&(x=a.length-1);for(var C=x;C>=0;C--)this._pts.add(a[C])}},Tn.prototype.isHole=function(){return this._isHole},Tn.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Tn.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t)||!Mt.isPointInRing(t,e.getCoordinates()))return!1;for(var o=this._holes.iterator();o.hasNext();)if(o.next().containsPoint(t))return!1;return!0},Tn.prototype.addHole=function(t){this._holes.add(t)},Tn.prototype.isShell=function(){return null===this._shell},Tn.prototype.getLabel=function(){return this._label},Tn.prototype.getEdges=function(){return this._edges},Tn.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Tn.prototype.getShell=function(){return this._shell},Tn.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var o=arguments[1],a=arguments[0].getLocation(o,Bt.RIGHT);if(a===R.NONE)return null;if(this._label.getLocation(o)===R.NONE)return this._label.setLocation(o,a),null}},Tn.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Tn.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),o=0;o<this._holes.size();o++)e[o]=this._holes.get(o).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn};var vl=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(o,a){o.setMinEdgeRing(a)},e.prototype.getNext=function(o){return o.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Tn),_l=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var o=new kt,a=this._startDe;do{if(null===a.getMinEdgeRing()){var f=new vl(a,this._geometryFactory);o.add(f)}a=a.getNext()}while(a!==this._startDe);return o},e.prototype.setEdgeRing=function(o,a){o.setEdgeRing(a)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var o=this._startDe;do{o.getNode().getEdges().linkMinimalDirectedEdges(this),o=o.getNext()}while(o!==this._startDe)},e.prototype.getNext=function(o){return o.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Tn),gr=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};gr.prototype.setVisited=function(t){this._isVisited=t},gr.prototype.setInResult=function(t){this._isInResult=t},gr.prototype.isCovered=function(){return this._isCovered},gr.prototype.isCoveredSet=function(){return this._isCoveredSet},gr.prototype.setLabel=function(t){this._label=t},gr.prototype.getLabel=function(){return this._label},gr.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},gr.prototype.updateIM=function(t){L.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},gr.prototype.isInResult=function(){return this._isInResult},gr.prototype.isVisited=function(){return this._isVisited},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr};var Wo=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var a=arguments[1];this._coord=arguments[0],this._edges=a,this._label=new en(0,R.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var o=this.getEdges().getEdges().iterator();o.hasNext();)if(o.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(o){o.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(o){},e.prototype.computeMergedLocation=function(o,a){var f=R.NONE;if(f=this._label.getLocation(a),!o.isNull(a)){var y=o.getLocation(a);f!==R.BOUNDARY&&(f=y)}return f},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var o=arguments[0],a=arguments[1];null===this._label?this._label=new en(o,a):this._label.setLocation(o,a)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof en)for(var a=arguments[0],f=0;f<2;f++){var y=this.computeMergedLocation(a,f);this._label.getLocation(f)===R.NONE&&this._label.setLocation(f,y)}},e.prototype.add=function(o){this._edges.insert(o),o.setNode(this)},e.prototype.setLabelBoundary=function(o){if(null===this._label)return null;var a=R.NONE;null!==this._label&&(a=this._label.getLocation(o));var f=null;switch(a){case R.BOUNDARY:f=R.INTERIOR;break;case R.INTERIOR:default:f=R.BOUNDARY}this._label.setLocation(o,f)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gr),Ur=function(){this.nodeMap=new xt,this.nodeFact=null,this.nodeFact=arguments[0]};Ur.prototype.find=function(t){return this.nodeMap.get(t)},Ur.prototype.addNode=function(){if(arguments[0]instanceof w){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Wo){var o=arguments[0],a=this.nodeMap.get(o.getCoordinate());return null===a?(this.nodeMap.put(o.getCoordinate(),o),o):(a.mergeLabel(o),a)}},Ur.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ur.prototype.iterator=function(){return this.nodeMap.values().iterator()},Ur.prototype.values=function(){return this.nodeMap.values()},Ur.prototype.getBoundaryNodes=function(t){for(var e=new kt,o=this.iterator();o.hasNext();){var a=o.next();a.getLabel().getLocation(t)===R.BOUNDARY&&e.add(a)}return e},Ur.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur};var sn=function(){},Vo={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};sn.prototype.interfaces_=function(){return[]},sn.prototype.getClass=function(){return sn},sn.isNorthern=function(t){return t===sn.NE||t===sn.NW},sn.isOpposite=function(t,e){return t!==e&&(t-e+4)%4==2},sn.commonHalfPlane=function(t,e){if(t===e)return t;if((t-e+4)%4==2)return-1;var o=t<e?t:e;return 0===o&&3===(t>e?t:e)?3:o},sn.isInHalfPlane=function(t,e){return e===sn.SE?t===sn.SE||t===sn.SW:t===e||t===e+1},sn.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new S("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?sn.NE:sn.SE:e>=0?sn.NW:sn.SW}if(arguments[0]instanceof w&&arguments[1]instanceof w){var o=arguments[0],a=arguments[1];if(a.x===o.x&&a.y===o.y)throw new S("Cannot compute the quadrant for two identical points "+o);return a.x>=o.x?a.y>=o.y?sn.NE:sn.SE:a.y>=o.y?sn.NW:sn.SW}},Vo.NE.get=function(){return 0},Vo.NW.get=function(){return 1},Vo.SW.get=function(){return 2},Vo.SE.get=function(){return 3},Object.defineProperties(sn,Vo);var Vn=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var o=arguments[1],a=arguments[2];this._edge=arguments[0],this.init(o,a),this._label=null}else if(4===arguments.length){var y=arguments[1],x=arguments[2],C=arguments[3];this._edge=arguments[0],this.init(y,x),this._label=C}};Vn.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Mt.computeOrientation(t._p0,t._p1,this._p1)},Vn.prototype.getDy=function(){return this._dy},Vn.prototype.getCoordinate=function(){return this._p0},Vn.prototype.setNode=function(t){this._node=t},Vn.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),o=this.getClass().getName(),a=o.lastIndexOf("."),f=o.substring(a+1);t.print("  "+f+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Vn.prototype.compareTo=function(t){return this.compareDirection(t)},Vn.prototype.getDirectedCoordinate=function(){return this._p1},Vn.prototype.getDx=function(){return this._dx},Vn.prototype.getLabel=function(){return this._label},Vn.prototype.getEdge=function(){return this._edge},Vn.prototype.getQuadrant=function(){return this._quadrant},Vn.prototype.getNode=function(){return this._node},Vn.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),o=e.lastIndexOf(".");return"  "+e.substring(o+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Vn.prototype.computeLabel=function(t){},Vn.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=sn.quadrant(this._dx,this._dy),L.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Vn.prototype.interfaces_=function(){return[P]},Vn.prototype.getClass=function(){return Vn};var Zs=function(t){function e(){var o=arguments[0],a=arguments[1];if(t.call(this,o),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=a,a)this.init(o.getCoordinate(0),o.getCoordinate(1));else{var f=o.getNumPoints()-1;this.init(o.getCoordinate(f),o.getCoordinate(f-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(o){return this._depth[o]},e.prototype.setVisited=function(o){this._isVisited=o},e.prototype.computeDirectedLabel=function(){this._label=new en(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(o,a){if(-999!==this._depth[o]&&this._depth[o]!==a)throw new Ti("assigned depths do not match",this.getCoordinate());this._depth[o]=a},e.prototype.isInteriorAreaEdge=function(){for(var o=!0,a=0;a<2;a++)this._label.isArea(a)&&this._label.getLocation(a,Bt.LEFT)===R.INTERIOR&&this._label.getLocation(a,Bt.RIGHT)===R.INTERIOR||(o=!1);return o},e.prototype.setNextMin=function(o){this._nextMin=o},e.prototype.print=function(o){t.prototype.print.call(this,o),o.print(" "+this._depth[Bt.LEFT]+"/"+this._depth[Bt.RIGHT]),o.print(" ("+this.getDepthDelta()+")"),this._isInResult&&o.print(" inResult")},e.prototype.setMinEdgeRing=function(o){this._minEdgeRing=o},e.prototype.isLineEdge=function(){var o=this._label.isLine(0)||this._label.isLine(1),a=!this._label.isArea(0)||this._label.allPositionsEqual(0,R.EXTERIOR),f=!this._label.isArea(1)||this._label.allPositionsEqual(1,R.EXTERIOR);return o&&a&&f},e.prototype.setEdgeRing=function(o){this._edgeRing=o},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var o=this._edge.getDepthDelta();return this._isForward||(o=-o),o},e.prototype.setInResult=function(o){this._isInResult=o},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(o){this.print(o),o.print(" "),this._isForward?this._edge.print(o):this._edge.printReverse(o)},e.prototype.setSym=function(o){this._sym=o},e.prototype.setVisitedEdge=function(o){this.setVisited(o),this._sym.setVisited(o)},e.prototype.setEdgeDepths=function(o,a){var f=this.getEdge().getDepthDelta();this._isForward||(f=-f);var y=1;o===Bt.LEFT&&(y=-1);var x=Bt.opposite(o),C=a+f*y;this.setDepth(o,a),this.setDepth(x,C)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(o){this._next=o},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(o,a){return o===R.EXTERIOR&&a===R.INTERIOR?1:o===R.INTERIOR&&a===R.EXTERIOR?-1:0},e}(Vn),Qi=function(){};Qi.prototype.createNode=function(t){return new Wo(t,null)},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi};var dn=function(){this._edges=new kt,this._nodes=null,this._edgeEndList=new kt,0===arguments.length?this._nodes=new Ur(new Qi):1===arguments.length&&(this._nodes=new Ur(arguments[0]))};dn.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var o=this._edges.get(e);o.print(t),o.eiList.print(t)}},dn.prototype.find=function(t){return this._nodes.find(t)},dn.prototype.addNode=function(){return arguments[0]instanceof Wo||arguments[0]instanceof w?this._nodes.addNode(arguments[0]):void 0},dn.prototype.getNodeIterator=function(){return this._nodes.iterator()},dn.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},dn.prototype.debugPrintln=function(t){Jt.out.println(t)},dn.prototype.isBoundaryNode=function(t,e){var o=this._nodes.find(e);if(null===o)return!1;var a=o.getLabel();return null!==a&&a.getLocation(t)===R.BOUNDARY},dn.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},dn.prototype.matchInSameDirection=function(t,e,o,a){return!!t.equals(o)&&Mt.computeOrientation(t,e,a)===Mt.COLLINEAR&&sn.quadrant(t,e)===sn.quadrant(o,a)},dn.prototype.getEdgeEnds=function(){return this._edgeEndList},dn.prototype.debugPrint=function(t){Jt.out.print(t)},dn.prototype.getEdgeIterator=function(){return this._edges.iterator()},dn.prototype.findEdgeInSameDirection=function(t,e){for(var o=0;o<this._edges.size();o++){var a=this._edges.get(o),f=a.getCoordinates();if(this.matchInSameDirection(t,e,f[0],f[1])||this.matchInSameDirection(t,e,f[f.length-1],f[f.length-2]))return a}return null},dn.prototype.insertEdge=function(t){this._edges.add(t)},dn.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var o=e.next();if(o.getEdge()===t)return o}return null},dn.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next();this._edges.add(o);var a=new Zs(o,!0),f=new Zs(o,!1);a.setSym(f),f.setSym(a),this.add(a),this.add(f)}},dn.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},dn.prototype.getNodes=function(){return this._nodes.values()},dn.prototype.findEdge=function(t,e){for(var o=0;o<this._edges.size();o++){var a=this._edges.get(o),f=a.getCoordinates();if(t.equals(f[0])&&e.equals(f[1]))return a}return null},dn.prototype.interfaces_=function(){return[]},dn.prototype.getClass=function(){return dn},dn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var rr=function(){this._geometryFactory=null,this._shellList=new kt,this._geometryFactory=arguments[0]};rr.prototype.sortShellsAndHoles=function(t,e,o){for(var a=t.iterator();a.hasNext();){var f=a.next();f.isHole()?o.add(f):e.add(f)}},rr.prototype.computePolygons=function(t){for(var e=new kt,o=t.iterator();o.hasNext();){var a=o.next().toPolygon(this._geometryFactory);e.add(a)}return e},rr.prototype.placeFreeHoles=function(t,e){for(var o=e.iterator();o.hasNext();){var a=o.next();if(null===a.getShell()){var f=this.findEdgeRingContaining(a,t);if(null===f)throw new Ti("unable to assign hole to a shell",a.getCoordinate(0));a.setShell(f)}}},rr.prototype.buildMinimalEdgeRings=function(t,e,o){for(var a=new kt,f=t.iterator();f.hasNext();){var y=f.next();if(y.getMaxNodeDegree()>2){y.linkDirectedEdgesForMinimalEdgeRings();var x=y.buildMinimalRings(),C=this.findShell(x);null!==C?(this.placePolygonHoles(C,x),e.add(C)):o.addAll(x)}else a.add(y)}return a},rr.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},rr.prototype.buildMaximalEdgeRings=function(t){for(var e=new kt,o=t.iterator();o.hasNext();){var a=o.next();if(a.isInResult()&&a.getLabel().isArea()&&null===a.getEdgeRing()){var f=new _l(a,this._geometryFactory);e.add(f),f.setInResult()}}return e},rr.prototype.placePolygonHoles=function(t,e){for(var o=e.iterator();o.hasNext();){var a=o.next();a.isHole()&&a.setShell(t)}},rr.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},rr.prototype.findEdgeRingContaining=function(t,e){for(var o=t.getLinearRing(),a=o.getEnvelopeInternal(),f=o.getCoordinateN(0),y=null,x=null,C=e.iterator();C.hasNext();){var B=C.next(),rt=B.getLinearRing(),Et=rt.getEnvelopeInternal();null!==y&&(x=y.getLinearRing().getEnvelopeInternal());var Pt=!1;Et.contains(a)&&Mt.isPointInRing(f,rt.getCoordinates())&&(Pt=!0),Pt&&(null===y||x.contains(Et))&&(y=B)}return y},rr.prototype.findShell=function(t){for(var e=0,o=null,a=t.iterator();a.hasNext();){var f=a.next();f.isHole()||(o=f,e++)}return L.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),o},rr.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];dn.linkResultDirectedEdges(arguments[1]);var a=this.buildMaximalEdgeRings(e),f=new kt,y=this.buildMinimalEdgeRings(a,this._shellList,f);this.sortShellsAndHoles(y,this._shellList,f),this.placeFreeHoles(this._shellList,f)}},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr};var Qo=function(){};Qo.prototype.getBounds=function(){},Qo.prototype.interfaces_=function(){return[]},Qo.prototype.getClass=function(){return Qo};var zr=function(){this._bounds=null,this._item=null;var e=arguments[1];this._bounds=arguments[0],this._item=e};zr.prototype.getItem=function(){return this._item},zr.prototype.getBounds=function(){return this._bounds},zr.prototype.interfaces_=function(){return[Qo,F]},zr.prototype.getClass=function(){return zr};var _i=function(){this._size=null,this._items=null,this._size=0,this._items=new kt,this._items.add(null)};_i.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},_i.prototype.size=function(){return this._size},_i.prototype.reorder=function(t){for(var e=null,o=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(o)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,o)},_i.prototype.clear=function(){this._size=0,this._items.clear()},_i.prototype.isEmpty=function(){return 0===this._size},_i.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};var Ai=function(){};Ai.prototype.visitItem=function(t){},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai};var yo=function(){};yo.prototype.insert=function(t,e){},yo.prototype.remove=function(t,e){},yo.prototype.query=function(){},yo.prototype.interfaces_=function(){return[]},yo.prototype.getClass=function(){return yo};var Dn=function(){this._childBoundables=new kt,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},su={serialVersionUID:{configurable:!0}};Dn.prototype.getLevel=function(){return this._level},Dn.prototype.size=function(){return this._childBoundables.size()},Dn.prototype.getChildBoundables=function(){return this._childBoundables},Dn.prototype.addChildBoundable=function(t){L.isTrue(null===this._bounds),this._childBoundables.add(t)},Dn.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Dn.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Dn.prototype.interfaces_=function(){return[Qo,F]},Dn.prototype.getClass=function(){return Dn},su.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Dn,su);var ri=function(){};ri.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},ri.min=function(t){return ri.sort(t),t.get(0)},ri.sort=function(t,e){var o=t.toArray();e?Wi.sort(o,e):Wi.sort(o);for(var a=t.iterator(),f=0,y=o.length;f<y;f++)a.next(),a.set(o[f])},ri.singletonList=function(t){var e=new kt;return e.add(t),e};var Nn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[1],o=arguments[2];this._boundable1=arguments[0],this._boundable2=e,this._itemDistance=o,this._distance=this.distance()};Nn.prototype.expandToQueue=function(t,e){var o=Nn.isComposite(this._boundable1),a=Nn.isComposite(this._boundable2);if(o&&a)return Nn.area(this._boundable1)>Nn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(o)return this.expand(this._boundable1,this._boundable2,t,e),null;if(a)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new S("neither boundable is composite")},Nn.prototype.isLeaves=function(){return!(Nn.isComposite(this._boundable1)||Nn.isComposite(this._boundable2))},Nn.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},Nn.prototype.expand=function(t,e,o,a){for(var f=t.getChildBoundables().iterator();f.hasNext();){var y=f.next(),x=new Nn(y,e,this._itemDistance);x.getDistance()<a&&o.add(x)}},Nn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Nn.prototype.getDistance=function(){return this._distance},Nn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Nn.prototype.interfaces_=function(){return[P]},Nn.prototype.getClass=function(){return Nn},Nn.area=function(t){return t.getBounds().getArea()},Nn.isComposite=function(t){return t instanceof Dn};var Bn=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new kt,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=t.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var o=arguments[0];L.isTrue(o>1,"Node capacity must be greater than 1"),this._nodeCapacity=o}},Gs={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Bn.prototype.getNodeCapacity=function(){return this._nodeCapacity},Bn.prototype.lastNode=function(t){return t.get(t.size()-1)},Bn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var o=e.next();o instanceof Dn?t+=this.size(o):o instanceof zr&&(t+=1)}return t}},Bn.prototype.removeItem=function(t,e){for(var o=null,a=t.getChildBoundables().iterator();a.hasNext();){var f=a.next();f instanceof zr&&f.getItem()===e&&(o=f)}return null!==o&&(t.getChildBoundables().remove(o),!0)},Bn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new kt:t}if(1===arguments.length){for(var e=arguments[0],o=new kt,a=e.getChildBoundables().iterator();a.hasNext();){var f=a.next();if(f instanceof Dn){var y=this.itemsTree(f);null!==y&&o.add(y)}else f instanceof zr?o.add(f.getItem()):L.shouldNeverReachHere()}return o.size()<=0?null:o}},Bn.prototype.insert=function(t,e){L.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new zr(t,e))},Bn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new kt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var o=arguments[0],a=arguments[1],f=arguments[2];if(L.isTrue(o>-2),a.getLevel()===o)return f.add(a),null;for(var y=a.getChildBoundables().iterator();y.hasNext();){var x=y.next();x instanceof Dn?this.boundablesAtLevel(o,x,f):(L.isTrue(x instanceof zr),-1===o&&f.add(x))}return null}},Bn.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new kt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var o=arguments[0],a=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),o)&&this.query(o,this._root,a)}else if(3===arguments.length)if(Nt(arguments[2],Ai)&&arguments[0]instanceof Object&&arguments[1]instanceof Dn)for(var f=arguments[0],x=arguments[2],C=arguments[1].getChildBoundables(),B=0;B<C.size();B++){var rt=C.get(B);this.getIntersectsOp().intersects(rt.getBounds(),f)&&(rt instanceof Dn?this.query(f,rt,x):rt instanceof zr?x.visitItem(rt.getItem()):L.shouldNeverReachHere())}else if(Nt(arguments[2],Xn)&&arguments[0]instanceof Object&&arguments[1]instanceof Dn)for(var Et=arguments[0],Ut=arguments[2],Yt=arguments[1].getChildBoundables(),$t=0;$t<Yt.size();$t++){var ne=Yt.get($t);this.getIntersectsOp().intersects(ne.getBounds(),Et)&&(ne instanceof Dn?this.query(Et,ne,Ut):ne instanceof zr?Ut.add(ne.getItem()):L.shouldNeverReachHere())}},Bn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Bn.prototype.getRoot=function(){return this.build(),this._root},Bn.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var o=arguments[0],a=arguments[1],f=arguments[2],y=this.removeItem(a,f);if(y)return!0;for(var x=null,C=a.getChildBoundables().iterator();C.hasNext();){var B=C.next();if(this.getIntersectsOp().intersects(B.getBounds(),o)&&B instanceof Dn&&(y=this.remove(o,B,f))){x=B;break}}return null!==x&&x.getChildBoundables().isEmpty()&&a.getChildBoundables().remove(x),y}},Bn.prototype.createHigherLevels=function(t,e){L.isTrue(!t.isEmpty());var o=this.createParentBoundables(t,e+1);return 1===o.size()?o.get(0):this.createHigherLevels(o,e+1)},Bn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var o=e.next();if(o instanceof Dn){var a=this.depth(o);a>t&&(t=a)}}return t+1}},Bn.prototype.createParentBoundables=function(t,e){L.isTrue(!t.isEmpty());var o=new kt;o.add(this.createNode(e));var a=new kt(t);ri.sort(a,this.getComparator());for(var f=a.iterator();f.hasNext();){var y=f.next();this.lastNode(o).getChildBoundables().size()===this.getNodeCapacity()&&o.add(this.createNode(e)),this.lastNode(o).addChildBoundable(y)}return o},Bn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Bn.prototype.interfaces_=function(){return[F]},Bn.prototype.getClass=function(){return Bn},Bn.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Gs.IntersectsOp.get=function(){return xl},Gs.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Gs.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Bn,Gs);var xl=function(){},Ko=function(){};Ko.prototype.distance=function(t,e){},Ko.prototype.interfaces_=function(){return[]},Ko.prototype.getClass=function(){return Ko};var au=function(t){function e(a){t.call(this,a=a||e.DEFAULT_NODE_CAPACITY)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(a,f){L.isTrue(a.length>0);for(var y=new kt,x=0;x<a.length;x++)y.addAll(this.createParentBoundablesFromVerticalSlice(a[x],f));return y},e.prototype.createNode=function(a){return new uu(a)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var a=arguments[0],f=arguments[1];if(a.isNull())return null;t.prototype.insert.call(this,a,f)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(a,f){for(var y=Math.trunc(Math.ceil(a.size()/f)),x=new Array(f).fill(null),C=a.iterator(),B=0;B<f;B++){x[B]=new kt;for(var rt=0;C.hasNext()&&rt<y;){var Et=C.next();x[B].add(Et),rt++}}return x},e.prototype.query=function(){if(1===arguments.length)return t.prototype.query.call(this,arguments[0]);2===arguments.length?t.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(Nt(arguments[2],Ai)&&arguments[0]instanceof Object&&arguments[1]instanceof Dn||Nt(arguments[2],Xn)&&arguments[0]instanceof Object&&arguments[1]instanceof Dn)&&t.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(a,f){return t.prototype.createParentBoundables.call(this,a,f)},e.prototype.remove=function(){return 2===arguments.length?t.prototype.remove.call(this,arguments[0],arguments[1]):t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(a,f){L.isTrue(!a.isEmpty());var y=Math.trunc(Math.ceil(a.size()/this.getNodeCapacity())),x=new kt(a);ri.sort(x,e.xComparator);var C=this.verticalSlices(x,Math.trunc(Math.ceil(Math.sqrt(y))));return this.createParentBoundablesFromVerticalSlices(C,f)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Nt(arguments[0],Ko)){var a=arguments[0],f=new Nn(this.getRoot(),this.getRoot(),a);return this.nearestNeighbour(f)}if(arguments[0]instanceof Nn)return this.nearestNeighbour(arguments[0],M.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof e&&Nt(arguments[1],Ko)){var x=arguments[0],C=arguments[1],B=new Nn(this.getRoot(),x.getRoot(),C);return this.nearestNeighbour(B)}if(arguments[0]instanceof Nn&&"number"==typeof arguments[1]){var rt=arguments[0],Et=arguments[1],Pt=null,Ut=new _i;for(Ut.add(rt);!Ut.isEmpty()&&Et>0;){var Yt=Ut.poll(),$t=Yt.getDistance();if($t>=Et)break;Yt.isLeaves()?(Et=$t,Pt=Yt):Yt.expandToQueue(Ut,Et)}return[Pt.getBoundable(0).getItem(),Pt.getBoundable(1).getItem()]}}else if(3===arguments.length){var wn=arguments[2],lr=new zr(arguments[0],arguments[1]),Si=new Nn(this.getRoot(),lr,wn);return this.nearestNeighbour(Si)[0]}},e.prototype.interfaces_=function(){return[yo,F]},e.prototype.getClass=function(){return e},e.centreX=function(a){return e.avg(a.getMinX(),a.getMaxX())},e.avg=function(a,f){return(a+f)/2},e.centreY=function(a){return e.avg(a.getMinY(),a.getMaxY())},o.STRtreeNode.get=function(){return uu},o.serialVersionUID.get=function(){return 0x39920f7d5f261e0},o.xComparator.get=function(){return{interfaces_:function(){return[O]},compare:function(a,f){return t.compareDoubles(e.centreX(a.getBounds()),e.centreX(f.getBounds()))}}},o.yComparator.get=function(){return{interfaces_:function(){return[O]},compare:function(a,f){return t.compareDoubles(e.centreY(a.getBounds()),e.centreY(f.getBounds()))}}},o.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(a,f){return a.intersects(f)}}},o.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,o),e}(Bn),uu=function(t){function e(){t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var o=null,a=this.getChildBoundables().iterator();a.hasNext();){var f=a.next();null===o?o=new Zt(f.getBounds()):o.expandToInclude(f.getBounds())}return o},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dn),dr=function(){};dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},dr.relativeSign=function(t,e){return t<e?-1:t>e?1:0},dr.compare=function(t,e,o){if(e.equals2D(o))return 0;var a=dr.relativeSign(e.x,o.x),f=dr.relativeSign(e.y,o.y);switch(t){case 0:return dr.compareValue(a,f);case 1:return dr.compareValue(f,a);case 2:return dr.compareValue(f,-a);case 3:return dr.compareValue(-a,f);case 4:return dr.compareValue(-a,-f);case 5:return dr.compareValue(-f,-a);case 6:return dr.compareValue(-f,a);case 7:return dr.compareValue(a,-f)}return L.shouldNeverReachHere("invalid octant value"),0},dr.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Ki=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],o=arguments[2],a=arguments[3];this._segString=t,this.coord=new w(e),this.segmentIndex=o,this._segmentOctant=a,this._isInterior=!e.equals2D(t.getCoordinate(o))};Ki.prototype.getCoordinate=function(){return this.coord},Ki.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Ki.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:dr.compare(this._segmentOctant,this.coord,e.coord)},Ki.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Ki.prototype.isInterior=function(){return this._isInterior},Ki.prototype.interfaces_=function(){return[P]},Ki.prototype.getClass=function(){return Ki};var ir=function(){this._nodeMap=new xt,this._edge=null,this._edge=arguments[0]};ir.prototype.getSplitCoordinates=function(){var t=new Wr;this.addEndpoints();for(var e=this.iterator(),o=e.next();e.hasNext();){var a=e.next();this.addEdgeCoordinates(o,a,t),o=a}return t.toCoordinateArray()},ir.prototype.addCollapsedNodes=function(){var t=new kt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var o=e.next().intValue();this.add(this._edge.getCoordinate(o),o)}},ir.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ir.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var o=this._edge.getCoordinate(e),a=this._edge.getCoordinate(e+2);o.equals2D(a)&&t.add(new at(e+1))}},ir.prototype.addEdgeCoordinates=function(t,e,o){var a=this._edge.getCoordinate(e.segmentIndex),f=e.isInterior()||!e.coord.equals2D(a);o.add(new w(t.coord),!1);for(var y=t.segmentIndex+1;y<=e.segmentIndex;y++)o.add(this._edge.getCoordinate(y));f&&o.add(new w(e.coord))},ir.prototype.iterator=function(){return this._nodeMap.values().iterator()},ir.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),o=e.next();e.hasNext();){var a=e.next(),f=this.createSplitEdge(o,a);t.add(f),o=a}},ir.prototype.findCollapseIndex=function(t,e,o){if(!t.coord.equals2D(e.coord))return!1;var a=e.segmentIndex-t.segmentIndex;return e.isInterior()||a--,1===a&&(o[0]=t.segmentIndex+1,!0)},ir.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),o=this.iterator(),a=o.next();o.hasNext();){var f=o.next();this.findCollapseIndex(a,f,e)&&t.add(new at(e[0])),a=f}},ir.prototype.getEdge=function(){return this._edge},ir.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ir.prototype.createSplitEdge=function(t,e){var o=e.segmentIndex-t.segmentIndex+2,a=this._edge.getCoordinate(e.segmentIndex),f=e.isInterior()||!e.coord.equals2D(a);f||o--;var y=new Array(o).fill(null),x=0;y[x++]=new w(t.coord);for(var C=t.segmentIndex+1;C<=e.segmentIndex;C++)y[x++]=this._edge.getCoordinate(C);return f&&(y[x]=new w(e.coord)),new Mn(y,this._edge.getData())},ir.prototype.add=function(t,e){var o=new Ki(this._edge,t,e,this._edge.getSegmentOctant(e)),a=this._nodeMap.get(o);return null!==a?(L.isTrue(a.coord.equals2D(t),"Found equal nodes with different coordinates"),a):(this._nodeMap.put(o,o),o)},ir.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),o=t.get(0).getCoordinate(0);if(!o.equals2D(e[0]))throw new D("bad split edge start point at "+o);var a=t.get(t.size()-1).getCoordinates(),f=a[a.length-1];if(!f.equals2D(e[e.length-1]))throw new D("bad split edge end point at "+f)},ir.prototype.interfaces_=function(){return[]},ir.prototype.getClass=function(){return ir};var mo=function(){};mo.prototype.interfaces_=function(){return[]},mo.prototype.getClass=function(){return mo},mo.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new S("Cannot compute the octant for point ( "+t+", "+e+" )");var o=Math.abs(t),a=Math.abs(e);return t>=0?e>=0?o>=a?0:1:o>=a?7:6:e>=0?o>=a?3:2:o>=a?4:5}if(arguments[0]instanceof w&&arguments[1]instanceof w){var f=arguments[0],y=arguments[1],x=y.x-f.x,C=y.y-f.y;if(0===x&&0===C)throw new S("Cannot compute the octant for two identical points "+f);return mo.octant(x,C)}};var xi=function(){};xi.prototype.getCoordinates=function(){},xi.prototype.size=function(){},xi.prototype.getCoordinate=function(t){},xi.prototype.isClosed=function(){},xi.prototype.setData=function(t){},xi.prototype.getData=function(){},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi};var ys=function(){};ys.prototype.addIntersection=function(t,e){},ys.prototype.interfaces_=function(){return[xi]},ys.prototype.getClass=function(){return ys};var Mn=function(){this._nodeList=new ir(this),this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e};Mn.prototype.getCoordinates=function(){return this._pts},Mn.prototype.size=function(){return this._pts.length},Mn.prototype.getCoordinate=function(t){return this._pts[t]},Mn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Mn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Mn.prototype.setData=function(t){this._data=t},Mn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:mo.octant(t,e)},Mn.prototype.getData=function(){return this._data},Mn.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var a=arguments[1],y=new w(arguments[0].getIntersection(arguments[3]));this.addIntersection(y,a)}},Mn.prototype.toString=function(){return dt.toLineString(new Pn(this._pts))},Mn.prototype.getNodeList=function(){return this._nodeList},Mn.prototype.addIntersectionNode=function(t,e){var o=e,a=o+1;return a<this._pts.length&&t.equals2D(this._pts[a])&&(o=a),this._nodeList.add(t,o)},Mn.prototype.addIntersections=function(t,e,o){for(var a=0;a<t.getIntersectionNum();a++)this.addIntersection(t,e,o,a)},Mn.prototype.interfaces_=function(){return[ys]},Mn.prototype.getClass=function(){return Mn},Mn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new kt;return Mn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var a=arguments[1],f=arguments[0].iterator();f.hasNext();)f.next().getNodeList().addSplitEdges(a)};var Kt=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new w,this.p1=new w;else if(1===arguments.length){var t=arguments[0];this.p0=new w(t.p0),this.p1=new w(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var a=arguments[2],f=arguments[3];this.p0=new w(arguments[0],arguments[1]),this.p1=new w(a,f)}},lu={serialVersionUID:{configurable:!0}};Kt.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Kt.prototype.orientationIndex=function(){if(arguments[0]instanceof Kt){var t=arguments[0],e=Mt.orientationIndex(this.p0,this.p1,t.p0),o=Mt.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&o>=0||e<=0&&o<=0?Math.max(e,o):0}if(arguments[0]instanceof w)return Mt.orientationIndex(this.p0,this.p1,arguments[0])},Kt.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Kt.prototype.isVertical=function(){return this.p0.x===this.p1.x},Kt.prototype.equals=function(t){if(!(t instanceof Kt))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Kt.prototype.intersection=function(t){var e=new Ct;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Kt.prototype.project=function(){if(arguments[0]instanceof w){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new w(t);var e=this.projectionFactor(t),o=new w;return o.x=this.p0.x+e*(this.p1.x-this.p0.x),o.y=this.p0.y+e*(this.p1.y-this.p0.y),o}if(arguments[0]instanceof Kt){var a=arguments[0],f=this.projectionFactor(a.p0),y=this.projectionFactor(a.p1);if(f>=1&&y>=1||f<=0&&y<=0)return null;var x=this.project(a.p0);f<0&&(x=this.p0),f>1&&(x=this.p1);var C=this.project(a.p1);return y<0&&(C=this.p0),y>1&&(C=this.p1),new Kt(x,C)}},Kt.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Kt.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Kt.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Kt.prototype.distancePerpendicular=function(t){return Mt.distancePointLinePerpendicular(t,this.p0,this.p1)},Kt.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Kt.prototype.midPoint=function(){return Kt.midPoint(this.p0,this.p1)},Kt.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=e*e+o*o;return a<=0?M.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*o)/a},Kt.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var o=new Array(2).fill(null),a=M.MAX_VALUE,f=null,y=this.closestPoint(t.p0);a=y.distance(t.p0),o[0]=y,o[1]=t.p0;var x=this.closestPoint(t.p1);(f=x.distance(t.p1))<a&&(a=f,o[0]=x,o[1]=t.p1);var C=t.closestPoint(this.p0);(f=C.distance(this.p0))<a&&(a=f,o[0]=this.p0,o[1]=C);var B=t.closestPoint(this.p1);return(f=B.distance(this.p1))<a&&(a=f,o[0]=this.p1,o[1]=B),o},Kt.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Kt.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Kt.prototype.getLength=function(){return this.p0.distance(this.p1)},Kt.prototype.compareTo=function(t){var e=t,o=this.p0.compareTo(e.p0);return 0!==o?o:this.p1.compareTo(e.p1)},Kt.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Kt.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Kt.prototype.lineIntersection=function(t){try{return Wt.intersection(this.p0,this.p1,t.p0,t.p1)}catch(e){if(!(e instanceof ue))throw e}return null},Kt.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Kt.prototype.pointAlongOffset=function(t,e){var o=this.p0.x+t*(this.p1.x-this.p0.x),a=this.p0.y+t*(this.p1.y-this.p0.y),f=this.p1.x-this.p0.x,y=this.p1.y-this.p0.y,x=Math.sqrt(f*f+y*y),C=0,B=0;if(0!==e){if(x<=0)throw new Error("Cannot compute offset from zero-length line segment");C=e*f/x,B=e*y/x}return new w(o-B,a+C)},Kt.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],o=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=o.x,this.p1.y=o.y}},Kt.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||M.isNaN(e))&&(e=1),e},Kt.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Kt.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Kt.prototype.distance=function(){if(arguments[0]instanceof Kt){var t=arguments[0];return Mt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof w)return Mt.distancePointLine(arguments[0],this.p0,this.p1)},Kt.prototype.pointAlong=function(t){var e=new w;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Kt.prototype.hashCode=function(){var t=M.doubleToLongBits(this.p0.x);t^=31*M.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),o=M.doubleToLongBits(this.p1.x);return o^=31*M.doubleToLongBits(this.p1.y),e^Math.trunc(o)^Math.trunc(o>>32)},Kt.prototype.interfaces_=function(){return[P,F]},Kt.prototype.getClass=function(){return Kt},Kt.midPoint=function(t,e){return new w((t.x+e.x)/2,(t.y+e.y)/2)},lu.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Kt,lu);var ms=function(){this.tempEnv1=new Zt,this.tempEnv2=new Zt,this._overlapSeg1=new Kt,this._overlapSeg2=new Kt};ms.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var o=arguments[2],a=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),o.getLineSegment(a,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},ms.prototype.interfaces_=function(){return[]},ms.prototype.getClass=function(){return ms};var xr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[1],o=arguments[2],a=arguments[3];this._pts=arguments[0],this._start=e,this._end=o,this._context=a};xr.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},xr.prototype.computeSelect=function(t,e,o,a){if(a.tempEnv1.init(this._pts[e],this._pts[o]),o-e==1)return a.select(this,e),null;if(!t.intersects(a.tempEnv1))return null;var x=Math.trunc((e+o)/2);e<x&&this.computeSelect(t,e,x,a),x<o&&this.computeSelect(t,x,o,a)},xr.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,o=this._start;o<=this._end;o++)t[e++]=this._pts[o];return t},xr.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},xr.prototype.setId=function(t){this._id=t},xr.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},xr.prototype.getEnvelope=function(){return null===this._env&&(this._env=new Zt(this._pts[this._start],this._pts[this._end])),this._env},xr.prototype.getEndIndex=function(){return this._end},xr.prototype.getStartIndex=function(){return this._start},xr.prototype.getContext=function(){return this._context},xr.prototype.getId=function(){return this._id},xr.prototype.computeOverlapsInternal=function(t,e,o,a,f,y){var x=this._pts[t],C=this._pts[e],B=o._pts[a],rt=o._pts[f];if(e-t==1&&f-a==1)return y.overlap(this,t,o,a),null;if(y.tempEnv1.init(x,C),y.tempEnv2.init(B,rt),!y.tempEnv1.intersects(y.tempEnv2))return null;var Et=Math.trunc((t+e)/2),Pt=Math.trunc((a+f)/2);t<Et&&(a<Pt&&this.computeOverlapsInternal(t,Et,o,a,Pt,y),Pt<f&&this.computeOverlapsInternal(t,Et,o,Pt,f,y)),Et<e&&(a<Pt&&this.computeOverlapsInternal(Et,e,o,a,Pt,y),Pt<f&&this.computeOverlapsInternal(Et,e,o,Pt,f,y))},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr};var ii=function(){};ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.getChainStartIndices=function(t){var e=0,o=new kt;o.add(new at(e));do{var a=ii.findChainEnd(t,e);o.add(new at(a)),e=a}while(e<t.length-1);return ii.toIntArray(o)},ii.findChainEnd=function(t,e){for(var o=e;o<t.length-1&&t[o].equals2D(t[o+1]);)o++;if(o>=t.length-1)return t.length-1;for(var a=sn.quadrant(t[o],t[o+1]),f=e+1;f<t.length&&(t[f-1].equals2D(t[f])||sn.quadrant(t[f-1],t[f])===a);)f++;return f-1},ii.getChains=function(){if(1===arguments.length)return ii.getChains(arguments[0],null);if(2===arguments.length){for(var e=arguments[0],o=arguments[1],a=new kt,f=ii.getChainStartIndices(e),y=0;y<f.length-1;y++){var x=new xr(e,f[y],f[y+1],o);a.add(x)}return a}},ii.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),o=0;o<e.length;o++)e[o]=t.get(o).intValue();return e};var vo=function(){};vo.prototype.computeNodes=function(t){},vo.prototype.getNodedSubstrings=function(){},vo.prototype.interfaces_=function(){return[]},vo.prototype.getClass=function(){return vo};var vs=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};vs.prototype.setSegmentIntersector=function(t){this._segInt=t},vs.prototype.interfaces_=function(){return[vo]},vs.prototype.getClass=function(){return vs};var Us=function(t){function e(a){a?t.call(this,a):t.call(this),this._monoChains=new kt,this._index=new au,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Mn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(a){for(var f=ii.getChains(a.getCoordinates(),a).iterator();f.hasNext();){var y=f.next();y.setId(this._idCounter++),this._index.insert(y.getEnvelope(),y),this._monoChains.add(y)}},e.prototype.computeNodes=function(a){this._nodedSegStrings=a;for(var f=a.iterator();f.hasNext();)this.add(f.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var a=new zs(this._segInt),f=this._monoChains.iterator();f.hasNext();)for(var y=f.next(),x=this._index.query(y.getEnvelope()).iterator();x.hasNext();){var C=x.next();if(C.getId()>y.getId()&&(y.computeOverlaps(C,a),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},o.SegmentOverlapAction.get=function(){return zs},Object.defineProperties(e,o),e}(vs),zs=function(t){function e(){t.call(this),this._si=null,this._si=arguments[0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var a=arguments[1],f=arguments[2],y=arguments[3],x=arguments[0].getContext(),C=f.getContext();this._si.processIntersections(x,a,C,y)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ms),We=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var a=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(a)}else if(4===arguments.length){var y=arguments[1],x=arguments[2],C=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(y),this.setJoinStyle(x),this.setMitreLimit(C)}},Gi={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};We.prototype.getEndCapStyle=function(){return this._endCapStyle},We.prototype.isSingleSided=function(){return this._isSingleSided},We.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=We.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=We.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==We.JOIN_ROUND&&(this._quadrantSegments=We.DEFAULT_QUADRANT_SEGMENTS)},We.prototype.getJoinStyle=function(){return this._joinStyle},We.prototype.setJoinStyle=function(t){this._joinStyle=t},We.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},We.prototype.getSimplifyFactor=function(){return this._simplifyFactor},We.prototype.getQuadrantSegments=function(){return this._quadrantSegments},We.prototype.setEndCapStyle=function(t){this._endCapStyle=t},We.prototype.getMitreLimit=function(){return this._mitreLimit},We.prototype.setMitreLimit=function(t){this._mitreLimit=t},We.prototype.setSingleSided=function(t){this._isSingleSided=t},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We},We.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Gi.CAP_ROUND.get=function(){return 1},Gi.CAP_FLAT.get=function(){return 2},Gi.CAP_SQUARE.get=function(){return 3},Gi.JOIN_ROUND.get=function(){return 1},Gi.JOIN_MITRE.get=function(){return 2},Gi.JOIN_BEVEL.get=function(){return 3},Gi.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Gi.DEFAULT_MITRE_LIMIT.get=function(){return 5},Gi.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(We,Gi);var mn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Mt.COUNTERCLOCKWISE,this._inputLine=t||null},_s={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};mn.prototype.isDeletable=function(t,e,o,a){var f=this._inputLine[t],y=this._inputLine[e],x=this._inputLine[o];return!!this.isConcave(f,y,x)&&!!this.isShallow(f,y,x,a)&&this.isShallowSampled(f,y,t,o,a)},mn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),o=this.findNextNonDeletedIndex(e),a=!1;o<this._inputLine.length;){var f=!1;this.isDeletable(t,e,o,this._distanceTol)&&(this._isDeleted[e]=mn.DELETE,f=!0,a=!0),e=this.findNextNonDeletedIndex(t=f?o:e),o=this.findNextNonDeletedIndex(e)}return a},mn.prototype.isShallowConcavity=function(t,e,o,a){return Mt.computeOrientation(t,e,o)===this._angleOrientation&&Mt.distancePointLine(e,t,o)<a},mn.prototype.isShallowSampled=function(t,e,o,a,f){var y=Math.trunc((a-o)/mn.NUM_PTS_TO_CHECK);y<=0&&(y=1);for(var x=o;x<a;x+=y)if(!this.isShallow(t,e,this._inputLine[x],f))return!1;return!0},mn.prototype.isConcave=function(t,e,o){return Mt.computeOrientation(t,e,o)===this._angleOrientation},mn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Mt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},mn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===mn.DELETE;)e++;return e},mn.prototype.isShallow=function(t,e,o,a){return Mt.distancePointLine(e,t,o)<a},mn.prototype.collapseLine=function(){for(var t=new Wr,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==mn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn.simplify=function(t,e){return new mn(t).simplify(e)},_s.INIT.get=function(){return 0},_s.DELETE.get=function(){return 1},_s.KEEP.get=function(){return 1},_s.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(mn,_s);var Ar=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new kt},cu={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ar.prototype.getCoordinates=function(){return this._ptList.toArray(Ar.COORDINATE_ARRAY_TYPE)},Ar.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ar.prototype.addPt=function(t){var e=new w(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Ar.prototype.revere=function(){},Ar.prototype.addPts=function(t,e){if(e)for(var o=0;o<t.length;o++)this.addPt(t[o]);else for(var a=t.length-1;a>=0;a--)this.addPt(t[a])},Ar.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Ar.prototype.toString=function(){return(new ve).createLineString(this.getCoordinates()).toString()},Ar.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new w(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Ar.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},cu.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ar,cu);var Ee=function(){},Fo={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ee.prototype.interfaces_=function(){return[]},Ee.prototype.getClass=function(){return Ee},Ee.toDegrees=function(t){return 180*t/Math.PI},Ee.normalize=function(t){for(;t>Math.PI;)t-=Ee.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ee.PI_TIMES_2;return t},Ee.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],o=arguments[1];return Math.atan2(o.y-e.y,o.x-e.x)}},Ee.isAcute=function(t,e,o){return(t.x-e.x)*(o.x-e.x)+(t.y-e.y)*(o.y-e.y)>0},Ee.isObtuse=function(t,e,o){return(t.x-e.x)*(o.x-e.x)+(t.y-e.y)*(o.y-e.y)<0},Ee.interiorAngle=function(t,e,o){var a=Ee.angle(e,t),f=Ee.angle(e,o);return Math.abs(f-a)},Ee.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ee.PI_TIMES_2;t>=Ee.PI_TIMES_2&&(t=0)}else{for(;t>=Ee.PI_TIMES_2;)t-=Ee.PI_TIMES_2;t<0&&(t=0)}return t},Ee.angleBetween=function(t,e,o){var a=Ee.angle(e,t),f=Ee.angle(e,o);return Ee.diff(a,f)},Ee.diff=function(t,e){var o=null;return(o=t<e?e-t:t-e)>Math.PI&&(o=2*Math.PI-o),o},Ee.toRadians=function(t){return t*Math.PI/180},Ee.getTurn=function(t,e){var o=Math.sin(e-t);return o>0?Ee.COUNTERCLOCKWISE:o<0?Ee.CLOCKWISE:Ee.NONE},Ee.angleBetweenOriented=function(t,e,o){var a=Ee.angle(e,t),f=Ee.angle(e,o)-a;return f<=-Math.PI?f+Ee.PI_TIMES_2:f>Math.PI?f-Ee.PI_TIMES_2:f},Fo.PI_TIMES_2.get=function(){return 2*Math.PI},Fo.PI_OVER_2.get=function(){return Math.PI/2},Fo.PI_OVER_4.get=function(){return Math.PI/4},Fo.COUNTERCLOCKWISE.get=function(){return Mt.COUNTERCLOCKWISE},Fo.CLOCKWISE.get=function(){return Mt.CLOCKWISE},Fo.NONE.get=function(){return Mt.COLLINEAR},Object.defineProperties(Ee,Fo);var gn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Kt,this._seg1=new Kt,this._offset0=new Kt,this._offset1=new Kt,this._side=0,this._hasNarrowConcaveAngle=!1;var o=arguments[1],a=arguments[2];this._precisionModel=arguments[0],this._bufParams=o,this._li=new Ct,this._filletAngleQuantum=Math.PI/2/o.getQuadrantSegments(),o.getQuadrantSegments()>=8&&o.getJoinStyle()===We.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(a)},xs={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};gn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var o=Mt.computeOrientation(this._s0,this._s1,this._s2),a=o===Mt.CLOCKWISE&&this._side===Bt.LEFT||o===Mt.COUNTERCLOCKWISE&&this._side===Bt.RIGHT;0===o?this.addCollinear(e):a?this.addOutsideTurn(o,e):this.addInsideTurn(o,e)},gn.prototype.addLineEndCap=function(t,e){var o=new Kt(t,e),a=new Kt;this.computeOffsetSegment(o,Bt.LEFT,this._distance,a);var f=new Kt;this.computeOffsetSegment(o,Bt.RIGHT,this._distance,f);var C=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case We.CAP_ROUND:this._segList.addPt(a.p1),this.addFilletArc(e,C+Math.PI/2,C-Math.PI/2,Mt.CLOCKWISE,this._distance),this._segList.addPt(f.p1);break;case We.CAP_FLAT:this._segList.addPt(a.p1),this._segList.addPt(f.p1);break;case We.CAP_SQUARE:var B=new w;B.x=Math.abs(this._distance)*Math.cos(C),B.y=Math.abs(this._distance)*Math.sin(C);var rt=new w(a.p1.x+B.x,a.p1.y+B.y),Et=new w(f.p1.x+B.x,f.p1.y+B.y);this._segList.addPt(rt),this._segList.addPt(Et)}},gn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},gn.prototype.addMitreJoin=function(t,e,o,a){var f=!0,y=null;try{y=Wt.intersection(e.p0,e.p1,o.p0,o.p1),(a<=0?1:y.distance(t)/Math.abs(a))>this._bufParams.getMitreLimit()&&(f=!1)}catch(x){if(!(x instanceof ue))throw x;y=new w(0,0),f=!1}f?this._segList.addPt(y):this.addLimitedMitreJoin(e,o,a,this._bufParams.getMitreLimit())},gn.prototype.addFilletCorner=function(t,e,o,a,f){var C=Math.atan2(e.y-t.y,e.x-t.x),Et=Math.atan2(o.y-t.y,o.x-t.x);a===Mt.CLOCKWISE?C<=Et&&(C+=2*Math.PI):C>=Et&&(C-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,C,Et,a,f),this._segList.addPt(o)},gn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*gn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===We.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===We.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},gn.prototype.createSquare=function(t){this._segList.addPt(new w(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new w(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},gn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},gn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},gn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},gn.prototype.initSideSegments=function(t,e,o){this._s1=t,this._s2=e,this._side=o,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,o,this._distance,this._offset1)},gn.prototype.addLimitedMitreJoin=function(t,e,o,a){var f=this._seg0.p1,y=Ee.angle(f,this._seg0.p0),x=Ee.angleBetweenOriented(this._seg0.p0,f,this._seg1.p1)/2,C=Ee.normalize(y+x),B=Ee.normalize(C+Math.PI),rt=a*o,Et=o-rt*Math.abs(Math.sin(x)),Pt=f.x+rt*Math.cos(B),Ut=f.y+rt*Math.sin(B),Yt=new w(Pt,Ut),$t=new Kt(f,Yt),ne=$t.pointAlongOffset(1,Et),nn=$t.pointAlongOffset(1,-Et);this._side===Bt.LEFT?(this._segList.addPt(ne),this._segList.addPt(nn)):(this._segList.addPt(nn),this._segList.addPt(ne))},gn.prototype.computeOffsetSegment=function(t,e,o,a){var f=e===Bt.LEFT?1:-1,y=t.p1.x-t.p0.x,x=t.p1.y-t.p0.y,C=Math.sqrt(y*y+x*x),B=f*o*y/C,rt=f*o*x/C;a.p0.x=t.p0.x-rt,a.p0.y=t.p0.y+B,a.p1.x=t.p1.x-rt,a.p1.y=t.p1.y+B},gn.prototype.addFilletArc=function(t,e,o,a,f){var y=a===Mt.CLOCKWISE?-1:1,x=Math.abs(e-o),C=Math.trunc(x/this._filletAngleQuantum+.5);if(C<1)return null;for(var B=x/C,rt=0,Et=new w;rt<x;){var Pt=e+y*rt;Et.x=t.x+f*Math.cos(Pt),Et.y=t.y+f*Math.sin(Pt),this._segList.addPt(Et),rt+=B}},gn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*gn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var o=new w((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(o);var a=new w((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(a)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},gn.prototype.createCircle=function(t){var e=new w(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},gn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},gn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ar,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*gn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},gn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===We.JOIN_BEVEL||this._bufParams.getJoinStyle()===We.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Mt.CLOCKWISE,this._distance))},gn.prototype.closeRing=function(){this._segList.closeRing()},gn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn},xs.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},xs.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},xs.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},xs.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(gn,xs);var or=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[1];this._precisionModel=arguments[0],this._bufParams=e};or.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var o=e<0,a=Math.abs(e),f=this.getSegGen(a);t.length<=1?this.computePointCurve(t[0],f):this.computeOffsetCurve(t,o,f);var y=f.getCoordinates();return o&&pe.reverse(y),y},or.prototype.computeSingleSidedBufferCurve=function(t,e,o){var a=this.simplifyTolerance(this._distance);if(e){o.addSegments(t,!0);var f=mn.simplify(t,-a),y=f.length-1;o.initSideSegments(f[y],f[y-1],Bt.LEFT),o.addFirstSegment();for(var x=y-2;x>=0;x--)o.addNextSegment(f[x],!0)}else{o.addSegments(t,!1);var C=mn.simplify(t,a),B=C.length-1;o.initSideSegments(C[0],C[1],Bt.LEFT),o.addFirstSegment();for(var rt=2;rt<=B;rt++)o.addNextSegment(C[rt],!0)}o.addLastSegment(),o.closeRing()},or.prototype.computeRingBufferCurve=function(t,e,o){var a=this.simplifyTolerance(this._distance);e===Bt.RIGHT&&(a=-a);var f=mn.simplify(t,a),y=f.length-1;o.initSideSegments(f[y-1],f[0],e);for(var x=1;x<=y;x++)o.addNextSegment(f[x],1!==x);o.closeRing()},or.prototype.computeLineBufferCurve=function(t,e){var o=this.simplifyTolerance(this._distance),a=mn.simplify(t,o),f=a.length-1;e.initSideSegments(a[0],a[1],Bt.LEFT);for(var y=2;y<=f;y++)e.addNextSegment(a[y],!0);e.addLastSegment(),e.addLineEndCap(a[f-1],a[f]);var x=mn.simplify(t,-o),C=x.length-1;e.initSideSegments(x[C],x[C-1],Bt.LEFT);for(var B=C-2;B>=0;B--)e.addNextSegment(x[B],!0);e.addLastSegment(),e.addLineEndCap(x[1],x[0]),e.closeRing()},or.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case We.CAP_ROUND:e.createCircle(t);break;case We.CAP_SQUARE:e.createSquare(t)}},or.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided()||0===e)return null;var o=Math.abs(e),a=this.getSegGen(o);return t.length<=1?this.computePointCurve(t[0],a):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,a):this.computeLineBufferCurve(t,a),a.getCoordinates()},or.prototype.getBufferParameters=function(){return this._bufParams},or.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},or.prototype.getRingCurve=function(t,e,o){if(this._distance=o,t.length<=2)return this.getLineCurve(t,o);if(0===o)return or.copyCoordinates(t);var a=this.getSegGen(o);return this.computeRingBufferCurve(t,e,a),a.getCoordinates()},or.prototype.computeOffsetCurve=function(t,e,o){var a=this.simplifyTolerance(this._distance);if(e){var f=mn.simplify(t,-a),y=f.length-1;o.initSideSegments(f[y],f[y-1],Bt.LEFT),o.addFirstSegment();for(var x=y-2;x>=0;x--)o.addNextSegment(f[x],!0)}else{var C=mn.simplify(t,a),B=C.length-1;o.initSideSegments(C[0],C[1],Bt.LEFT),o.addFirstSegment();for(var rt=2;rt<=B;rt++)o.addNextSegment(C[rt],!0)}o.addLastSegment()},or.prototype.getSegGen=function(t){return new gn(this._precisionModel,this._bufParams,t)},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),o=0;o<e.length;o++)e[o]=new w(t[o]);return e};var _o=function(){this._subgraphs=null,this._seg=new Kt,this._cga=new Mt,this._subgraphs=arguments[0]},fu={DepthSegment:{configurable:!0}};_o.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new kt,o=this._subgraphs.iterator();o.hasNext();){var a=o.next(),f=a.getEnvelope();t.y<f.getMinY()||t.y>f.getMaxY()||this.findStabbedSegments(t,a.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Nt(arguments[2],Xn)&&arguments[0]instanceof w&&arguments[1]instanceof Zs){for(var y=arguments[0],x=arguments[1],C=arguments[2],B=x.getEdge().getCoordinates(),rt=0;rt<B.length-1;rt++)if(this._seg.p0=B[rt],this._seg.p1=B[rt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<y.x||this._seg.isHorizontal()||y.y<this._seg.p0.y||y.y>this._seg.p1.y||Mt.computeOrientation(this._seg.p0,this._seg.p1,y)===Mt.RIGHT)){var Et=x.getDepth(Bt.LEFT);this._seg.p0.equals(B[rt])||(Et=x.getDepth(Bt.RIGHT));var Pt=new xo(this._seg,Et);C.add(Pt)}}else if(Nt(arguments[2],Xn)&&arguments[0]instanceof w&&Nt(arguments[1],Xn))for(var Ut=arguments[0],$t=arguments[2],ne=arguments[1].iterator();ne.hasNext();){var nn=ne.next();nn.isForward()&&this.findStabbedSegments(Ut,nn,$t)}},_o.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:ri.min(e)._leftDepth},_o.prototype.interfaces_=function(){return[]},_o.prototype.getClass=function(){return _o},fu.DepthSegment.get=function(){return xo},Object.defineProperties(_o,fu);var xo=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[1];this._upwardSeg=new Kt(arguments[0]),this._leftDepth=e};xo.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var o=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==o||0!=(o=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?o:this._upwardSeg.compareTo(e._upwardSeg)},xo.prototype.compareX=function(t,e){var o=t.p0.compareTo(e.p0);return 0!==o?o:t.p1.compareTo(e.p1)},xo.prototype.toString=function(){return this._upwardSeg.toString()},xo.prototype.interfaces_=function(){return[P]},xo.prototype.getClass=function(){return xo};var Ve=function(t,e,o){this.p0=t||null,this.p1=e||null,this.p2=o||null};Ve.prototype.area=function(){return Ve.area(this.p0,this.p1,this.p2)},Ve.prototype.signedArea=function(){return Ve.signedArea(this.p0,this.p1,this.p2)},Ve.prototype.interpolateZ=function(t){if(null===t)throw new S("Supplied point is null.");return Ve.interpolateZ(t,this.p0,this.p1,this.p2)},Ve.prototype.longestSideLength=function(){return Ve.longestSideLength(this.p0,this.p1,this.p2)},Ve.prototype.isAcute=function(){return Ve.isAcute(this.p0,this.p1,this.p2)},Ve.prototype.circumcentre=function(){return Ve.circumcentre(this.p0,this.p1,this.p2)},Ve.prototype.area3D=function(){return Ve.area3D(this.p0,this.p1,this.p2)},Ve.prototype.centroid=function(){return Ve.centroid(this.p0,this.p1,this.p2)},Ve.prototype.inCentre=function(){return Ve.inCentre(this.p0,this.p1,this.p2)},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.area=function(t,e,o){return Math.abs(((o.x-t.x)*(e.y-t.y)-(e.x-t.x)*(o.y-t.y))/2)},Ve.signedArea=function(t,e,o){return((o.x-t.x)*(e.y-t.y)-(e.x-t.x)*(o.y-t.y))/2},Ve.det=function(t,e,o,a){return t*a-e*o},Ve.interpolateZ=function(t,e,o,a){var f=e.x,y=e.y,x=o.x-f,C=a.x-f,B=o.y-y,rt=a.y-y,Et=x*rt-C*B,Pt=t.x-f,Ut=t.y-y;return e.z+(rt*Pt-C*Ut)/Et*(o.z-e.z)+(-B*Pt+x*Ut)/Et*(a.z-e.z)},Ve.longestSideLength=function(t,e,o){var a=t.distance(e),f=e.distance(o),y=o.distance(t),x=a;return f>x&&(x=f),y>x&&(x=y),x},Ve.isAcute=function(t,e,o){return!!Ee.isAcute(t,e,o)&&!!Ee.isAcute(e,o,t)&&!!Ee.isAcute(o,t,e)},Ve.circumcentre=function(t,e,o){var a=o.x,f=o.y,y=t.x-a,x=t.y-f,C=e.x-a,B=e.y-f,rt=2*Ve.det(y,x,C,B),Et=Ve.det(x,y*y+x*x,B,C*C+B*B),Pt=Ve.det(y,y*y+x*x,C,C*C+B*B);return new w(a-Et/rt,f+Pt/rt)},Ve.perpendicularBisector=function(t,e){var o=e.x-t.x,a=e.y-t.y,f=new Wt(t.x+o/2,t.y+a/2,1),y=new Wt(t.x-a+o/2,t.y+o+a/2,1);return new Wt(f,y)},Ve.angleBisector=function(t,e,o){var a=e.distance(t),f=a/(a+e.distance(o));return new w(t.x+f*(o.x-t.x),t.y+f*(o.y-t.y))},Ve.area3D=function(t,e,o){var a=e.x-t.x,f=e.y-t.y,y=e.z-t.z,x=o.x-t.x,C=o.y-t.y,B=o.z-t.z,rt=f*B-y*C,Et=y*x-a*B,Pt=a*C-f*x;return Math.sqrt(rt*rt+Et*Et+Pt*Pt)/2},Ve.centroid=function(t,e,o){return new w((t.x+e.x+o.x)/3,(t.y+e.y+o.y)/3)},Ve.inCentre=function(t,e,o){var a=e.distance(o),f=t.distance(o),y=t.distance(e),x=a+f+y;return new w((a*t.x+f*e.x+y*o.x)/x,(a*t.y+f*e.y+y*o.y)/x)};var Yr=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new kt;var e=arguments[1],o=arguments[2];this._inputGeom=arguments[0],this._distance=e,this._curveBuilder=o};Yr.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),o=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(o,R.EXTERIOR,R.INTERIOR)},Yr.prototype.addPolygon=function(t){var e=this._distance,o=Bt.LEFT;this._distance<0&&(e=-this._distance,o=Bt.RIGHT);var a=t.getExteriorRing(),f=pe.removeRepeatedPoints(a.getCoordinates());if(this._distance<0&&this.isErodedCompletely(a,this._distance)||this._distance<=0&&f.length<3)return null;this.addPolygonRing(f,e,o,R.EXTERIOR,R.INTERIOR);for(var y=0;y<t.getNumInteriorRing();y++){var x=t.getInteriorRingN(y),C=pe.removeRepeatedPoints(x.getCoordinates());this._distance>0&&this.isErodedCompletely(x,-this._distance)||this.addPolygonRing(C,e,Bt.opposite(o),R.INTERIOR,R.EXTERIOR)}},Yr.prototype.isTriangleErodedCompletely=function(t,e){var o=new Ve(t[0],t[1],t[2]),a=o.inCentre();return Mt.distancePointLine(a,o.p0,o.p1)<Math.abs(e)},Yr.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=pe.removeRepeatedPoints(t.getCoordinates()),o=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(o,R.EXTERIOR,R.INTERIOR)},Yr.prototype.addCurve=function(t,e,o){if(null===t||t.length<2)return null;var a=new Mn(t,new en(0,R.BOUNDARY,e,o));this._curveList.add(a)},Yr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Yr.prototype.addPolygonRing=function(t,e,o,a,f){if(0===e&&t.length<yi.MINIMUM_VALID_SIZE)return null;var y=a,x=f;t.length>=yi.MINIMUM_VALID_SIZE&&Mt.isCCW(t)&&(y=f,x=a,o=Bt.opposite(o));var C=this._curveBuilder.getRingCurve(t,o,e);this.addCurve(C,y,x)},Yr.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Sn?this.addPolygon(t):t instanceof _n?this.addLineString(t):t instanceof Pr?this.addPoint(t):(t instanceof Ro||t instanceof po||t instanceof mi||t instanceof hr)&&this.addCollection(t)},Yr.prototype.isErodedCompletely=function(t,e){var o=t.getCoordinates();if(o.length<4)return e<0;if(4===o.length)return this.isTriangleErodedCompletely(o,e);var a=t.getEnvelopeInternal(),f=Math.min(a.getHeight(),a.getWidth());return e<0&&2*Math.abs(e)>f},Yr.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var o=t.getGeometryN(e);this.add(o)}},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr};var qo=function(){};qo.prototype.locate=function(t){},qo.prototype.interfaces_=function(){return[]},qo.prototype.getClass=function(){return qo};var Ei=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Ei.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ei.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new I;var t=this._parent.getGeometryN(this._index++);return t instanceof hr?(this._subcollectionIterator=new Ei(t),this._subcollectionIterator.next()):t},Ei.prototype.remove=function(){throw new Error(this.getClass().getName())},Ei.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ei.prototype.interfaces_=function(){return[Tr]},Ei.prototype.getClass=function(){return Ei},Ei.isAtomic=function(t){return!(t instanceof hr)};var Nr=function(){this._geom=null,this._geom=arguments[0]};Nr.prototype.locate=function(t){return Nr.locate(t,this._geom)},Nr.prototype.interfaces_=function(){return[qo]},Nr.prototype.getClass=function(){return Nr},Nr.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Mt.isPointInRing(t,e.getCoordinates())},Nr.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var o=e.getExteriorRing();if(!Nr.isPointInRing(t,o))return!1;for(var a=0;a<e.getNumInteriorRing();a++){var f=e.getInteriorRingN(a);if(Nr.isPointInRing(t,f))return!1}return!0},Nr.containsPoint=function(t,e){if(e instanceof Sn)return Nr.containsPointInPolygon(t,e);if(e instanceof hr)for(var o=new Ei(e);o.hasNext();){var a=o.next();if(a!==e&&Nr.containsPoint(t,a))return!0}return!1},Nr.locate=function(t,e){return e.isEmpty()?R.EXTERIOR:Nr.containsPoint(t,e)?R.INTERIOR:R.EXTERIOR};var sr=function(){this._edgeMap=new xt,this._edgeList=null,this._ptInAreaLocation=[R.NONE,R.NONE]};sr.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),o=e-1;return 0===e&&(o=this._edgeList.size()-1),this._edgeList.get(o)},sr.prototype.propagateSideLabels=function(t){for(var e=R.NONE,o=this.iterator();o.hasNext();){var a=o.next().getLabel();a.isArea(t)&&a.getLocation(t,Bt.LEFT)!==R.NONE&&(e=a.getLocation(t,Bt.LEFT))}if(e===R.NONE)return null;for(var f=e,y=this.iterator();y.hasNext();){var x=y.next(),C=x.getLabel();if(C.getLocation(t,Bt.ON)===R.NONE&&C.setLocation(t,Bt.ON,f),C.isArea(t)){var B=C.getLocation(t,Bt.LEFT),rt=C.getLocation(t,Bt.RIGHT);if(rt!==R.NONE){if(rt!==f)throw new Ti("side location conflict",x.getCoordinate());B===R.NONE&&L.shouldNeverReachHere("found single null side (at "+x.getCoordinate()+")"),f=B}else L.isTrue(C.getLocation(t,Bt.LEFT)===R.NONE,"found single null side"),C.setLocation(t,Bt.RIGHT,f),C.setLocation(t,Bt.LEFT,f)}}},sr.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},sr.prototype.print=function(t){Jt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},sr.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},sr.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var o=e.size()-1,a=e.get(o).getLabel().getLocation(t,Bt.LEFT);L.isTrue(a!==R.NONE,"Found unlabelled area edge");for(var f=a,y=this.iterator();y.hasNext();){var x=y.next().getLabel();L.isTrue(x.isArea(t),"Found non-area edge");var C=x.getLocation(t,Bt.LEFT),B=x.getLocation(t,Bt.RIGHT);if(C===B||B!==f)return!1;f=C}return!0},sr.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},sr.prototype.iterator=function(){return this.getEdges().iterator()},sr.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new kt(this._edgeMap.values())),this._edgeList},sr.prototype.getLocation=function(t,e,o){return this._ptInAreaLocation[t]===R.NONE&&(this._ptInAreaLocation[t]=Nr.locate(e,o[t].getGeometry())),this._ptInAreaLocation[t]},sr.prototype.toString=function(){var t=new J;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var o=e.next();t.append(o),t.append("\n")}return t.toString()},sr.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},sr.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],o=this.iterator();o.hasNext();)for(var a=o.next().getLabel(),f=0;f<2;f++)a.isLine(f)&&a.getLocation(f)===R.BOUNDARY&&(e[f]=!0);for(var y=this.iterator();y.hasNext();)for(var x=y.next(),C=x.getLabel(),B=0;B<2;B++)if(C.isAnyNull(B)){var rt=R.NONE;if(e[B])rt=R.EXTERIOR;else{var Et=x.getCoordinate();rt=this.getLocation(B,Et,t)}C.setAllLocationsIfNull(B,rt)}},sr.prototype.getDegree=function(){return this._edgeMap.size()},sr.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};var El=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var o=null,a=null,f=this._SCANNING_FOR_INCOMING,y=0;y<this._resultAreaEdgeList.size();y++){var x=this._resultAreaEdgeList.get(y),C=x.getSym();if(x.getLabel().isArea())switch(null===o&&x.isInResult()&&(o=x),f){case this._SCANNING_FOR_INCOMING:if(!C.isInResult())continue;a=C,f=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!x.isInResult())continue;a.setNext(x),f=this._SCANNING_FOR_INCOMING}}if(f===this._LINKING_TO_OUTGOING){if(null===o)throw new Ti("no outgoing dirEdge found",this.getCoordinate());L.isTrue(o.isInResult(),"unable to link last incoming dirEdge"),a.setNext(o)}},e.prototype.insert=function(o){this.insertEdgeEnd(o,o)},e.prototype.getRightmostEdge=function(){var o=this.getEdges(),a=o.size();if(a<1)return null;var f=o.get(0);if(1===a)return f;var y=o.get(a-1),x=f.getQuadrant(),C=y.getQuadrant();return sn.isNorthern(x)&&sn.isNorthern(C)?f:sn.isNorthern(x)||sn.isNorthern(C)?0!==f.getDy()?f:0!==y.getDy()?y:(L.shouldNeverReachHere("found two horizontal edges incident on node"),null):y},e.prototype.print=function(o){Jt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var a=this.iterator();a.hasNext();){var f=a.next();o.print("out "),f.print(o),o.println(),o.print("in "),f.getSym().print(o),o.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new kt;for(var o=this.iterator();o.hasNext();){var a=o.next();(a.isInResult()||a.getSym().isInResult())&&this._resultAreaEdgeList.add(a)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(o){for(var a=this.iterator();a.hasNext();){var f=a.next().getLabel();f.setAllLocationsIfNull(0,o.getLocation(0)),f.setAllLocationsIfNull(1,o.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var o=null,a=null,f=this._edgeList.size()-1;f>=0;f--){var y=this._edgeList.get(f),x=y.getSym();null===a&&(a=x),null!==o&&x.setNext(o),o=y}a.setNext(o)},e.prototype.computeDepths=function(){if(1===arguments.length){var o=arguments[0],a=this.findIndex(o),f=o.getDepth(Bt.LEFT),y=o.getDepth(Bt.RIGHT),x=this.computeDepths(a+1,this._edgeList.size(),f);if(this.computeDepths(0,a,x)!==y)throw new Ti("depth mismatch at "+o.getCoordinate())}else if(3===arguments.length){for(var B=arguments[1],rt=arguments[2],Et=arguments[0];Et<B;Et++){var Pt=this._edgeList.get(Et);Pt.setEdgeDepths(Bt.RIGHT,rt),rt=Pt.getDepth(Bt.LEFT)}return rt}},e.prototype.mergeSymLabels=function(){for(var o=this.iterator();o.hasNext();){var a=o.next();a.getLabel().merge(a.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(o){for(var a=null,f=null,y=this._SCANNING_FOR_INCOMING,x=this._resultAreaEdgeList.size()-1;x>=0;x--){var C=this._resultAreaEdgeList.get(x),B=C.getSym();switch(null===a&&C.getEdgeRing()===o&&(a=C),y){case this._SCANNING_FOR_INCOMING:if(B.getEdgeRing()!==o)continue;f=B,y=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(C.getEdgeRing()!==o)continue;f.setNextMin(C),y=this._SCANNING_FOR_INCOMING}}y===this._LINKING_TO_OUTGOING&&(L.isTrue(null!==a,"found null for first outgoing dirEdge"),L.isTrue(a.getEdgeRing()===o,"unable to link last incoming dirEdge"),f.setNextMin(a))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var o=0,a=this.iterator();a.hasNext();)a.next().isInResult()&&o++;return o}if(1===arguments.length){for(var f=arguments[0],y=0,x=this.iterator();x.hasNext();)x.next().getEdgeRing()===f&&y++;return y}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var o=R.NONE,a=this.iterator();a.hasNext();){var f=a.next(),y=f.getSym();if(!f.isLineEdge()){if(f.isInResult()){o=R.INTERIOR;break}if(y.isInResult()){o=R.EXTERIOR;break}}}if(o===R.NONE)return null;for(var x=o,C=this.iterator();C.hasNext();){var B=C.next(),rt=B.getSym();B.isLineEdge()?B.getEdge().setCovered(x===R.INTERIOR):(B.isInResult()&&(x=R.EXTERIOR),rt.isInResult()&&(x=R.INTERIOR))}},e.prototype.computeLabelling=function(o){t.prototype.computeLabelling.call(this,o),this._label=new en(R.NONE);for(var a=this.iterator();a.hasNext();)for(var f=a.next().getEdge().getLabel(),y=0;y<2;y++){var x=f.getLocation(y);x!==R.INTERIOR&&x!==R.BOUNDARY||this._label.setLocation(y,R.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(sr),hu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(o){return new Wo(o,new El)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qi),Oi=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Oi.prototype.compareTo=function(t){return Oi.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Oi.prototype.interfaces_=function(){return[P]},Oi.prototype.getClass=function(){return Oi},Oi.orientation=function(t){return 1===pe.increasingDirection(t)},Oi.compareOriented=function(t,e,o,a){for(var f=e?1:-1,y=a?1:-1,x=e?t.length:-1,C=a?o.length:-1,B=e?0:t.length-1,rt=a?0:o.length-1;;){var Et=t[B].compareTo(o[rt]);if(0!==Et)return Et;var Pt=(B+=f)===x,Ut=(rt+=y)===C;if(Pt&&!Ut)return-1;if(!Pt&&Ut)return 1;if(Pt&&Ut)return 0}};var oi=function(){this._edges=new kt,this._ocaMap=new xt};oi.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var o=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var a=o.getCoordinates(),f=0;f<a.length;f++)f>0&&t.print(","),t.print(a[f].x+" "+a[f].y);t.println(")")}t.print(")  ")},oi.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},oi.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},oi.prototype.iterator=function(){return this._edges.iterator()},oi.prototype.getEdges=function(){return this._edges},oi.prototype.get=function(t){return this._edges.get(t)},oi.prototype.findEqualEdge=function(t){var e=new Oi(t.getCoordinates());return this._ocaMap.get(e)},oi.prototype.add=function(t){this._edges.add(t);var e=new Oi(t.getCoordinates());this._ocaMap.put(e,t)},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi};var Eo=function(){};Eo.prototype.processIntersections=function(t,e,o,a){},Eo.prototype.isDone=function(){},Eo.prototype.interfaces_=function(){return[]},Eo.prototype.getClass=function(){return Eo};var Or=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};Or.prototype.isTrivialIntersection=function(t,e,o,a){if(t===o&&1===this._li.getIntersectionNum()){if(Or.isAdjacentSegments(e,a))return!0;if(t.isClosed()){var f=t.size()-1;if(0===e&&a===f||0===a&&e===f)return!0}}return!1},Or.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Or.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Or.prototype.getLineIntersector=function(){return this._li},Or.prototype.hasProperIntersection=function(){return this._hasProper},Or.prototype.processIntersections=function(t,e,o,a){if(t===o&&e===a)return null;this.numTests++;var f=t.getCoordinates()[e],y=t.getCoordinates()[e+1],x=o.getCoordinates()[a],C=o.getCoordinates()[a+1];this._li.computeIntersection(f,y,x,C),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,o,a)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),o.addIntersections(this._li,a,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Or.prototype.hasIntersection=function(){return this._hasIntersection},Or.prototype.isDone=function(){return!1},Or.prototype.hasInteriorIntersection=function(){return this._hasInterior},Or.prototype.interfaces_=function(){return[Eo]},Or.prototype.getClass=function(){return Or},Or.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var wi=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[1],o=arguments[2];this.coord=new w(arguments[0]),this.segmentIndex=e,this.dist=o};wi.prototype.getSegmentIndex=function(){return this.segmentIndex},wi.prototype.getCoordinate=function(){return this.coord},wi.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},wi.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},wi.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},wi.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},wi.prototype.getDistance=function(){return this.dist},wi.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},wi.prototype.interfaces_=function(){return[P]},wi.prototype.getClass=function(){return wi};var bi=function(){this._nodeMap=new xt,this.edge=null,this.edge=arguments[0]};bi.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},bi.prototype.iterator=function(){return this._nodeMap.values().iterator()},bi.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),o=e.next();e.hasNext();){var a=e.next(),f=this.createSplitEdge(o,a);t.add(f),o=a}},bi.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},bi.prototype.createSplitEdge=function(t,e){var o=e.segmentIndex-t.segmentIndex+2,f=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);f||o--;var y=new Array(o).fill(null),x=0;y[x++]=new w(t.coord);for(var C=t.segmentIndex+1;C<=e.segmentIndex;C++)y[x++]=this.edge.pts[C];return f&&(y[x]=e.coord),new ko(y,new en(this.edge._label))},bi.prototype.add=function(t,e,o){var a=new wi(t,e,o),f=this._nodeMap.get(a);return null!==f?f:(this._nodeMap.put(a,a),a)},bi.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},bi.prototype.interfaces_=function(){return[]},bi.prototype.getClass=function(){return bi};var wo=function(){};wo.prototype.getChainStartIndices=function(t){var e=0,o=new kt;o.add(new at(e));do{var a=this.findChainEnd(t,e);o.add(new at(a)),e=a}while(e<t.length-1);return wo.toIntArray(o)},wo.prototype.findChainEnd=function(t,e){for(var o=sn.quadrant(t[e],t[e+1]),a=e+1;a<t.length&&sn.quadrant(t[a-1],t[a])===o;)a++;return a-1},wo.prototype.interfaces_=function(){return[]},wo.prototype.getClass=function(){return wo},wo.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),o=0;o<e.length;o++)e[o]=t.get(o).intValue();return e};var Ui=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Zt,this.env2=new Zt;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new wo;this.startIndex=e.getChainStartIndices(this.pts)};Ui.prototype.getCoordinates=function(){return this.pts},Ui.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,o=this.pts[this.startIndex[t+1]].x;return e>o?e:o},Ui.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,o=this.pts[this.startIndex[t+1]].x;return e<o?e:o},Ui.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],o=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[o],e.startIndex[o+1],arguments[3])}else if(6===arguments.length){var f=arguments[0],y=arguments[1],x=arguments[2],C=arguments[3],B=arguments[4],rt=arguments[5],Et=this.pts[f],Pt=this.pts[y],Ut=x.pts[C],Yt=x.pts[B];if(y-f==1&&B-C==1)return rt.addIntersections(this.e,f,x.e,C),null;if(this.env1.init(Et,Pt),this.env2.init(Ut,Yt),!this.env1.intersects(this.env2))return null;var $t=Math.trunc((f+y)/2),ne=Math.trunc((C+B)/2);f<$t&&(C<ne&&this.computeIntersectsForChain(f,$t,x,C,ne,rt),ne<B&&this.computeIntersectsForChain(f,$t,x,ne,B,rt)),$t<y&&(C<ne&&this.computeIntersectsForChain($t,y,x,C,ne,rt),ne<B&&this.computeIntersectsForChain($t,y,x,ne,B,rt))}},Ui.prototype.getStartIndexes=function(){return this.startIndex},Ui.prototype.computeIntersects=function(t,e){for(var o=0;o<this.startIndex.length-1;o++)for(var a=0;a<t.startIndex.length-1;a++)this.computeIntersectsForChain(o,t,a,e)},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui};var Jn=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var o=0;o<3;o++)this._depth[e][o]=t.NULL_VALUE},Ys={NULL_VALUE:{configurable:!0}};Jn.prototype.getDepth=function(t,e){return this._depth[t][e]},Jn.prototype.setDepth=function(t,e,o){this._depth[t][e]=o},Jn.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Jn.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===Jn.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===Jn.NULL_VALUE:void 0},Jn.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var o=1;o<3;o++){var a=0;this._depth[t][o]>e&&(a=1),this._depth[t][o]=a}}},Jn.prototype.getDelta=function(t){return this._depth[t][Bt.RIGHT]-this._depth[t][Bt.LEFT]},Jn.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?R.EXTERIOR:R.INTERIOR},Jn.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Jn.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var o=1;o<3;o++){var a=t.getLocation(e,o);a!==R.EXTERIOR&&a!==R.INTERIOR||(this.isNull(e,o)?this._depth[e][o]=Jn.depthAtLocation(a):this._depth[e][o]+=Jn.depthAtLocation(a))}else 3===arguments.length&&arguments[2]===R.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.depthAtLocation=function(t){return t===R.EXTERIOR?0:t===R.INTERIOR?1:Jn.NULL_VALUE},Ys.NULL_VALUE.get=function(){return-1},Object.defineProperties(Jn,Ys);var ko=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new bi(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Jn,this._depthDelta=0,1===arguments.length)e.call(this,arguments[0],null);else if(2===arguments.length){var f=arguments[1];this.pts=arguments[0],this._label=f}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var o=new Array(2).fill(null);return o[0]=this.pts[0],o[1]=this.pts[1],new e(o,en.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(o){this._isIsolated=o},e.prototype.setName=function(o){this._name=o},e.prototype.equals=function(o){if(!(o instanceof e))return!1;var a=o;if(this.pts.length!==a.pts.length)return!1;for(var f=!0,y=!0,x=this.pts.length,C=0;C<this.pts.length;C++)if(this.pts[C].equals2D(a.pts[C])||(f=!1),this.pts[C].equals2D(a.pts[--x])||(y=!1),!f&&!y)return!1;return!0},e.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},e.prototype.print=function(o){o.print("edge "+this._name+": "),o.print("LINESTRING (");for(var a=0;a<this.pts.length;a++)a>0&&o.print(","),o.print(this.pts[a].x+" "+this.pts[a].y);o.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(o){e.updateIM(this._label,o)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(o){o.print("edge "+this._name+": ");for(var a=this.pts.length-1;a>=0;a--)o.print(this.pts[a]+" ");o.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Ui(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Zt;for(var o=0;o<this.pts.length;o++)this._env.expandToInclude(this.pts[o])}return this._env},e.prototype.addIntersection=function(o,a,f,y){var x=new w(o.getIntersection(y)),C=a,B=o.getEdgeDistance(f,y),rt=C+1;rt<this.pts.length&&x.equals2D(this.pts[rt])&&(C=rt,B=0),this.eiList.add(x,C,B)},e.prototype.toString=function(){var o=new J;o.append("edge "+this._name+": "),o.append("LINESTRING (");for(var a=0;a<this.pts.length;a++)a>0&&o.append(","),o.append(this.pts[a].x+" "+this.pts[a].y);return o.append(")  "+this._label+" "+this._depthDelta),o.toString()},e.prototype.isPointwiseEqual=function(o){if(this.pts.length!==o.pts.length)return!1;for(var a=0;a<this.pts.length;a++)if(!this.pts[a].equals2D(o.pts[a]))return!1;return!0},e.prototype.setDepthDelta=function(o){this._depthDelta=o},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(o,a,f){for(var y=0;y<o.getIntersectionNum();y++)this.addIntersection(o,a,f,y)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var o=arguments[0],a=arguments[1];a.setAtLeastIfValid(o.getLocation(0,Bt.ON),o.getLocation(1,Bt.ON),1),o.isArea()&&(a.setAtLeastIfValid(o.getLocation(0,Bt.LEFT),o.getLocation(1,Bt.LEFT),2),a.setAtLeastIfValid(o.getLocation(0,Bt.RIGHT),o.getLocation(1,Bt.RIGHT),2))},e}(gr),yr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new oi,this._bufParams=t||null};yr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},yr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var o=e.getLabel(),a=t.getLabel();e.isPointwiseEqual(t)||(a=new en(t.getLabel())).flip(),o.merge(a);var f=yr.depthDelta(a),y=e.getDepthDelta()+f;e.setDepthDelta(y)}else this._edgeList.add(t),t.setDepthDelta(yr.depthDelta(t.getLabel()))},yr.prototype.buildSubgraphs=function(t,e){for(var o=new kt,a=t.iterator();a.hasNext();){var f=a.next(),y=f.getRightmostCoordinate(),x=new _o(o).getDepth(y);f.computeDepth(x),f.findResultEdges(),o.add(f),e.add(f.getDirectedEdges(),f.getNodes())}},yr.prototype.createSubgraphs=function(t){for(var e=new kt,o=t.getNodes().iterator();o.hasNext();){var a=o.next();if(!a.isVisited()){var f=new pr;f.create(a),e.add(f)}}return ri.sort(e,ri.reverseOrder()),e},yr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},yr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Us,o=new Ct;return o.setPrecisionModel(t),e.setSegmentIntersector(new Or(o)),e},yr.prototype.buffer=function(t,e){var o=this._workingPrecisionModel;null===o&&(o=t.getPrecisionModel()),this._geomFact=t.getFactory();var a=new or(o,this._bufParams),f=new Yr(t,e,a).getCurves();if(f.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(f,o),this._graph=new dn(new hu),this._graph.addEdges(this._edgeList.getEdges());var y=this.createSubgraphs(this._graph),x=new rr(this._geomFact);this.buildSubgraphs(y,x);var C=x.getPolygons();return C.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(C)},yr.prototype.computeNodedEdges=function(t,e){var o=this.getNoder(e);o.computeNodes(t);for(var a=o.getNodedSubstrings().iterator();a.hasNext();){var f=a.next(),y=f.getCoordinates();if(2!==y.length||!y[0].equals2D(y[1])){var x=f.getData(),C=new ko(f.getCoordinates(),new en(x));this.insertUniqueEdge(C)}}},yr.prototype.setNoder=function(t){this._workingNoder=t},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},yr.depthDelta=function(t){var e=t.getLocation(0,Bt.LEFT),o=t.getLocation(0,Bt.RIGHT);return e===R.INTERIOR&&o===R.EXTERIOR?1:e===R.EXTERIOR&&o===R.INTERIOR?-1:0},yr.convertSegStrings=function(t){for(var e=new ve,o=new kt;t.hasNext();){var a=t.next(),f=e.createLineString(a.getCoordinates());o.add(f)}return e.buildGeometry(o)};var to=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[1];this._noder=arguments[0],this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var a=arguments[1],f=arguments[2],y=arguments[3];this._noder=arguments[0],this._scaleFactor=a,this._offsetX=f,this._offsetY=y,this._isScaled=!this.isIntegerPrecision()}};to.prototype.rescale=function(){if(Nt(arguments[0],pn))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],a=0;a<o.length;a++)o[a].x=o[a].x/this._scaleFactor+this._offsetX,o[a].y=o[a].y/this._scaleFactor+this._offsetY;2===o.length&&o[0].equals2D(o[1])&&Jt.out.println(o)}},to.prototype.scale=function(){if(Nt(arguments[0],pn)){for(var t=arguments[0],e=new kt,o=t.iterator();o.hasNext();){var a=o.next();e.add(new Mn(this.scale(a.getCoordinates()),a.getData()))}return e}if(arguments[0]instanceof Array){for(var f=arguments[0],y=new Array(f.length).fill(null),x=0;x<f.length;x++)y[x]=new w(Math.round((f[x].x-this._offsetX)*this._scaleFactor),Math.round((f[x].y-this._offsetY)*this._scaleFactor),f[x].z);return pe.removeRepeatedPoints(y)}},to.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},to.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},to.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},to.prototype.interfaces_=function(){return[vo]},to.prototype.getClass=function(){return to};var si=function(){this._li=new Ct,this._segStrings=null,this._segStrings=arguments[0]},pu={fact:{configurable:!0}};si.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var o=arguments[0],a=arguments[1].iterator();a.hasNext();)for(var f=a.next().getCoordinates(),y=1;y<f.length-1;y++)if(f[y].equals(o))throw new D("found endpt/interior pt intersection at index "+y+" :pt "+o)},si.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),o=this._segStrings.iterator();o.hasNext();){var a=o.next();this.checkInteriorIntersections(e,a)}else if(2===arguments.length)for(var f=arguments[0],y=arguments[1],x=f.getCoordinates(),C=y.getCoordinates(),B=0;B<x.length-1;B++)for(var rt=0;rt<C.length-1;rt++)this.checkInteriorIntersections(f,B,y,rt);else if(4===arguments.length){var Et=arguments[0],Pt=arguments[1],Ut=arguments[2],Yt=arguments[3];if(Et===Ut&&Pt===Yt)return null;var $t=Et.getCoordinates()[Pt],ne=Et.getCoordinates()[Pt+1],nn=Ut.getCoordinates()[Yt],wn=Ut.getCoordinates()[Yt+1];if(this._li.computeIntersection($t,ne,nn,wn),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,$t,ne)||this.hasInteriorIntersection(this._li,nn,wn)))throw new D("found non-noded intersection at "+$t+"-"+ne+" and "+nn+"-"+wn)}},si.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},si.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var o=arguments[0].getCoordinates(),a=0;a<o.length-2;a++)this.checkCollapse(o[a],o[a+1],o[a+2])},si.prototype.hasInteriorIntersection=function(t,e,o){for(var a=0;a<t.getIntersectionNum();a++){var f=t.getIntersection(a);if(!f.equals(e)&&!f.equals(o))return!0}return!1},si.prototype.checkCollapse=function(t,e,o){if(t.equals(o))throw new D("found non-noded collapse at "+si.fact.createLineString([t,e,o]))},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si},pu.fact.get=function(){return new ve},Object.defineProperties(si,pu);var Er=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],o=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=o,e<=0)throw new S("Scale factor must be non-zero");1!==e&&(this._pt=new w(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new w,this._p1Scaled=new w),this.initCorners(this._pt)},gu={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Er.prototype.intersectsScaled=function(t,e){var o=Math.min(t.x,e.x),a=Math.max(t.x,e.x),f=Math.min(t.y,e.y),y=Math.max(t.y,e.y),x=this._maxx<o||this._minx>a||this._maxy<f||this._miny>y;if(x)return!1;var C=this.intersectsToleranceSquare(t,e);return L.isTrue(!(x&&C),"Found bad envelope test"),C},Er.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new w(this._maxx,this._maxy),this._corner[1]=new w(this._minx,this._maxy),this._corner[2]=new w(this._minx,this._miny),this._corner[3]=new w(this._maxx,this._miny)},Er.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Er.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Er.prototype.getCoordinate=function(){return this._originalPt},Er.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Er.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Er.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Zt(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Er.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Er.prototype.intersectsToleranceSquare=function(t,e){var o=!1,a=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(o=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(a=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||o&&a||t.equals(this._pt)||e.equals(this._pt)))))},Er.prototype.addSnappedNode=function(t,e){var o=t.getCoordinate(e),a=t.getCoordinate(e+1);return!!this.intersects(o,a)&&(t.addIntersection(this.getCoordinate(),e),!0)},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er},gu.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Er,gu);var Es=function(){this.tempEnv1=new Zt,this.selectedSegment=new Kt};Es.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Es.prototype.interfaces_=function(){return[]},Es.prototype.getClass=function(){return Es};var Bo=function(){this._index=null,this._index=arguments[0]},du={HotPixelSnapAction:{configurable:!0}};Bo.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var e=arguments[0],o=arguments[1],a=arguments[2],f=e.getSafeEnvelope(),y=new ma(e,o,a);return this._index.query(f,{interfaces_:function(){return[Ai]},visitItem:function(x){x.select(f,y)}}),y.isNodeAdded()}},Bo.prototype.interfaces_=function(){return[]},Bo.prototype.getClass=function(){return Bo},du.HotPixelSnapAction.get=function(){return ma},Object.defineProperties(Bo,du);var ma=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var a=arguments[1],f=arguments[2];this._hotPixel=arguments[0],this._parentEdge=a,this._hotPixelVertexIndex=f}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var a=arguments[1],f=arguments[0].getContext();if(null!==this._parentEdge&&f===this._parentEdge&&a===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(f,a)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Es),eo=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new kt};eo.prototype.processIntersections=function(t,e,o,a){if(t===o&&e===a)return null;var f=t.getCoordinates()[e],y=t.getCoordinates()[e+1],x=o.getCoordinates()[a],C=o.getCoordinates()[a+1];if(this._li.computeIntersection(f,y,x,C),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var B=0;B<this._li.getIntersectionNum();B++)this._interiorIntersections.add(this._li.getIntersection(B));t.addIntersections(this._li,e,0),o.addIntersections(this._li,a,1)}},eo.prototype.isDone=function(){return!1},eo.prototype.getInteriorIntersections=function(){return this._interiorIntersections},eo.prototype.interfaces_=function(){return[Eo]},eo.prototype.getClass=function(){return eo};var Ri=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Ct,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Ri.prototype.checkCorrectness=function(t){var e=Mn.getNodedSubstrings(t),o=new si(e);try{o.checkValid()}catch(a){if(!(a instanceof fe))throw a;a.printStackTrace()}},Ri.prototype.getNodedSubstrings=function(){return Mn.getNodedSubstrings(this._nodedSegStrings)},Ri.prototype.snapRound=function(t,e){var o=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(o),this.computeVertexSnaps(t)},Ri.prototype.findInteriorIntersections=function(t,e){var o=new eo(e);return this._noder.setSegmentIntersector(o),this._noder.computeNodes(t),o.getInteriorIntersections()},Ri.prototype.computeVertexSnaps=function(){if(Nt(arguments[0],pn))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Mn)for(var o=arguments[0],a=o.getCoordinates(),f=0;f<a.length;f++){var y=new Er(a[f],this._scaleFactor,this._li);this._pointSnapper.snap(y,o,f)&&o.addIntersection(a[f],f)}},Ri.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Us,this._pointSnapper=new Bo(this._noder.getIndex()),this.snapRound(t,this._li)},Ri.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next(),a=new Er(o,this._scaleFactor,this._li);this._pointSnapper.snap(a)}},Ri.prototype.interfaces_=function(){return[vo]},Ri.prototype.getClass=function(){return Ri};var Zn=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new We,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var o=arguments[1];this._argGeom=arguments[0],this._bufParams=o}},ts={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Zn.prototype.bufferFixedPrecision=function(t){var e=new to(new Ri(new He(1)),t.getScale()),o=new yr(this._bufParams);o.setWorkingPrecisionModel(t),o.setNoder(e),this._resultGeometry=o.buffer(this._argGeom,this._distance)},Zn.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Zn.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(y){if(!(y instanceof Ti))throw y;t._saveException=y}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var a=Zn.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),f=new He(a);this.bufferFixedPrecision(f)}},Zn.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===He.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Zn.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Zn.prototype.bufferOriginalPrecision=function(){try{var t=new yr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof D))throw e;this._saveException=e}},Zn.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Zn.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.bufferOp=function(){if(2===arguments.length){var e=arguments[1];return new Zn(arguments[0]).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Gt&&"number"==typeof arguments[1]){var a=arguments[1],f=arguments[2],y=new Zn(arguments[0]);return y.setQuadrantSegments(f),y.getResultGeometry(a)}if(arguments[2]instanceof We&&arguments[0]instanceof Gt&&"number"==typeof arguments[1]){var C=arguments[1];return new Zn(arguments[0],arguments[2]).getResultGeometry(C)}}else if(4===arguments.length){var Et=arguments[1],Pt=arguments[2],Ut=arguments[3],Yt=new Zn(arguments[0]);return Yt.setQuadrantSegments(Pt),Yt.setEndCapStyle(Ut),Yt.getResultGeometry(Et)}},Zn.precisionScaleFactor=function(t,e,o){var a=t.getEnvelopeInternal(),f=G.max(Math.abs(a.getMaxX()),Math.abs(a.getMaxY()),Math.abs(a.getMinX()),Math.abs(a.getMinY()))+2*(e>0?e:0),y=o-Math.trunc(Math.log(f)/Math.log(10)+1);return Math.pow(10,y)},ts.CAP_ROUND.get=function(){return We.CAP_ROUND},ts.CAP_BUTT.get=function(){return We.CAP_FLAT},ts.CAP_FLAT.get=function(){return We.CAP_FLAT},ts.CAP_SQUARE.get=function(){return We.CAP_SQUARE},ts.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Zn,ts);var ar=function(){this._pt=[new w,new w],this._distance=M.NaN,this._isNull=!0};ar.prototype.getCoordinates=function(){return this._pt},ar.prototype.getCoordinate=function(t){return this._pt[t]},ar.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],o=arguments[1];if(this._isNull)return this.initialize(e,o),null;var a=e.distance(o);a<this._distance&&this.initialize(e,o,a)}},ar.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var a=arguments[1],f=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(a),this._distance=f,this._isNull=!1}},ar.prototype.getDistance=function(){return this._distance},ar.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],o=arguments[1];if(this._isNull)return this.initialize(e,o),null;var a=e.distance(o);a>this._distance&&this.initialize(e,o,a)}},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar};var ai=function(){};ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},ai.computeDistance=function(){if(arguments[2]instanceof ar&&arguments[0]instanceof _n&&arguments[1]instanceof w)for(var e=arguments[1],o=arguments[2],a=arguments[0].getCoordinates(),f=new Kt,y=0;y<a.length-1;y++){f.setCoordinates(a[y],a[y+1]);var x=f.closestPoint(e);o.setMinimum(x,e)}else if(arguments[2]instanceof ar&&arguments[0]instanceof Sn&&arguments[1]instanceof w){var C=arguments[0],B=arguments[1],rt=arguments[2];ai.computeDistance(C.getExteriorRing(),B,rt);for(var Et=0;Et<C.getNumInteriorRing();Et++)ai.computeDistance(C.getInteriorRingN(Et),B,rt)}else if(arguments[2]instanceof ar&&arguments[0]instanceof Gt&&arguments[1]instanceof w){var Pt=arguments[0],Ut=arguments[1],Yt=arguments[2];if(Pt instanceof _n)ai.computeDistance(Pt,Ut,Yt);else if(Pt instanceof Sn)ai.computeDistance(Pt,Ut,Yt);else if(Pt instanceof hr)for(var $t=Pt,ne=0;ne<$t.getNumGeometries();ne++){var nn=$t.getGeometryN(ne);ai.computeDistance(nn,Ut,Yt)}else Yt.setMinimum(Pt.getCoordinate(),Ut)}else if(arguments[2]instanceof ar&&arguments[0]instanceof Kt&&arguments[1]instanceof w){var lr=arguments[1],Si=arguments[2],Jr=arguments[0].closestPoint(lr);Si.setMinimum(Jr,lr)}};var zi=function(t){this._maxPtDist=new ar,this._inputGeom=t||null},es={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};zi.prototype.computeMaxMidpointDistance=function(t){var e=new no(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},zi.prototype.computeMaxVertexDistance=function(t){var e=new Zo(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},zi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},zi.prototype.getDistancePoints=function(){return this._maxPtDist},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi},es.MaxPointDistanceFilter.get=function(){return Zo},es.MaxMidpointDistanceFilter.get=function(){return no},Object.defineProperties(zi,es);var Zo=function(t){this._maxPtDist=new ar,this._minPtDist=new ar,this._geom=t||null};Zo.prototype.filter=function(t){this._minPtDist.initialize(),ai.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Zo.prototype.getMaxPointDistance=function(){return this._maxPtDist},Zo.prototype.interfaces_=function(){return[we]},Zo.prototype.getClass=function(){return Zo};var no=function(t){this._maxPtDist=new ar,this._minPtDist=new ar,this._geom=t||null};no.prototype.filter=function(t,e){if(0===e)return null;var o=t.getCoordinate(e-1),a=t.getCoordinate(e),f=new w((o.x+a.x)/2,(o.y+a.y)/2);this._minPtDist.initialize(),ai.computeDistance(this._geom,f,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},no.prototype.isDone=function(){return!1},no.prototype.isGeometryChanged=function(){return!1},no.prototype.getMaxPointDistance=function(){return this._maxPtDist},no.prototype.interfaces_=function(){return[Br]},no.prototype.getClass=function(){return no};var Yi=function(t){this._comps=t||null};Yi.prototype.filter=function(t){t instanceof Sn&&this._comps.add(t)},Yi.prototype.interfaces_=function(){return[Kr]},Yi.prototype.getClass=function(){return Yi},Yi.getPolygons=function(){if(1===arguments.length)return Yi.getPolygons(arguments[0],new kt);if(2===arguments.length){var e=arguments[0],o=arguments[1];return e instanceof Sn?o.add(e):e instanceof hr&&e.apply(new Yi(o)),o}};var Qn=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var o=arguments[1];this._lines=arguments[0],this._isForcedToLineString=o}};Qn.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof yi){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof _n&&this._lines.add(t)},Qn.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Qn.prototype.interfaces_=function(){return[ge]},Qn.prototype.getClass=function(){return Qn},Qn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Qn.getLines(t))}if(2===arguments.length){var e=arguments[0],o=arguments[1];return e.getFactory().buildGeometry(Qn.getLines(e,o))}},Qn.getLines=function(){if(1===arguments.length)return Qn.getLines(arguments[0],!1);if(2===arguments.length){if(Nt(arguments[0],pn)&&Nt(arguments[1],pn)){for(var o=arguments[1],a=arguments[0].iterator();a.hasNext();){var f=a.next();Qn.getLines(f,o)}return o}if(arguments[0]instanceof Gt&&"boolean"==typeof arguments[1]){var y=arguments[0],x=arguments[1],C=new kt;return y.apply(new Qn(C,x)),C}if(arguments[0]instanceof Gt&&Nt(arguments[1],pn)){var B=arguments[0],rt=arguments[1];return B instanceof _n?rt.add(B):B.apply(new Qn(rt)),rt}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Nt(arguments[0],pn)&&Nt(arguments[1],pn)){for(var Pt=arguments[1],Ut=arguments[2],Yt=arguments[0].iterator();Yt.hasNext();){var $t=Yt.next();Qn.getLines($t,Pt,Ut)}return Pt}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Gt&&Nt(arguments[1],pn)){var nn=arguments[1];return arguments[0].apply(new Qn(nn,arguments[2])),nn}}};var ui=function(){if(this._boundaryRule=tn.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new S("Rule must be non-null");this._boundaryRule=t}};ui.prototype.locateInternal=function(){if(arguments[0]instanceof w&&arguments[1]instanceof Sn){var t=arguments[0],e=arguments[1];if(e.isEmpty())return R.EXTERIOR;var o=e.getExteriorRing(),a=this.locateInPolygonRing(t,o);if(a===R.EXTERIOR)return R.EXTERIOR;if(a===R.BOUNDARY)return R.BOUNDARY;for(var f=0;f<e.getNumInteriorRing();f++){var y=e.getInteriorRingN(f),x=this.locateInPolygonRing(t,y);if(x===R.INTERIOR)return R.EXTERIOR;if(x===R.BOUNDARY)return R.BOUNDARY}return R.INTERIOR}if(arguments[0]instanceof w&&arguments[1]instanceof _n){var C=arguments[0],B=arguments[1];if(!B.getEnvelopeInternal().intersects(C))return R.EXTERIOR;var rt=B.getCoordinates();return B.isClosed()||!C.equals(rt[0])&&!C.equals(rt[rt.length-1])?Mt.isOnLine(C,rt)?R.INTERIOR:R.EXTERIOR:R.BOUNDARY}if(arguments[0]instanceof w&&arguments[1]instanceof Pr){var Et=arguments[0];return arguments[1].getCoordinate().equals2D(Et)?R.INTERIOR:R.EXTERIOR}},ui.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Mt.locatePointInRing(t,e.getCoordinates()):R.EXTERIOR},ui.prototype.intersects=function(t,e){return this.locate(t,e)!==R.EXTERIOR},ui.prototype.updateLocationInfo=function(t){t===R.INTERIOR&&(this._isIn=!0),t===R.BOUNDARY&&this._numBoundaries++},ui.prototype.computeLocation=function(t,e){if(e instanceof Pr&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof _n)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Sn)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof po)for(var o=e,a=0;a<o.getNumGeometries();a++){var f=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,f))}else if(e instanceof mi)for(var y=e,x=0;x<y.getNumGeometries();x++){var C=y.getGeometryN(x);this.updateLocationInfo(this.locateInternal(t,C))}else if(e instanceof hr)for(var B=new Ei(e);B.hasNext();){var rt=B.next();rt!==e&&this.computeLocation(t,rt)}},ui.prototype.locate=function(t,e){return e.isEmpty()?R.EXTERIOR:e instanceof _n||e instanceof Sn?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?R.BOUNDARY:this._numBoundaries>0||this._isIn?R.INTERIOR:R.EXTERIOR)},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};var mr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var f=arguments[1],y=arguments[2];this._component=arguments[0],this._segIndex=f,this._pt=y}},yu={INSIDE_AREA:{configurable:!0}};mr.prototype.isInsideArea=function(){return this._segIndex===mr.INSIDE_AREA},mr.prototype.getCoordinate=function(){return this._pt},mr.prototype.getGeometryComponent=function(){return this._component},mr.prototype.getSegmentIndex=function(){return this._segIndex},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},yu.INSIDE_AREA.get=function(){return-1},Object.defineProperties(mr,yu);var Xi=function(t){this._pts=t||null};Xi.prototype.filter=function(t){t instanceof Pr&&this._pts.add(t)},Xi.prototype.interfaces_=function(){return[Kr]},Xi.prototype.getClass=function(){return Xi},Xi.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Pr?ri.singletonList(t):Xi.getPoints(t,new kt)}if(2===arguments.length){var e=arguments[0],o=arguments[1];return e instanceof Pr?o.add(e):e instanceof hr&&e.apply(new Xi(o)),o}};var Go=function(){this._locations=null,this._locations=arguments[0]};Go.prototype.filter=function(t){(t instanceof Pr||t instanceof _n||t instanceof Sn)&&this._locations.add(new mr(t,0,t.getCoordinate()))},Go.prototype.interfaces_=function(){return[Kr]},Go.prototype.getClass=function(){return Go},Go.getLocations=function(t){var e=new kt;return t.apply(new Go(e)),e};var Kn=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new ui,this._minDistanceLocation=null,this._minDistance=M.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var o=arguments[0],a=arguments[1],f=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=o,this._geom[1]=a,this._terminateDistance=f}};Kn.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],o=arguments[1],a=1-e,f=Yi.getPolygons(this._geom[e]);if(f.size()>0){var y=Go.getLocations(this._geom[a]);if(this.computeContainmentDistance(y,f,o),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[a]=o[0],this._minDistanceLocation[e]=o[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Nt(arguments[0],Xn)&&Nt(arguments[1],Xn)){for(var x=arguments[0],C=arguments[1],B=arguments[2],rt=0;rt<x.size();rt++)for(var Et=x.get(rt),Pt=0;Pt<C.size();Pt++)if(this.computeContainmentDistance(Et,C.get(Pt),B),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof mr&&arguments[1]instanceof Sn){var Ut=arguments[0],Yt=arguments[1],$t=arguments[2],ne=Ut.getCoordinate();if(R.EXTERIOR!==this._ptLocator.locate(ne,Yt))return this._minDistance=0,$t[0]=Ut,$t[1]=new mr(Yt,ne),null}},Kn.prototype.computeMinDistanceLinesPoints=function(t,e,o){for(var a=0;a<t.size();a++)for(var f=t.get(a),y=0;y<e.size();y++){var x=e.get(y);if(this.computeMinDistance(f,x,o),this._minDistance<=this._terminateDistance)return null}},Kn.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Qn.getLines(this._geom[0]),o=Qn.getLines(this._geom[1]),a=Xi.getPoints(this._geom[0]),f=Xi.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,o,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,f,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(o,a,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(a,f,t),void this.updateMinDistance(t,!1))))},Kn.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Kn.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Kn.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Kn.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof _n&&arguments[1]instanceof Pr){var t=arguments[0],e=arguments[1],o=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var a=t.getCoordinates(),f=e.getCoordinate(),y=0;y<a.length-1;y++){var x=Mt.distancePointLine(f,a[y],a[y+1]);if(x<this._minDistance){this._minDistance=x;var C=new Kt(a[y],a[y+1]).closestPoint(f);o[0]=new mr(t,y,C),o[1]=new mr(e,0,f)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof _n&&arguments[1]instanceof _n){var B=arguments[0],rt=arguments[1],Et=arguments[2];if(B.getEnvelopeInternal().distance(rt.getEnvelopeInternal())>this._minDistance)return null;for(var Pt=B.getCoordinates(),Ut=rt.getCoordinates(),Yt=0;Yt<Pt.length-1;Yt++)for(var $t=0;$t<Ut.length-1;$t++){var ne=Mt.distanceLineLine(Pt[Yt],Pt[Yt+1],Ut[$t],Ut[$t+1]);if(ne<this._minDistance){this._minDistance=ne;var nn=new Kt(Pt[Yt],Pt[Yt+1]),wn=new Kt(Ut[$t],Ut[$t+1]),lr=nn.closestPoints(wn);Et[0]=new mr(B,Yt,lr[0]),Et[1]=new mr(rt,$t,lr[1])}if(this._minDistance<=this._terminateDistance)return null}}},Kn.prototype.computeMinDistancePoints=function(t,e,o){for(var a=0;a<t.size();a++)for(var f=t.get(a),y=0;y<e.size();y++){var x=e.get(y),C=f.getCoordinate().distance(x.getCoordinate());if(C<this._minDistance&&(this._minDistance=C,o[0]=new mr(f,0,f.getCoordinate()),o[1]=new mr(x,0,x.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Kn.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new S("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Kn.prototype.computeMinDistanceLines=function(t,e,o){for(var a=0;a<t.size();a++)for(var f=t.get(a),y=0;y<e.size();y++){var x=e.get(y);if(this.computeMinDistance(f,x,o),this._minDistance<=this._terminateDistance)return null}},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.distance=function(t,e){return new Kn(t,e).distance()},Kn.isWithinDistance=function(t,e,o){return new Kn(t,e,o).distance()<=o},Kn.nearestPoints=function(t,e){return new Kn(t,e).nearestPoints()};var tr=function(){this._pt=[new w,new w],this._distance=M.NaN,this._isNull=!0};tr.prototype.getCoordinates=function(){return this._pt},tr.prototype.getCoordinate=function(t){return this._pt[t]},tr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],o=arguments[1];if(this._isNull)return this.initialize(e,o),null;var a=e.distance(o);a<this._distance&&this.initialize(e,o,a)}},tr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var a=arguments[1],f=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(a),this._distance=f,this._isNull=!1}},tr.prototype.toString=function(){return dt.toLineString(this._pt[0],this._pt[1])},tr.prototype.getDistance=function(){return this._distance},tr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],o=arguments[1];if(this._isNull)return this.initialize(e,o),null;var a=e.distance(o);a>this._distance&&this.initialize(e,o,a)}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr};var li=function(){};li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.computeDistance=function(){if(arguments[2]instanceof tr&&arguments[0]instanceof _n&&arguments[1]instanceof w)for(var t=arguments[0],e=arguments[1],o=arguments[2],a=new Kt,f=t.getCoordinates(),y=0;y<f.length-1;y++){a.setCoordinates(f[y],f[y+1]);var x=a.closestPoint(e);o.setMinimum(x,e)}else if(arguments[2]instanceof tr&&arguments[0]instanceof Sn&&arguments[1]instanceof w){var C=arguments[0],B=arguments[1],rt=arguments[2];li.computeDistance(C.getExteriorRing(),B,rt);for(var Et=0;Et<C.getNumInteriorRing();Et++)li.computeDistance(C.getInteriorRingN(Et),B,rt)}else if(arguments[2]instanceof tr&&arguments[0]instanceof Gt&&arguments[1]instanceof w){var Pt=arguments[0],Ut=arguments[1],Yt=arguments[2];if(Pt instanceof _n)li.computeDistance(Pt,Ut,Yt);else if(Pt instanceof Sn)li.computeDistance(Pt,Ut,Yt);else if(Pt instanceof hr)for(var $t=Pt,ne=0;ne<$t.getNumGeometries();ne++){var nn=$t.getGeometryN(ne);li.computeDistance(nn,Ut,Yt)}else Yt.setMinimum(Pt.getCoordinate(),Ut)}else if(arguments[2]instanceof tr&&arguments[0]instanceof Kt&&arguments[1]instanceof w){var lr=arguments[1],Si=arguments[2],Jr=arguments[0].closestPoint(lr);Si.setMinimum(Jr,lr)}};var Rr=function(){this._g0=null,this._g1=null,this._ptDist=new tr,this._densifyFrac=0;var e=arguments[1];this._g0=arguments[0],this._g1=e},Xs={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Rr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Rr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new S("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Rr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Rr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Rr.prototype.computeOrientedDistance=function(t,e,o){var a=new bo(e);if(t.apply(a),o.setMaximum(a.getMaxPointDistance()),this._densifyFrac>0){var f=new Ji(e,this._densifyFrac);t.apply(f),o.setMaximum(f.getMaxPointDistance())}},Rr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.distance=function(){if(2===arguments.length)return new Rr(arguments[0],arguments[1]).distance();if(3===arguments.length){var f=arguments[2],y=new Rr(arguments[0],arguments[1]);return y.setDensifyFraction(f),y.distance()}},Xs.MaxPointDistanceFilter.get=function(){return bo},Xs.MaxDensifiedByFractionDistanceFilter.get=function(){return Ji},Object.defineProperties(Rr,Xs);var bo=function(){this._maxPtDist=new tr,this._minPtDist=new tr,this._euclideanDist=new li,this._geom=null,this._geom=arguments[0]};bo.prototype.filter=function(t){this._minPtDist.initialize(),li.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},bo.prototype.getMaxPointDistance=function(){return this._maxPtDist},bo.prototype.interfaces_=function(){return[we]},bo.prototype.getClass=function(){return bo};var Ji=function(){this._maxPtDist=new tr,this._minPtDist=new tr,this._geom=null,this._numSubSegs=0;var e=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/e))};Ji.prototype.filter=function(t,e){if(0===e)return null;for(var o=t.getCoordinate(e-1),a=t.getCoordinate(e),f=(a.x-o.x)/this._numSubSegs,y=(a.y-o.y)/this._numSubSegs,x=0;x<this._numSubSegs;x++){var rt=new w(o.x+x*f,o.y+x*y);this._minPtDist.initialize(),li.computeDistance(this._geom,rt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ji.prototype.isDone=function(){return!1},Ji.prototype.isGeometryChanged=function(){return!1},Ji.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ji.prototype.interfaces_=function(){return[Br]},Ji.prototype.getClass=function(){return Ji};var wr=function(t,e,o){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=o||null},ws={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};wr.prototype.checkMaximumDistance=function(t,e,o){var a=new Rr(e,t);if(a.setDensifyFraction(.25),this._maxDistanceFound=a.orientedDistance(),this._maxDistanceFound>o){this._isValid=!1;var f=a.getCoordinates();this._errorLocation=f[1],this._errorIndicator=t.getFactory().createLineString(f),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+dt.toLineString(f[0],f[1])+")"}},wr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=wr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),wr.VERBOSE&&Jt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},wr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Sn||this._input instanceof mi||this._input instanceof hr))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},wr.prototype.getErrorIndicator=function(){return this._errorIndicator},wr.prototype.checkMinimumDistance=function(t,e,o){var a=new Kn(t,e,o);if(this._minDistanceFound=a.distance(),this._minDistanceFound<o){this._isValid=!1;var f=a.nearestPoints();this._errorLocation=a.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(f),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+dt.toLineString(f[0],f[1])+" )"}},wr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},wr.prototype.getErrorLocation=function(){return this._errorLocation},wr.prototype.getPolygonLines=function(t){for(var e=new kt,o=new Qn(e),a=Yi.getPolygons(t).iterator();a.hasNext();)a.next().apply(o);return t.getFactory().buildGeometry(e)},wr.prototype.getErrorMessage=function(){return this._errMsg},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr},ws.VERBOSE.get=function(){return!1},ws.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(wr,ws);var Gn=function(t,e,o){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=o||null},Js={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Gn.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Gn.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Gn.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Zt(this._input.getEnvelopeInternal());e.expandBy(this._distance);var o=new Zt(this._result.getEnvelopeInternal());o.expandBy(t),o.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(o)),this.report("Envelope")},Gn.prototype.checkDistance=function(){var t=new wr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Gn.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Gn.prototype.checkPolygonal=function(){this._result instanceof Sn||this._result instanceof mi||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Gn.prototype.getErrorIndicator=function(){return this._errorIndicator},Gn.prototype.getErrorLocation=function(){return this._errorLocation},Gn.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Gn.prototype.report=function(t){if(!Gn.VERBOSE)return null;Jt.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Gn.prototype.getErrorMessage=function(){return this._errorMsg},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.isValidMsg=function(t,e,o){var a=new Gn(t,e,o);return a.isValid()?null:a.getErrorMessage()},Gn.isValid=function(t,e,o){return!!new Gn(t,e,o).isValid()},Js.VERBOSE.get=function(){return!1},Js.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Gn,Js);var Ci=function(){this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e};Ci.prototype.getCoordinates=function(){return this._pts},Ci.prototype.size=function(){return this._pts.length},Ci.prototype.getCoordinate=function(t){return this._pts[t]},Ci.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ci.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:mo.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ci.prototype.setData=function(t){this._data=t},Ci.prototype.getData=function(){return this._data},Ci.prototype.toString=function(){return dt.toLineString(new Pn(this._pts))},Ci.prototype.interfaces_=function(){return[xi]},Ci.prototype.getClass=function(){return Ci};var jn=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new kt,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};jn.prototype.getInteriorIntersection=function(){return this._interiorIntersection},jn.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},jn.prototype.getIntersectionSegments=function(){return this._intSegments},jn.prototype.count=function(){return this._intersectionCount},jn.prototype.getIntersections=function(){return this._intersections},jn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},jn.prototype.setKeepIntersections=function(t){this._keepIntersections=t},jn.prototype.processIntersections=function(t,e,o,a){if(!this._findAllIntersections&&this.hasIntersection()||t===o&&e===a||this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(o,a))return null;var f=t.getCoordinates()[e],y=t.getCoordinates()[e+1],x=o.getCoordinates()[a],C=o.getCoordinates()[a+1];this._li.computeIntersection(f,y,x,C),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=f,this._intSegments[1]=y,this._intSegments[2]=x,this._intSegments[3]=C,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},jn.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},jn.prototype.hasIntersection=function(){return null!==this._interiorIntersection},jn.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},jn.prototype.interfaces_=function(){return[Eo]},jn.prototype.getClass=function(){return jn},jn.createAllIntersectionsFinder=function(t){var e=new jn(t);return e.setFindAllIntersections(!0),e},jn.createAnyIntersectionFinder=function(t){return new jn(t)},jn.createIntersectionCounter=function(t){var e=new jn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var ci=function(){this._li=new Ct,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};ci.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},ci.prototype.getIntersections=function(){return this._segInt.getIntersections()},ci.prototype.isValid=function(){return this.execute(),this._isValid},ci.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},ci.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new jn(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Us;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},ci.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ti(this.getErrorMessage(),this._segInt.getInteriorIntersection())},ci.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+dt.toLineString(t[0],t[1])+" and "+dt.toLineString(t[2],t[3])},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.computeIntersections=function(t){var e=new ci(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Co=function t(){this._nv=null,this._nv=new ci(t.toSegmentStrings(arguments[0]))};Co.prototype.checkValid=function(){this._nv.checkValid()},Co.prototype.interfaces_=function(){return[]},Co.prototype.getClass=function(){return Co},Co.toSegmentStrings=function(t){for(var e=new kt,o=t.iterator();o.hasNext();){var a=o.next();e.add(new Ci(a.getCoordinates(),a))}return e},Co.checkValid=function(t){new Co(t).checkValid()};var Io=function(t){this._mapOp=t};Io.prototype.map=function(t){for(var e=new kt,o=0;o<t.getNumGeometries();o++){var a=this._mapOp.map(t.getGeometryN(o));a.isEmpty()||e.add(a)}return t.getFactory().createGeometryCollection(ve.toGeometryArray(e))},Io.prototype.interfaces_=function(){return[]},Io.prototype.getClass=function(){return Io},Io.map=function(t,e){return new Io(e).map(t)};var Ii=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new kt,this._resultLineList=new kt;var e=arguments[1],o=arguments[2];this._op=arguments[0],this._geometryFactory=e,this._ptLocator=o};Ii.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var o=e.next();this.collectLineEdge(o,t,this._lineEdgesList),this.collectBoundaryTouchEdge(o,t,this._lineEdgesList)}},Ii.prototype.labelIsolatedLine=function(t,e){var o=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,o)},Ii.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Ii.prototype.collectLineEdge=function(t,e,o){var a=t.getLabel(),f=t.getEdge();t.isLineEdge()&&(t.isVisited()||!he.isResultOfOp(a,e)||f.isCovered()||(o.add(f),t.setVisitedEdge(!0)))},Ii.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var o=e.next(),a=o.getEdge();if(o.isLineEdge()&&!a.isCoveredSet()){var f=this._op.isCoveredByA(o.getCoordinate());a.setCovered(f)}}},Ii.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next(),a=o.getLabel();o.isIsolated()&&(a.isNull(0)?this.labelIsolatedLine(o,0):this.labelIsolatedLine(o,1))}},Ii.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var o=e.next(),a=this._geometryFactory.createLineString(o.getCoordinates());this._resultLineList.add(a),o.setInResult(!0)}},Ii.prototype.collectBoundaryTouchEdge=function(t,e,o){var a=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(L.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(he.isResultOfOp(a,e)&&e===he.INTERSECTION&&(o.add(t.getEdge()),t.setVisitedEdge(!0))))},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii};var Uo=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new kt;var e=arguments[1];this._op=arguments[0],this._geometryFactory=e};Uo.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var o=this._geometryFactory.createPoint(e);this._resultPointList.add(o)}},Uo.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var o=e.next();if(!(o.isInResult()||o.isIncidentEdgeInResult()||0!==o.getEdges().getDegree()&&t!==he.INTERSECTION)){var a=o.getLabel();he.isResultOfOp(a,t)&&this.filterCoveredNodeToPoint(o)}}},Uo.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Uo.prototype.interfaces_=function(){return[]},Uo.prototype.getClass=function(){return Uo};var br=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};br.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},br.prototype.transformPolygon=function(t,e){var o=!0,a=this.transformLinearRing(t.getExteriorRing(),t);null!==a&&a instanceof yi&&!a.isEmpty()||(o=!1);for(var f=new kt,y=0;y<t.getNumInteriorRing();y++){var x=this.transformLinearRing(t.getInteriorRingN(y),t);null===x||x.isEmpty()||(x instanceof yi||(o=!1),f.add(x))}if(o)return this._factory.createPolygon(a,f.toArray([]));var C=new kt;return null!==a&&C.add(a),C.addAll(f),this._factory.buildGeometry(C)},br.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},br.prototype.getInputGeometry=function(){return this._inputGeom},br.prototype.transformMultiLineString=function(t,e){for(var o=new kt,a=0;a<t.getNumGeometries();a++){var f=this.transformLineString(t.getGeometryN(a),t);null!==f&&(f.isEmpty()||o.add(f))}return this._factory.buildGeometry(o)},br.prototype.transformCoordinates=function(t,e){return this.copy(t)},br.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},br.prototype.transformMultiPoint=function(t,e){for(var o=new kt,a=0;a<t.getNumGeometries();a++){var f=this.transformPoint(t.getGeometryN(a),t);null!==f&&(f.isEmpty()||o.add(f))}return this._factory.buildGeometry(o)},br.prototype.transformMultiPolygon=function(t,e){for(var o=new kt,a=0;a<t.getNumGeometries();a++){var f=this.transformPolygon(t.getGeometryN(a),t);null!==f&&(f.isEmpty()||o.add(f))}return this._factory.buildGeometry(o)},br.prototype.copy=function(t){return t.copy()},br.prototype.transformGeometryCollection=function(t,e){for(var o=new kt,a=0;a<t.getNumGeometries();a++){var f=this.transform(t.getGeometryN(a));null!==f&&(this._pruneEmptyGeometry&&f.isEmpty()||o.add(f))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ve.toGeometryArray(o)):this._factory.buildGeometry(o)},br.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Pr)return this.transformPoint(t,null);if(t instanceof Ro)return this.transformMultiPoint(t,null);if(t instanceof yi)return this.transformLinearRing(t,null);if(t instanceof _n)return this.transformLineString(t,null);if(t instanceof po)return this.transformMultiLineString(t,null);if(t instanceof Sn)return this.transformPolygon(t,null);if(t instanceof mi)return this.transformMultiPolygon(t,null);if(t instanceof hr)return this.transformGeometryCollection(t,null);throw new S("Unknown Geometry subtype: "+t.getClass().getName())},br.prototype.transformLinearRing=function(t,e){var o=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===o)return this._factory.createLinearRing(null);var a=o.size();return a>0&&a<4&&!this._preserveType?this._factory.createLineString(o):this._factory.createLinearRing(o)},br.prototype.interfaces_=function(){return[]},br.prototype.getClass=function(){return br};var Di=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Kt,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof _n&&"number"==typeof arguments[1]){var o=arguments[1];t.call(this,arguments[0].getCoordinates(),o)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var a=arguments[0],f=arguments[1];this._srcPts=a,this._isClosed=t.isClosed(a),this._snapTolerance=f}};Di.prototype.snapVertices=function(t,e){for(var o=this._isClosed?t.size()-1:t.size(),a=0;a<o;a++){var f=t.get(a),y=this.findSnapForVertex(f,e);null!==y&&(t.set(a,new w(y)),0===a&&this._isClosed&&t.set(t.size()-1,new w(y)))}},Di.prototype.findSnapForVertex=function(t,e){for(var o=0;o<e.length;o++){if(t.equals2D(e[o]))return null;if(t.distance(e[o])<this._snapTolerance)return e[o]}return null},Di.prototype.snapTo=function(t){var e=new Wr(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Di.prototype.snapSegments=function(t,e){if(0===e.length)return null;var o=e.length;e[0].equals2D(e[e.length-1])&&(o=e.length-1);for(var a=0;a<o;a++){var f=e[a],y=this.findSegmentIndexToSnap(f,t);y>=0&&t.add(y+1,new w(f),!1)}},Di.prototype.findSegmentIndexToSnap=function(t,e){for(var o=M.MAX_VALUE,a=-1,f=0;f<e.size()-1;f++){if(this._seg.p0=e.get(f),this._seg.p1=e.get(f+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var y=this._seg.distance(t);y<this._snapTolerance&&y<o&&(o=y,a=f)}return a},Di.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var xn=function(t){this._srcGeom=t||null},mu={SNAP_PRECISION_FACTOR:{configurable:!0}};xn.prototype.snapTo=function(t,e){var o=this.extractTargetCoordinates(t);return new vu(e,o).transform(this._srcGeom)},xn.prototype.snapToSelf=function(t,e){var o=this.extractTargetCoordinates(this._srcGeom),a=new vu(t,o,!0).transform(this._srcGeom),f=a;return e&&Nt(f,Vi)&&(f=a.buffer(0)),f},xn.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},xn.prototype.extractTargetCoordinates=function(t){for(var e=new wt,o=t.getCoordinates(),a=0;a<o.length;a++)e.add(o[a]);return e.toArray(new Array(0).fill(null))},xn.prototype.computeMinimumSegmentLength=function(t){for(var e=M.MAX_VALUE,o=0;o<t.length-1;o++){var a=t[o].distance(t[o+1]);a<e&&(e=a)}return e},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn},xn.snap=function(t,e,o){var a=new Array(2).fill(null),f=new xn(t);a[0]=f.snapTo(e,o);var y=new xn(e);return a[1]=y.snapTo(a[0],o),a},xn.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=xn.computeSizeBasedSnapTolerance(t),o=t.getPrecisionModel();if(o.getType()===He.FIXED){var a=1/o.getScale()*2/1.415;a>e&&(e=a)}return e}if(2===arguments.length){var y=arguments[1];return Math.min(xn.computeOverlaySnapTolerance(arguments[0]),xn.computeOverlaySnapTolerance(y))}},xn.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*xn.SNAP_PRECISION_FACTOR},xn.snapToSelf=function(t,e,o){return new xn(t).snapToSelf(e,o)},mu.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(xn,mu);var vu=function(t){function e(o,a,f){t.call(this),this._snapTolerance=o||null,this._snapPts=a||null,this._isSelfSnap=void 0!==f&&f}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(o,a){var f=new Di(o,this._snapTolerance);return f.setAllowSnappingToSourceVertices(this._isSelfSnap),f.snapTo(a)},e.prototype.transformCoordinates=function(o,a){var f=o.toCoordinateArray(),y=this.snapLine(f,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(y)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(br),ur=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ur.prototype.getCommon=function(){return M.longBitsToDouble(this._commonBits)},ur.prototype.add=function(t){var e=M.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=ur.signExpBits(this._commonBits),this._isFirst=!1,null):ur.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=ur.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=ur.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},ur.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=M.longBitsToDouble(t),o="0000000000000000000000000000000000000000000000000000000000000000"+M.toBinaryString(t),a=o.substring(o.length-64);return a.substring(0,1)+"  "+a.substring(1,12)+"(exp) "+a.substring(12)+" [ "+e+" ]"}},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},ur.getBit=function(t,e){return 0!=(t&1<<e)?1:0},ur.signExpBits=function(t){return t>>52},ur.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},ur.numCommonMostSigMantissaBits=function(t,e){for(var o=0,a=52;a>=0;a--){if(ur.getBit(t,a)!==ur.getBit(e,a))return o;o++}return 52};var ji=function(){this._commonCoord=null,this._ccFilter=new Po},So={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ji.prototype.addCommonBits=function(t){var e=new Fi(this._commonCoord);t.apply(e),t.geometryChanged()},ji.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new w(this._commonCoord);e.x=-e.x,e.y=-e.y;var o=new Fi(e);return t.apply(o),t.geometryChanged(),t},ji.prototype.getCommonCoordinate=function(){return this._commonCoord},ji.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji},So.CommonCoordinateFilter.get=function(){return Po},So.Translater.get=function(){return Fi},Object.defineProperties(ji,So);var Po=function(){this._commonBitsX=new ur,this._commonBitsY=new ur};Po.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Po.prototype.getCommonCoordinate=function(){return new w(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Po.prototype.interfaces_=function(){return[we]},Po.prototype.getClass=function(){return Po};var Fi=function(){this.trans=null,this.trans=arguments[0]};Fi.prototype.filter=function(t,e){var o=t.getOrdinate(e,0)+this.trans.x,a=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,o),t.setOrdinate(e,1,a)},Fi.prototype.isDone=function(){return!1},Fi.prototype.isGeometryChanged=function(){return!0},Fi.prototype.interfaces_=function(){return[Br]},Fi.prototype.getClass=function(){return Fi};var Fn=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Fn.prototype.selfSnap=function(t){return new xn(t).snapTo(t,this._snapTolerance)},Fn.prototype.removeCommonBits=function(t){this._cbr=new ji,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Fn.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Fn.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),o=he.overlayOp(e[0],e[1],t);return this.prepareResult(o)},Fn.prototype.checkValid=function(t){t.isValid()||Jt.out.println("Snapped geometry is invalid")},Fn.prototype.computeSnapTolerance=function(){this._snapTolerance=xn.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Fn.prototype.snap=function(t){var e=this.removeCommonBits(t);return xn.snap(e[0],e[1],this._snapTolerance)},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.overlayOp=function(t,e,o){return new Fn(t,e).getResultGeometry(o)},Fn.union=function(t,e){return Fn.overlayOp(t,e,he.UNION)},Fn.intersection=function(t,e){return Fn.overlayOp(t,e,he.INTERSECTION)},Fn.symDifference=function(t,e){return Fn.overlayOp(t,e,he.SYMDIFFERENCE)},Fn.difference=function(t,e){return Fn.overlayOp(t,e,he.DIFFERENCE)};var Un=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Un.prototype.getResultGeometry=function(t){var e=null,o=!1,a=null;try{e=he.overlayOp(this._geom[0],this._geom[1],t),o=!0}catch(f){if(!(f instanceof D))throw f;a=f}if(!o)try{e=Fn.overlayOp(this._geom[0],this._geom[1],t)}catch(f){throw f instanceof D?a:f}return e},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un},Un.overlayOp=function(t,e,o){return new Un(t,e).getResultGeometry(o)},Un.union=function(t,e){return Un.overlayOp(t,e,he.UNION)},Un.intersection=function(t,e){return Un.overlayOp(t,e,he.INTERSECTION)},Un.symDifference=function(t,e){return Un.overlayOp(t,e,he.SYMDIFFERENCE)},Un.difference=function(t,e){return Un.overlayOp(t,e,he.DIFFERENCE)};var ns=function(){this.mce=null,this.chainIndex=null;var e=arguments[1];this.mce=arguments[0],this.chainIndex=e};ns.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ns.prototype.interfaces_=function(){return[]},ns.prototype.getClass=function(){return ns};var $n=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],o=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=o}else if(3===arguments.length){var a=arguments[0],f=arguments[1],y=arguments[2];this._eventType=t.INSERT,this._label=a,this._xValue=f,this._obj=y}},ro={INSERT:{configurable:!0},DELETE:{configurable:!0}};$n.prototype.isDelete=function(){return this._eventType===$n.DELETE},$n.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},$n.prototype.getObject=function(){return this._obj},$n.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},$n.prototype.getInsertEvent=function(){return this._insertEvent},$n.prototype.isInsert=function(){return this._eventType===$n.INSERT},$n.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},$n.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},$n.prototype.interfaces_=function(){return[P]},$n.prototype.getClass=function(){return $n},ro.INSERT.get=function(){return 1},ro.DELETE.get=function(){return 2},Object.defineProperties($n,ro);var bs=function(){};bs.prototype.interfaces_=function(){return[]},bs.prototype.getClass=function(){return bs};var er=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[1],o=arguments[2];this._li=arguments[0],this._includeProper=e,this._recordIsolated=o};er.prototype.isTrivialIntersection=function(t,e,o,a){if(t===o&&1===this._li.getIntersectionNum()){if(er.isAdjacentSegments(e,a))return!0;if(t.isClosed()){var f=t.getNumPoints()-1;if(0===e&&a===f||0===a&&e===f)return!0}}return!1},er.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},er.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},er.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},er.prototype.isBoundaryPointInternal=function(t,e){for(var o=e.iterator();o.hasNext();){var a=o.next().getCoordinate();if(t.isIntersection(a))return!0}return!1},er.prototype.hasProperIntersection=function(){return this._hasProper},er.prototype.hasIntersection=function(){return this._hasIntersection},er.prototype.isDone=function(){return this._isDone},er.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},er.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},er.prototype.addIntersections=function(t,e,o,a){if(t===o&&e===a)return null;this.numTests++;var f=t.getCoordinates()[e],y=t.getCoordinates()[e+1],x=o.getCoordinates()[a],C=o.getCoordinates()[a+1];this._li.computeIntersection(f,y,x,C),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),o.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,o,a)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),o.addIntersections(this._li,a,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},er.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var wl=function(t){function e(){t.call(this),this.events=new kt,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){ri.sort(this.events);for(var o=0;o<this.events.size();o++){var a=this.events.get(o);a.isDelete()&&a.getInsertEvent().setDeleteEventIndex(o)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var o=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var a=0;a<this.events.size();a++){var f=this.events.get(a);if(f.isInsert()&&this.processOverlaps(a,f.getDeleteEventIndex(),f,o),o.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof er&&Nt(arguments[0],Xn)&&Nt(arguments[1],Xn)){var y=arguments[0],x=arguments[1],C=arguments[2];this.addEdges(y,y),this.addEdges(x,x),this.computeIntersections(C)}else if("boolean"==typeof arguments[2]&&Nt(arguments[0],Xn)&&arguments[1]instanceof er){var B=arguments[0],rt=arguments[1];arguments[2]?this.addEdges(B,null):this.addEdges(B),this.computeIntersections(rt)}},e.prototype.addEdge=function(o,a){for(var f=o.getMonotoneChainEdge(),y=f.getStartIndexes(),x=0;x<y.length-1;x++){var C=new ns(f,x),B=new $n(a,f.getMinX(x),C);this.events.add(B),this.events.add(new $n(f.getMaxX(x),B))}},e.prototype.processOverlaps=function(o,a,f,y){for(var x=f.getObject(),C=o;C<a;C++){var B=this.events.get(C);if(B.isInsert()){var rt=B.getObject();f.isSameLabel(B)||(x.computeIntersections(rt,y),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var o=arguments[0].iterator();o.hasNext();){var a=o.next();this.addEdge(a,a)}else if(2===arguments.length)for(var y=arguments[1],x=arguments[0].iterator();x.hasNext();){var C=x.next();this.addEdge(C,y)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bs),fi=function(){this._min=M.POSITIVE_INFINITY,this._max=M.NEGATIVE_INFINITY},js={NodeComparator:{configurable:!0}};fi.prototype.getMin=function(){return this._min},fi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fi.prototype.getMax=function(){return this._max},fi.prototype.toString=function(){return dt.toLineString(new w(this._min,0),new w(this._max,0))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},js.NodeComparator.get=function(){return $i},Object.defineProperties(fi,js);var $i=function(){};$i.prototype.compare=function(t,e){var f=(t._min+t._max)/2,y=(e._min+e._max)/2;return f<y?-1:f>y?1:0},$i.prototype.interfaces_=function(){return[O]},$i.prototype.getClass=function(){return $i};var va=function(t){function e(){t.call(this),this._item=null;var a=arguments[1],f=arguments[2];this._min=arguments[0],this._max=a,this._item=f}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(o,a,f){if(!this.intersects(o,a))return null;f.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),$s=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var a=arguments[1];this._node1=arguments[0],this._node2=a,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(o,a){this._min=Math.min(o._min,a._min),this._max=Math.max(o._max,a._max)},e.prototype.query=function(o,a,f){if(!this.intersects(o,a))return null;null!==this._node1&&this._node1.query(o,a,f),null!==this._node2&&this._node2.query(o,a,f)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),Xr=function(){this._leaves=new kt,this._root=null,this._level=0};Xr.prototype.buildTree=function(){ri.sort(this._leaves,new fi.NodeComparator);for(var t=this._leaves,e=null,o=new kt;;){if(this.buildLevel(t,o),1===o.size())return o.get(0);e=t,t=o,o=e}},Xr.prototype.insert=function(t,e,o){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new va(t,e,o))},Xr.prototype.query=function(t,e,o){this.init(),this._root.query(t,e,o)},Xr.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Xr.prototype.printNode=function(t){Jt.out.println(dt.toLineString(new w(t._min,this._level),new w(t._max,this._level)))},Xr.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Xr.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var o=0;o<t.size();o+=2){var a=t.get(o);if(null===(o+1<t.size()?t.get(o):null))e.add(a);else{var f=new $s(t.get(o),t.get(o+1));e.add(f)}}},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var rs=function(){this._items=new kt};rs.prototype.visitItem=function(t){this._items.add(t)},rs.prototype.getItems=function(){return this._items},rs.prototype.interfaces_=function(){return[Ai]},rs.prototype.getClass=function(){return rs};var is=function(){this._index=null;var t=arguments[0];if(!Nt(t,Vi))throw new S("Argument must be Polygonal");this._index=new qi(t)},_a={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};is.prototype.locate=function(t){var e=new Ft(t),o=new No(e);return this._index.query(t.y,t.y,o),e.getLocation()},is.prototype.interfaces_=function(){return[qo]},is.prototype.getClass=function(){return is},_a.SegmentVisitor.get=function(){return No},_a.IntervalIndexedGeometry.get=function(){return qi},Object.defineProperties(is,_a);var No=function(){this._counter=null,this._counter=arguments[0]};No.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},No.prototype.interfaces_=function(){return[Ai]},No.prototype.getClass=function(){return No};var qi=function(){this._index=new Xr,this.init(arguments[0])};qi.prototype.init=function(t){for(var e=Qn.getLines(t).iterator();e.hasNext();){var o=e.next().getCoordinates();this.addLine(o)}},qi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var o=new Kt(t[e-1],t[e]),a=Math.min(o.p0.y,o.p1.y),f=Math.max(o.p0.y,o.p1.y);this._index.insert(a,f,o)}},qi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],o=new rs;return this._index.query(t,e,o),o.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi};var zo=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new ru,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new ui,2===arguments.length){var a=arguments[1],f=tn.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=a,this._boundaryNodeRule=f,null!==a&&this.add(a)}else if(3===arguments.length){var x=arguments[1],C=arguments[2];this._argIndex=arguments[0],this._parentGeom=x,this._boundaryNodeRule=C,null!==x&&this.add(x)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(o,a){var f=this._nodes.addNode(a).getLabel(),y=1;f.getLocation(o,Bt.ON)===R.BOUNDARY&&y++;var x=e.determineBoundary(this._boundaryNodeRule,y);f.setLocation(o,x)},e.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var y=arguments[1],x=arguments[2],C=new er(arguments[0],!0,!1);return C.setIsDoneIfProperInt(x),this.createEdgeSetIntersector().computeIntersections(this._edges,C,y||!(this._parentGeom instanceof yi||this._parentGeom instanceof Sn||this._parentGeom instanceof mi)),this.addSelfIntersectionNodes(this._argIndex),C}},e.prototype.computeSplitEdges=function(o){for(var a=this._edges.iterator();a.hasNext();)a.next().eiList.addSplitEdges(o)},e.prototype.computeEdgeIntersections=function(o,a,f){var y=new er(a,f,!0);return y.setBoundaryNodes(this.getBoundaryNodes(),o.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,o._edges,y),y},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Pr){var o=arguments[0].getCoordinate();this.insertPoint(this._argIndex,o,R.INTERIOR)}else arguments[0]instanceof w&&this.insertPoint(this._argIndex,arguments[0],R.INTERIOR)},e.prototype.addPolygon=function(o){this.addPolygonRing(o.getExteriorRing(),R.EXTERIOR,R.INTERIOR);for(var a=0;a<o.getNumInteriorRing();a++){var f=o.getInteriorRingN(a);this.addPolygonRing(f,R.INTERIOR,R.EXTERIOR)}},e.prototype.addEdge=function(o){this.insertEdge(o);var a=o.getCoordinates();this.insertPoint(this._argIndex,a[0],R.BOUNDARY),this.insertPoint(this._argIndex,a[a.length-1],R.BOUNDARY)},e.prototype.addLineString=function(o){var a=pe.removeRepeatedPoints(o.getCoordinates());if(a.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=a[0],null;var f=new ko(a,new en(this._argIndex,R.INTERIOR));this._lineEdgeMap.put(o,f),this.insertEdge(f),L.isTrue(a.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,a[0]),this.insertBoundaryPoint(this._argIndex,a[a.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var o=this.getBoundaryNodes(),a=new Array(o.size()).fill(null),f=0,y=o.iterator();y.hasNext();){var x=y.next();a[f++]=x.getCoordinate().copy()}return a},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(o,a,f){if(this.isBoundaryNode(o,a))return null;f===R.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(o,a):this.insertPoint(o,a,f)},e.prototype.addPolygonRing=function(o,a,f){if(o.isEmpty())return null;var y=pe.removeRepeatedPoints(o.getCoordinates());if(y.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=y[0],null;var x=a,C=f;Mt.isCCW(y)&&(x=f,C=a);var B=new ko(y,new en(this._argIndex,R.BOUNDARY,x,C));this._lineEdgeMap.put(o,B),this.insertEdge(B),this.insertPoint(this._argIndex,y[0],R.BOUNDARY)},e.prototype.insertPoint=function(o,a,f){var y=this._nodes.addNode(a),x=y.getLabel();null===x?y._label=new en(o,f):x.setLocation(o,f)},e.prototype.createEdgeSetIntersector=function(){return new wl},e.prototype.addSelfIntersectionNodes=function(o){for(var a=this._edges.iterator();a.hasNext();)for(var f=a.next(),y=f.getLabel().getLocation(o),x=f.eiList.iterator();x.hasNext();){var C=x.next();this.addSelfIntersectionNode(o,C.coord,y)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var o=arguments[0];if(o.isEmpty())return null;if(o instanceof mi&&(this._useBoundaryDeterminationRule=!1),o instanceof Sn)this.addPolygon(o);else if(o instanceof _n)this.addLineString(o);else if(o instanceof Pr)this.addPoint(o);else if(o instanceof Ro)this.addCollection(o);else if(o instanceof po)this.addCollection(o);else if(o instanceof mi)this.addCollection(o);else{if(!(o instanceof hr))throw new Error(o.getClass().getName());this.addCollection(o)}},e.prototype.addCollection=function(o){for(var a=0;a<o.getNumGeometries();a++){var f=o.getGeometryN(a);this.add(f)}},e.prototype.locate=function(o){return Nt(this._parentGeom,Vi)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new is(this._parentGeom)),this._areaPtLocator.locate(o)):this._ptLocator.locate(o,this._parentGeom)},e.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(o,a){return o.isInBoundary(a)?R.BOUNDARY:R.INTERIOR},e}(dn),io=function(){if(this._li=new Ct,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new zo(0,t)}else if(2===arguments.length){var e=arguments[0],o=arguments[1],a=tn.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new zo(0,e,a),this._arg[1]=new zo(1,o,a)}else if(3===arguments.length){var f=arguments[0],y=arguments[1],x=arguments[2];f.getPrecisionModel().compareTo(y.getPrecisionModel())>=0?this.setComputationPrecision(f.getPrecisionModel()):this.setComputationPrecision(y.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new zo(0,f,x),this._arg[1]=new zo(1,y,x)}};io.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},io.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},io.prototype.interfaces_=function(){return[]},io.prototype.getClass=function(){return io};var Mo=function(){};Mo.prototype.interfaces_=function(){return[]},Mo.prototype.getClass=function(){return Mo},Mo.map=function(){if(arguments[0]instanceof Gt&&Nt(arguments[1],Mo.MapOp)){for(var t=arguments[0],e=arguments[1],o=new kt,a=0;a<t.getNumGeometries();a++){var f=e.map(t.getGeometryN(a));null!==f&&o.add(f)}return t.getFactory().buildGeometry(o)}if(Nt(arguments[0],pn)&&Nt(arguments[1],Mo.MapOp)){for(var y=arguments[0],x=arguments[1],C=new kt,B=y.iterator();B.hasNext();){var rt=B.next(),Et=x.map(rt);null!==Et&&C.add(Et)}return C}},Mo.MapOp=function(){};var he=function(t){function e(){var o=arguments[0];t.call(this,o,arguments[1]),this._ptLocator=new ui,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new oi,this._resultPolyList=new kt,this._resultLineList=new kt,this._resultPointList=new kt,this._graph=new dn(new hu),this._geomFact=o.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(o){var a=this._edgeList.findEqualEdge(o);if(null!==a){var f=a.getLabel(),y=o.getLabel();a.isPointwiseEqual(o)||(y=new en(o.getLabel())).flip();var x=a.getDepth();x.isNull()&&x.add(f),x.add(y),f.merge(y)}else this._edgeList.add(o)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var o=this._graph.getEdgeEnds().iterator();o.hasNext();){var a=o.next(),f=a.getSym();a.isInResult()&&f.isInResult()&&(a.setInResult(!1),f.setInResult(!1))}},e.prototype.isCoveredByLA=function(o){return!!this.isCovered(o,this._resultLineList)||!!this.isCovered(o,this._resultPolyList)},e.prototype.computeGeometry=function(o,a,f,y){var x=new kt;return x.addAll(o),x.addAll(a),x.addAll(f),x.isEmpty()?e.createEmptyResult(y,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(x)},e.prototype.mergeSymLabels=function(){for(var o=this._graph.getNodes().iterator();o.hasNext();)o.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(o,a){for(var f=a.iterator();f.hasNext();){var y=f.next();if(this._ptLocator.locate(o,y)!==R.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var o=new kt,a=this._edgeList.iterator();a.hasNext();){var f=a.next();f.isCollapsed()&&(a.remove(),o.add(f.getCollapsedEdge()))}this._edgeList.addAll(o)},e.prototype.updateNodeLabelling=function(){for(var o=this._graph.getNodes().iterator();o.hasNext();){var a=o.next(),f=a.getEdges().getLabel();a.getLabel().merge(f)}},e.prototype.getResultGeometry=function(o){return this.computeOverlay(o),this._resultGeom},e.prototype.insertUniqueEdges=function(o){for(var a=o.iterator();a.hasNext();){var f=a.next();this.insertUniqueEdge(f)}},e.prototype.computeOverlay=function(o){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var a=new kt;this._arg[0].computeSplitEdges(a),this._arg[1].computeSplitEdges(a),this.insertUniqueEdges(a),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Co.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(o),this.cancelDuplicateResultEdges();var f=new rr(this._geomFact);f.add(this._graph),this._resultPolyList=f.getPolygons();var y=new Ii(this,this._geomFact,this._ptLocator);this._resultLineList=y.build(o);var x=new Uo(this,this._geomFact,this._ptLocator);this._resultPointList=x.build(o),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,o)},e.prototype.labelIncompleteNode=function(o,a){var f=this._ptLocator.locate(o.getCoordinate(),this._arg[a].getGeometry());o.getLabel().setLocation(a,f)},e.prototype.copyPoints=function(o){for(var a=this._arg[o].getNodeIterator();a.hasNext();){var f=a.next();this._graph.addNode(f.getCoordinate()).setLabel(o,f.getLabel().getLocation(o))}},e.prototype.findResultAreaEdges=function(o){for(var a=this._graph.getEdgeEnds().iterator();a.hasNext();){var f=a.next(),y=f.getLabel();y.isArea()&&!f.isInteriorAreaEdge()&&e.isResultOfOp(y.getLocation(0,Bt.RIGHT),y.getLocation(1,Bt.RIGHT),o)&&f.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var o=this._edgeList.iterator();o.hasNext();){var a=o.next(),f=a.getLabel(),y=a.getDepth();if(!y.isNull()){y.normalize();for(var x=0;x<2;x++)f.isNull(x)||!f.isArea()||y.isNull(x)||(0===y.getDelta(x)?f.toLine(x):(L.isTrue(!y.isNull(x,Bt.LEFT),"depth of LEFT side has not been initialized"),f.setLocation(x,Bt.LEFT,y.getLocation(x,Bt.LEFT)),L.isTrue(!y.isNull(x,Bt.RIGHT),"depth of RIGHT side has not been initialized"),f.setLocation(x,Bt.RIGHT,y.getLocation(x,Bt.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var o=this._graph.getNodes().iterator();o.hasNext();)o.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var o=this._graph.getNodes().iterator();o.hasNext();){var a=o.next(),f=a.getLabel();a.isIsolated()&&(f.isNull(0)?this.labelIncompleteNode(a,0):this.labelIncompleteNode(a,1)),a.getEdges().updateLabelling(f)}},e.prototype.isCoveredByA=function(o){return!!this.isCovered(o,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(io);he.overlayOp=function(t,e,o){return new he(t,e).getResultGeometry(o)},he.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return he.createEmptyResult(he.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var o=e;return Io.map(t,{interfaces_:function(){return[Mo.MapOp]},map:function(a){return a.intersection(o)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Un.overlayOp(t,e,he.INTERSECTION)},he.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return he.createEmptyResult(he.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Un.overlayOp(t,e,he.SYMDIFFERENCE)},he.resultDimension=function(t,e,o){var a=e.getDimension(),f=o.getDimension(),y=-1;switch(t){case he.INTERSECTION:y=Math.min(a,f);break;case he.UNION:y=Math.max(a,f);break;case he.DIFFERENCE:y=a;break;case he.SYMDIFFERENCE:y=Math.max(a,f)}return y},he.createEmptyResult=function(t,e,o,a){var f=null;switch(he.resultDimension(t,e,o)){case-1:f=a.createGeometryCollection(new Array(0).fill(null));break;case 0:f=a.createPoint();break;case 1:f=a.createLineString();break;case 2:f=a.createPolygon()}return f},he.difference=function(t,e){return t.isEmpty()?he.createEmptyResult(he.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Un.overlayOp(t,e,he.DIFFERENCE))},he.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],o=t.getLocation(0),a=t.getLocation(1);return he.isResultOfOp(o,a,e)}if(3===arguments.length){var f=arguments[0],y=arguments[1];switch(f===R.BOUNDARY&&(f=R.INTERIOR),y===R.BOUNDARY&&(y=R.INTERIOR),arguments[2]){case he.INTERSECTION:return f===R.INTERIOR&&y===R.INTERIOR;case he.UNION:return f===R.INTERIOR||y===R.INTERIOR;case he.DIFFERENCE:return f===R.INTERIOR&&y!==R.INTERIOR;case he.SYMDIFFERENCE:return f===R.INTERIOR&&y!==R.INTERIOR||f!==R.INTERIOR&&y===R.INTERIOR}return!1}},he.INTERSECTION=1,he.UNION=2,he.DIFFERENCE=3,he.SYMDIFFERENCE=4;var ki=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new ui,this._seg=new Kt;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};ki.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var o=this._linework.getGeometryN(e).getCoordinateSequence(),a=0;a<o.size()-1;a++)if(o.getCoordinate(a,this._seg.p0),o.getCoordinate(a+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},ki.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?R.BOUNDARY:this._ptLocator.locate(t,this._g)},ki.prototype.extractLinework=function(t){var e=new os;t.apply(e);var o=e.getLinework(),a=ve.toLineStringArray(o);return t.getFactory().createMultiLineString(a)},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki};var os=function(){this._linework=null,this._linework=new kt};os.prototype.getLinework=function(){return this._linework},os.prototype.filter=function(t){if(t instanceof Sn){var e=t;this._linework.add(e.getExteriorRing());for(var o=0;o<e.getNumInteriorRing();o++)this._linework.add(e.getInteriorRingN(o))}},os.prototype.interfaces_=function(){return[Kr]},os.prototype.getClass=function(){return os};var oo=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};oo.prototype.extractPoints=function(t,e,o){for(var a=t.getCoordinates(),f=0;f<a.length-1;f++)this.computeOffsetPoints(a[f],a[f+1],e,o)},oo.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},oo.prototype.getPoints=function(t){for(var e=new kt,o=Qn.getLines(this._g).iterator();o.hasNext();){var a=o.next();this.extractPoints(a,t,e)}return e},oo.prototype.computeOffsetPoints=function(t,e,o,a){var f=e.x-t.x,y=e.y-t.y,x=Math.sqrt(f*f+y*y),C=o*f/x,B=o*y/x,rt=(e.x+t.x)/2,Et=(e.y+t.y)/2;if(this._doLeft){var Pt=new w(rt-B,Et+C);a.add(Pt)}if(this._doRight){var Ut=new w(rt+B,Et-C);a.add(Ut)}},oo.prototype.interfaces_=function(){return[]},oo.prototype.getClass=function(){return oo};var Mr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new kt;var e=arguments[0],o=arguments[1],a=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,o),this._geom=[e,o,a],this._locFinder=[new ki(this._geom[0],this._boundaryDistanceTolerance),new ki(this._geom[1],this._boundaryDistanceTolerance),new ki(this._geom[2],this._boundaryDistanceTolerance)]},Hs={TOLERANCE:{configurable:!0}};Mr.prototype.reportResult=function(t,e,o){Jt.out.println("Overlay result invalid - A:"+R.toLocationSymbol(e[0])+" B:"+R.toLocationSymbol(e[1])+" expected:"+(o?"i":"e")+" actual:"+R.toLocationSymbol(e[2]))},Mr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Mr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var o=this._testCoords.get(e);if(!this.checkValid(t,o))return this._invalidLocation=o,!1}return!0}if(2===arguments.length){var a=arguments[0],f=arguments[1];return this._location[0]=this._locFinder[0].getLocation(f),this._location[1]=this._locFinder[1].getLocation(f),this._location[2]=this._locFinder[2].getLocation(f),!!Mr.hasLocation(this._location,R.BOUNDARY)||this.isValidResult(a,this._location)}},Mr.prototype.addTestPts=function(t){var e=new oo(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Mr.prototype.isValidResult=function(t,e){var o=he.isResultOfOp(e[0],e[1],t),a=!(o^e[2]===R.INTERIOR);return a||this.reportResult(t,e,o),a},Mr.prototype.getInvalidLocation=function(){return this._invalidLocation},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.hasLocation=function(t,e){for(var o=0;o<3;o++)if(t[o]===e)return!0;return!1},Mr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(xn.computeSizeBasedSnapTolerance(t),xn.computeSizeBasedSnapTolerance(e))},Mr.isValid=function(t,e,o,a){return new Mr(t,e,a).isValid(o)},Hs.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Mr,Hs);var Dr=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Dr.prototype.extractElements=function(t,e){if(null===t)return null;for(var o=0;o<t.getNumGeometries();o++){var a=t.getGeometryN(o);this._skipEmpty&&a.isEmpty()||e.add(a)}},Dr.prototype.combine=function(){for(var t=new kt,e=this._inputGeoms.iterator();e.hasNext();){var o=e.next();this.extractElements(o,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.combine=function(){return 1===arguments.length?new Dr(arguments[0]).combine():2===arguments.length?new Dr(Dr.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Dr(Dr.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Dr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Dr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],o=new kt;return o.add(t),o.add(e),o}if(3===arguments.length){var a=arguments[0],f=arguments[1],y=arguments[2],x=new kt;return x.add(a),x.add(f),x.add(y),x}};var En=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new kt)},Ws={STRTREE_NODE_CAPACITY:{configurable:!0}};En.prototype.reduceToGeometries=function(t){for(var e=new kt,o=t.iterator();o.hasNext();){var a=o.next(),f=null;Nt(a,Xn)?f=this.unionTree(a):a instanceof Gt&&(f=a),e.add(f)}return e},En.prototype.extractByEnvelope=function(t,e,o){for(var a=new kt,f=0;f<e.getNumGeometries();f++){var y=e.getGeometryN(f);y.getEnvelopeInternal().intersects(t)?a.add(y):o.add(y)}return this._geomFactory.buildGeometry(a)},En.prototype.unionOptimized=function(t,e){var o=t.getEnvelopeInternal(),a=e.getEnvelopeInternal();if(!o.intersects(a))return Dr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var f=o.intersection(a);return this.unionUsingEnvelopeIntersection(t,e,f)},En.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new au(En.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var o=e.next();t.insert(o.getEnvelopeInternal(),o)}this._inputPolys=null;var a=t.itemsTree();return this.unionTree(a)},En.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],o=arguments[1],a=arguments[2];if(a-o<=1){var f=En.getGeometry(e,o);return this.unionSafe(f,null)}if(a-o==2)return this.unionSafe(En.getGeometry(e,o),En.getGeometry(e,o+1));var y=Math.trunc((a+o)/2),x=this.binaryUnion(e,o,y),C=this.binaryUnion(e,y,a);return this.unionSafe(x,C)}},En.prototype.repeatedUnion=function(t){for(var e=null,o=t.iterator();o.hasNext();){var a=o.next();e=null===e?a.copy():e.union(a)}return e},En.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},En.prototype.unionActual=function(t,e){return En.restrictToPolygons(t.union(e))},En.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},En.prototype.unionUsingEnvelopeIntersection=function(t,e,o){var a=new kt,f=this.extractByEnvelope(o,t,a),y=this.extractByEnvelope(o,e,a),x=this.unionActual(f,y);return a.add(x),Dr.combine(a)},En.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],o=arguments[1];return e.getFactory().createGeometryCollection([e,o]).buffer(0)}},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En},En.restrictToPolygons=function(t){if(Nt(t,Vi))return t;var e=Yi.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ve.toPolygonArray(e))},En.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},En.union=function(t){return new En(t).union()},Ws.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(En,Ws);var ss=function(){};ss.prototype.interfaces_=function(){return[]},ss.prototype.getClass=function(){return ss},ss.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return he.createEmptyResult(he.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Un.overlayOp(t,e,he.UNION)},Q.GeoJSONReader=ya,Q.GeoJSONWriter=ou,Q.OverlayOp=he,Q.UnionOp=ss,Q.BufferOp=Zn,Object.defineProperty(Q,"__esModule",{value:!0})}(yt)},3006:Dt=>{Dt.exports=F,Dt.exports.parse=F,Dt.exports.stringify=function V(I){function c(It){return It.join(" ")}function nt(It){return It.map(c).join(", ")}function H(It){return It.map(nt).map(ft).join(", ")}function ft(It){return"("+It+")"}switch("Feature"===I.type&&(I=I.geometry),I.type){case"Point":return"POINT ("+c(I.coordinates)+")";case"LineString":return"LINESTRING ("+nt(I.coordinates)+")";case"Polygon":return"POLYGON ("+H(I.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+nt(I.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+I.coordinates.map(H).map(ft).join(", ")+")";case"MultiLineString":return"MULTILINESTRING ("+H(I.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+I.geometries.map(V).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var yt=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,Q=new RegExp("^"+yt.source+"(\\s"+yt.source+"){1,}");function F(I){var P,c=I.split(";"),nt=c.pop(),H=(c.shift()||"").split("=").pop(),ot=0;function ft(P){var N=nt.substring(ot).match(P);return N?(ot+=N[0].length,N[0]):null}function Tt(){ft(/^\s*/)}function xt(){Tt();for(var st,P=0,N=[],O=[N],w=N;st=ft(/^(\()/)||ft(/^(\))/)||ft(/^(,)/)||ft(Q);){if("("===st)O.push(w),O[O.length-1].push(w=[]),P++;else if(")"===st){if(0===w.length||!(w=O.pop()))return null;if(0==--P)break}else if(","===st)O[O.length-1].push(w=[]);else{if(st.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(w,st.split(/\s/g).map(parseFloat))}Tt()}return 0!==P?null:N}function mt(){for(var N,O,P=[];O=ft(Q)||ft(/^(,)/);)","===O?(P.push(N),N=[]):O.split(/\s/g).some(isNaN)||(N||(N=[]),Array.prototype.push.apply(N,O.split(/\s/g).map(parseFloat))),Tt();return N?(P.push(N),P.length?P:null):null}return(P=function U(){return function(){if(!ft(/^(point(\sz)?)/i)||(Tt(),!ft(/^(\()/)))return null;var P=mt();return P&&(Tt(),ft(/^(\))/))?{type:"Point",coordinates:P[0]}:null}()||function(){if(!ft(/^(linestring(\sz)?)/i)||(Tt(),!ft(/^(\()/)))return null;var P=mt();return P&&ft(/^(\))/)?{type:"LineString",coordinates:P}:null}()||function(){if(!ft(/^(polygon(\sz)?)/i))return null;Tt();var P=xt();return P?{type:"Polygon",coordinates:P}:null}()||function(){if(!ft(/^(multipoint)/i))return null;Tt();var P=nt.substring(nt.indexOf("(")+1,nt.length-1).replace(/\(/g,"").replace(/\)/g,"");nt="MULTIPOINT ("+P+")";var N=xt();return N?(Tt(),{type:"MultiPoint",coordinates:N}):null}()||function(){if(!ft(/^(multilinestring)/i))return null;Tt();var P=xt();return P?(Tt(),{type:"MultiLineString",coordinates:P}):null}()||function(){if(!ft(/^(multipolygon)/i))return null;Tt();var P=xt();return P?{type:"MultiPolygon",coordinates:P}:null}()||function(){var N,P=[];if(!ft(/^(geometrycollection)/i)||(Tt(),!ft(/^(\()/)))return null;for(;N=U();)P.push(N),Tt(),ft(/^(,)/),Tt();return ft(/^(\))/)?{type:"GeometryCollection",geometries:P}:null}()}())&&H.match(/\d+/)&&(P.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+H}}),P}},2012:(Dt,yt,Q)=>{"use strict";Q.r(yt),Q.d(yt,{DashboardModule:()=>cd});var F=Q(8583),V=Q(6901),I=Q(2936),c=Q(639);function nt(n,r){if(1&n&&(c.TgZ(0,"div",56),c.TgZ(1,"span",57),c._UZ(2,"span",58),c.qZA(),c.TgZ(3,"span",43),c._uU(4),c.qZA(),c._UZ(5,"span",59),c.TgZ(6,"span",60),c._uU(7),c.qZA(),c.qZA()),2&n){const i=r.$implicit;c.xp6(4),c.Oqu(i.title),c.xp6(1),c.Q6J("innerHTML",i.content,c.oJD),c.xp6(2),c.Oqu(i.created_at)}}function H(n,r){1&n&&(c.TgZ(0,"div",41),c.TgZ(1,"span",43),c._uU(2,"No messages"),c.qZA(),c.qZA())}const ot=function(n,r,i){return{"fg-blue":n,"fg-amber":r,"fg-red":i}},ft=function(n,r,i){return{"mif-info":n,"mif-warning":r,"mif-notification":i}};function It(n,r){if(1&n&&(c.TgZ(0,"div",56),c.TgZ(1,"span",57),c._UZ(2,"span",58),c.qZA(),c.TgZ(3,"span",43),c._uU(4),c.qZA(),c.TgZ(5,"span",44),c._uU(6),c.qZA(),c.TgZ(7,"span",60),c._uU(8),c.qZA(),c.qZA()),2&n){const i=r.$implicit;c.Tol(c.kEZ(7,ot,0==i.notification_type_id,1==i.notification_type_id,2==i.notification_type_id)),c.xp6(2),c.Tol(c.kEZ(11,ft,0==i.notification_type_id,1==i.notification_type_id,2==i.notification_type_id)),c.xp6(2),c.Oqu(i.title),c.xp6(2),c.Oqu(i.description),c.xp6(2),c.Oqu(i.created_at)}}function Tt(n,r){1&n&&(c.TgZ(0,"div",41),c.TgZ(1,"span",43),c._uU(2,"No notifications"),c.qZA(),c.qZA())}function xt(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"li",61),c.NdJ("click",function(){return c.CHM(i),c.oxw().locate("upload")}),c.TgZ(1,"a",62),c._uU(2,"Upload"),c.qZA(),c.qZA()}}function mt(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"li",63),c.NdJ("click",function(){return c.CHM(i),c.oxw().locate("standard")}),c.TgZ(1,"a",64),c._uU(2,"Standardize"),c.qZA(),c.qZA()}}function wt(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"li",65),c.NdJ("click",function(){return c.CHM(i),c.oxw().locate("management")}),c.TgZ(1,"a",66),c._uU(2,"User-Management"),c.qZA(),c.qZA()}}function qt(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"li",67),c.NdJ("click",function(){return c.CHM(i),c.oxw().locate("schema")}),c.TgZ(1,"a",68),c._uU(2,"Data-Schema"),c.qZA(),c.qZA()}}function et(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"a",69),c.TgZ(2,"span",23),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",70),c.TgZ(5,"div",71),c._UZ(6,"div",72),c._UZ(7,"div",73),c._UZ(8,"div",74),c.qZA(),c.TgZ(9,"div",75),c.TgZ(10,"button",76),c.NdJ("click",function(){return c.CHM(i),c.oxw().logout()}),c._UZ(11,"span",77),c.TgZ(12,"span",38),c._uU(13,"Logout"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&n){const i=c.oxw();c.xp6(3),c.AsE("",i.profile.first_name," ",i.profile.last_name,"")}}function pt(n,r){1&n&&c._UZ(0,"span",78)}function b(n,r){1&n&&c._UZ(0,"span",79)}function S(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"button",80),c.NdJ("click",function(){return c.CHM(i),c.oxw().checkPendingStatus()}),c._uU(1,"Refresh Status"),c.qZA()}}function M(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"button",81),c.NdJ("click",function(){return c.CHM(i),c.oxw().cancelPendingTransactions()}),c._uU(1,"Cancel Transaction"),c.qZA()}}let U=(()=>{class n{constructor(i){this.data=i,this.alerts=[],this.inbox=[],this.coins=[],this.btcUsdPrice=0,this.currentSelectedCoin={},this.currentCoinPrice=0,this.currentRoute="",this.$=$,this.profile={id:-1,user_id:1,first_name:"",last_name:"",description:"",mobile:"",banner_path:null,ref_code:"",created_at:"",updated_at:"",picture:"",email:"",no_of_properties:-1,inward:-1,outward:-1,net_worth:-1,reserve:-1,pending:null},this.pendingTransaction={pay_address:"",amount:"",qrcode:"assets/coin.png",status:"pending",coin_status:"",name:"",icon:"assets/coin.png",coin_id:"",coin_amount:""},this.currentRoute=this.data.getRole(),setTimeout(()=>{const s=location.hash.split("/").pop();Metro.getPlugin("#main-menu").materialtabs.openTab($(`li[routerLink="${s}"]`))},200)}ngOnInit(){this.getProfile(),this.data.currentMessage.subscribe(i=>{"get-settings"===i&&this.getSettings(),"cancel-pending"===i&&this.cancelPendingTransactions()})}getProfile(i=!1){i||I.F.loading("profile"),this.data.apiGetService("profile").subscribe(s=>{i||I.F.loading("profile",!0),I.F.profile=this.profile=s,this.startPendingCheck(),this.data.changeMessage("fetch-profile"),null!=this.profile.picture&&$("#dp").css("backgroundImage",`url('${I.F.server+this.profile.picture}')`)},s=>{i||I.F.loading("profile",!0)})}getSettings(){I.F.loading("settings"),this.data.apiGetService("user/settings").subscribe(i=>{I.F.loading("settings",!0),I.F.settings=i,this.data.changeMessage("fetch-settings")},i=>{I.F.loading("settings",!0)})}login(){this.data.redirect("login")}logout(){this.data.logOut()}getRates(){I.F.loading("rates"),this.data.apiGetService("rates").subscribe(i=>{I.F.loading("rates",!0),$("#coins").off("change").empty(),this.coins=[];var s=Object.keys(i.result);let u=0;s.forEach(h=>{const g=i.result[h];g.coin_id=h,"USD"!=h?"online"===g.status&&-1!==g.capabilities.indexOf("payments")&&(this.coins.push(g),$("#coins").append(`<option value="${u}" data-template="<img style='height:20px;margin-left:5px;' src='${g.image}'> $1">${g.name}</option>`),u++):this.btcUsdPrice=1/g.rate_btc}),Metro.getPlugin("#coins","select").reset(),$("#lima-to-buy").on("keyup",()=>{$("#coins").trigger("change")}),$("#coins").on("change",()=>{const h=Metro.getPlugin("#coins","select");this.currentSelectedCoin=this.coins[h.val()];const d=1/(this.currentSelectedCoin.rate_btc*this.btcUsdPrice),p=$("#lima-to-buy").val();this.currentCoinPrice=p*d,$("#coin-value").html(this.currentCoinPrice)}),$("#coins").trigger("change")},i=>{I.F.loading("rates",!0)})}buyCoins(){const i=$("#lima-to-buy").val();if(""==i.trim()||!this.currentSelectedCoin.hasOwnProperty("name"))return I.F.invalidForm("#wallet-dialog"),void I.F.fire("Please enter coin quantity",!0);const u={coin:btoa(JSON.stringify({name:this.currentSelectedCoin.name,icon:this.currentSelectedCoin.image,coin_id:this.currentSelectedCoin.coin_id})),amount:i};I.F.loading("transaction"),Metro.dialog.close("#wallet-dialog"),this.data.apiService("transaction",u).subscribe(l=>{if(I.F.loading("transaction",!0),l.status||"pending"!==l.message)l.status?(this.storePendingDetails(l.results),this.startPendingCheck(),Metro.dialog.open("#pending-dialog")):I.F.fire(l.message,!0);else{this.storePendingDetails(l.results);const h=this;Metro.dialog.create({title:"Pending Transaction",content:"You already have a ongoing transaction",clsDialog:"alert",actions:[{caption:"Cancel Pending Transaction",cls:"js-dialog-close warning",onclick:function(){h.cancelPendingTransactions()}},{caption:"View Details",cls:"js-dialog-close success",onclick:function(){Metro.dialog.open("#pending-dialog")}},{caption:"Close",cls:"js-dialog-close alert",onclick:function(){}}]})}},l=>{I.F.loading("transaction",!0),I.F.fire("Internal Error",!0)})}startPendingCheck(){clearInterval(I.F.checkPendingIntervalId),null!=this.profile.pending&&setTimeout(()=>{I.F.checkPendingIntervalId=setInterval(()=>{null!=this.profile.pending?this.data.apiGetService(`check-auto-transactions/${this.profile.pending}`).subscribe(i=>{"credited"===i.status&&(clearInterval(I.F.checkPendingIntervalId),this.storePendingDetails(i.results),this.data.changeMessage("get-profile"))},i=>{clearInterval(I.F.checkPendingIntervalId)}):clearInterval(I.F.checkPendingIntervalId)},2e4)},12e4)}storePendingDetails(i){const s=JSON.parse(atob(i.coin_name));this.pendingTransaction.status=i.status,this.pendingTransaction.coin_status=i.coin_status,this.pendingTransaction.qrcode=i.qrcode,this.pendingTransaction.amount=i.amount,this.pendingTransaction.coin_amount=i.coin_amount,this.pendingTransaction.pay_address=i.pay_address,this.pendingTransaction.name=s.name,this.pendingTransaction.icon=s.icon,this.pendingTransaction.coin_id=s.coin_id,this.profile.pending=i.order_id,"credited"===this.pendingTransaction.status&&(this.profile.pending=null)}cancelPendingTransactions(){I.F.loading("cancel-pending"),this.data.apiGetService("cancel-pending-transactions").subscribe(i=>{I.F.loading("cancel-pending",!0),I.F.fire(i.message,!i.status),i.status&&(this.data.changeMessage("get-profile"),this.data.changeMessage("cancel-pending-done"))},i=>{I.F.loading("cancel-pending",!0),I.F.fire("Internal Error",!0)})}checkPendingStatus(){I.F.loading("check-pending"),this.data.apiGetService("check-pending-transactions").subscribe(i=>{I.F.loading("check-pending",!0),i.status&&("credited"===i.results.status&&this.data.changeMessage("get-profile"),this.storePendingDetails(i.results)),I.F.fire(i.message,!i.status)},i=>{I.F.loading("check-pending",!0),I.F.fire("Internal Error",!0)})}locate(i){setTimeout(()=>{location.href=location.origin+"/#/dashboard/app/"+i,location.reload(!0)},300)}}return n.\u0275fac=function(i){return new(i||n)(c.Y36(I.F))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dashboard"]],decls:106,vars:21,consts:[["id","inbox","data-role","panel","data-width","280","data-title-caption","Inbox","data-title-icon","<span class='mif-envelop'></span>","data-collapsible","true","data-cls-panel","shadow-3","data-cls-title","bg-darkTeal fg-white","data-cls-title-icon","fg-white","data-cls-collapse-toggle","bg-gray fg-white marker-dark",1,"w-75","z-inbox","d-none","pos-absolute",3,"collapse"],[1,"items-list",2,"max-height","480px","overflow","auto"],["class","item h-auto","style","min-height: 90px;",4,"ngFor","ngForOf"],["class","item",4,"ngIf"],["routerLink","inbox",1,"button","small","light",2,"text-decoration","none","position","sticky","bottom","5px"],["id","alerts","data-role","panel","data-width","280","data-title-caption","Notifications","data-title-icon","<span class='mif-bell'></span>","data-collapsible","true","data-cls-panel","shadow-3","data-cls-title","bg-darkTeal fg-white","data-cls-title-icon","fg-white","data-cls-collapse-toggle","bg-gray fg-white marker-dark",1,"w-75","z-inbox","d-none","pos-absolute",3,"collapse"],[1,"items-list",2,"max-height","370px","overflow","auto"],["class","item h-auto","style","min-height: 90px;",3,"class",4,"ngFor","ngForOf"],["routerLink","alerts",1,"button","small","light",2,"text-decoration","none","position","sticky","bottom","5px"],["data-role","appbar","data-expand-point","md",1,"d-flex",2,"background","#babfc1"],["href","#",1,"brand","no-hover"],["src","assets/logo.jpg",1,"img-fluid",2,"height","50px"],[1,"fg-light",2,"font-weight","200"],["id","main-menu","data-app-bar","false","data-role","materialtabs",1,"bg-transparent","fg-light"],["routerLink","map",3,"click"],["href","#map"],["routerLink","upload",3,"click",4,"ngIf"],["routerLink","standard",3,"click",4,"ngIf"],["routerLink","management",3,"click",4,"ngIf"],["routerLink","schema",3,"click",4,"ngIf"],[1,"app-bar-container","ml-auto"],[1,"app-bar-container","bg-grayBlue","fg-light",2,"z-index","100000","position","fixed","top","0","right","0"],[1,"app-bar-item","c-pointer",3,"click"],[1,"ml-2","app-bar-name"],["class","app-bar-container bg-grayBlue fg-light","style","z-index: 100000;position: fixed;top: 0; right: 0",4,"ngIf"],["id","wallet-dialog","data-role","dialog",1,"dialog","fg-amber","border-none",2,"background","rgba(0,0,0,0.8)"],[1,"dialog-title"],[1,"dialog-content"],[1,"skills","p-3"],["data-role","input","type","number","id","lima-to-buy","value","1"],["for","coins"],["id","coins","data-role","select"],[1,"d-block"],["id","coin-value"],[1,"dialog-actions"],[1,"button","js-dialog-close","alert"],[1,"image-button","dark",3,"click"],["src","assets/coin.png",1,"icon"],[1,"caption"],["id","pending-dialog","data-role","dialog",1,"dialog","fg-amber","border-none",2,"background","rgba(0,0,0,0.8)","min-width","550px"],[1,"items-list"],[1,"item"],[1,"avatar",3,"src"],[1,"label"],[1,"second-label"],["src","assets/coin.png",1,"avatar"],[1,"avatar","mif-dollars"],[1,"avatar","mif-dollar"],["class","avatar mif-hour-glass",4,"ngIf"],["class","avatar mif-done_all",4,"ngIf"],[1,"label","text-cap"],[1,"item",2,"height","290px"],[3,"src"],["class","button warning",3,"click",4,"ngIf"],["class","button alert js-dialog-close",3,"click",4,"ngIf"],["target","_blank",1,"image-button","dark",3,"href"],[1,"item","h-auto",2,"min-height","90px"],[1,"avatar"],[1,"icon","mif-envelop"],[1,"second-label",3,"innerHTML"],[1,"second-action",2,"width","60px","font-size","10px","height","50px","background","white"],["routerLink","upload",3,"click"],["href","#upload"],["routerLink","standard",3,"click"],["href","#standard"],["routerLink","management",3,"click"],["href","#management"],["routerLink","schema",3,"click"],["href","#schema"],["href","#",1,"app-bar-item"],["data-role","collapse","data-collapsed","true",1,"social-box","shadow-1",2,"position","absolute","top","52px","right","0","width","320px"],[1,"header","bg-darkTeal","fg-white"],["id","dp",1,"avatar",2,"background-repeat","no-repeat","background-position","center","height","90px","background-image","url('assets/logo.jpg')"],[1,"title"],[1,"subtitle"],[1,"d-flex","flex-column","flex-align-center","flex-justify-center"],["data-role","button",1,"image-button","light","w-100","mt-8",3,"click"],[1,"icon","mif-exit"],[1,"avatar","mif-hour-glass"],[1,"avatar","mif-done_all"],[1,"button","warning",3,"click"],[1,"button","alert","js-dialog-close",3,"click"]],template:function(i,s){1&i&&(c.TgZ(0,"div",0),c.NdJ("collapse",function(){return s.$("#inbox").parent().addClass("d-none"),s.$("#inbox").parent().find(".dropdown-toggle").click()}),c.TgZ(1,"div",1),c.YNc(2,nt,8,3,"div",2),c.YNc(3,H,3,0,"div",3),c.TgZ(4,"a",4),c._uU(5,"View All"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",5),c.NdJ("collapse",function(){return s.$("#alerts").parent().addClass("d-none"),s.$("#alerts").parent().find(".dropdown-toggle").click()}),c.TgZ(7,"div",6),c.YNc(8,It,9,15,"div",7),c.YNc(9,Tt,3,0,"div",3),c.TgZ(10,"a",8),c._uU(11,"View All"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",9),c.TgZ(13,"a",10),c._UZ(14,"img",11),c.TgZ(15,"h3",12),c._uU(16,"EARTHIFY"),c.qZA(),c.qZA(),c.TgZ(17,"ul",13),c.TgZ(18,"li",14),c.NdJ("click",function(){return s.locate("map")}),c.TgZ(19,"a",15),c._uU(20,"Map"),c.qZA(),c.qZA(),c.YNc(21,xt,3,0,"li",16),c.YNc(22,mt,3,0,"li",17),c.YNc(23,wt,3,0,"li",18),c.YNc(24,qt,3,0,"li",19),c.qZA(),c.TgZ(25,"div",20),c.TgZ(26,"div",21),c.TgZ(27,"a",22),c.NdJ("click",function(){return s.login()}),c.TgZ(28,"span",23),c._uU(29,"Log Out"),c.qZA(),c.qZA(),c.qZA(),c.YNc(30,et,14,2,"div",24),c.qZA(),c.qZA(),c.TgZ(31,"div",25),c.TgZ(32,"div",26),c._uU(33,"Buy Earthify Coin"),c.qZA(),c.TgZ(34,"div",27),c.TgZ(35,"div",28),c.TgZ(36,"label"),c._uU(37,"Quantity"),c.qZA(),c._UZ(38,"input",29),c.TgZ(39,"label",30),c._uU(40,"Coins"),c.qZA(),c._UZ(41,"select",31),c.TgZ(42,"span",32),c._uU(43,"Coin converted value"),c.qZA(),c._UZ(44,"span",33),c.qZA(),c.qZA(),c.TgZ(45,"div",34),c.TgZ(46,"button",35),c._uU(47,"Close"),c.qZA(),c.TgZ(48,"button",36),c.NdJ("click",function(){return s.buyCoins()}),c._UZ(49,"img",37),c.TgZ(50,"span",38),c._uU(51,"Pay via "),c.TgZ(52,"b"),c._uU(53,"Coinpayments"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(54,"div",39),c.TgZ(55,"div",26),c._uU(56,"Pending Transaction"),c.qZA(),c.TgZ(57,"div",27),c.TgZ(58,"div",40),c.TgZ(59,"div",41),c._UZ(60,"img",42),c.TgZ(61,"span",43),c._uU(62),c.qZA(),c.TgZ(63,"span",44),c._uU(64,"Coin"),c.qZA(),c.qZA(),c.TgZ(65,"div",41),c._UZ(66,"img",45),c.TgZ(67,"span",43),c._uU(68),c.qZA(),c.TgZ(69,"span",44),c._uU(70,"Address to pay"),c.qZA(),c.qZA(),c.TgZ(71,"div",41),c._UZ(72,"span",46),c.TgZ(73,"span",43),c._uU(74),c.qZA(),c.TgZ(75,"span",44),c._uU(76,"Amount to pay"),c.qZA(),c.qZA(),c.TgZ(77,"div",41),c._UZ(78,"span",47),c.TgZ(79,"span",43),c._uU(80),c.qZA(),c.TgZ(81,"span",44),c._uU(82,"Lima Coins"),c.qZA(),c.qZA(),c.TgZ(83,"div",41),c.YNc(84,pt,1,0,"span",48),c.YNc(85,b,1,0,"span",49),c.TgZ(86,"span",50),c._uU(87),c.qZA(),c.TgZ(88,"span",44),c._uU(89,"Status"),c.qZA(),c.qZA(),c.TgZ(90,"div",51),c._UZ(91,"img",45),c.TgZ(92,"span",43),c._UZ(93,"img",52),c.qZA(),c.TgZ(94,"span",44),c._uU(95,"QR"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(96,"div",34),c.TgZ(97,"button",35),c._uU(98,"Close"),c.qZA(),c.YNc(99,S,2,0,"button",53),c.YNc(100,M,2,0,"button",54),c.TgZ(101,"a",55),c._UZ(102,"img",37),c.TgZ(103,"span",38),c._uU(104,"View Live Details"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(105,"router-outlet")),2&i&&(c.xp6(2),c.Q6J("ngForOf",s.inbox),c.xp6(1),c.Q6J("ngIf",0==s.inbox.length),c.xp6(5),c.Q6J("ngForOf",s.alerts),c.xp6(1),c.Q6J("ngIf",0==s.alerts.length),c.xp6(12),c.Q6J("ngIf","upload"==s.currentRoute||"management"==s.currentRoute),c.xp6(1),c.Q6J("ngIf","standard"==s.currentRoute||"management"==s.currentRoute),c.xp6(1),c.Q6J("ngIf","management"==s.currentRoute),c.xp6(1),c.Q6J("ngIf","management"==s.currentRoute),c.xp6(6),c.Q6J("ngIf",-1!=s.profile.id),c.xp6(30),c.Q6J("src",s.pendingTransaction.icon,c.LSH),c.xp6(2),c.Oqu(s.pendingTransaction.name),c.xp6(6),c.Oqu(s.pendingTransaction.pay_address),c.xp6(6),c.Oqu(s.pendingTransaction.coin_amount),c.xp6(6),c.Oqu(s.pendingTransaction.amount),c.xp6(4),c.Q6J("ngIf","pending"==s.pendingTransaction.status),c.xp6(1),c.Q6J("ngIf","credited"==s.pendingTransaction.status),c.xp6(2),c.Oqu(s.pendingTransaction.status),c.xp6(6),c.Q6J("src",s.pendingTransaction.qrcode,c.LSH),c.xp6(6),c.Q6J("ngIf",null!=s.profile.pending),c.xp6(1),c.Q6J("ngIf",null!=s.profile.pending),c.xp6(1),c.Q6J("href",s.pendingTransaction.coin_status,c.LSH))},directives:[F.sg,F.O5,V.yS,V.rH,V.lC],styles:[""]}),n})();var P=Q(1841);function z(n,r,i){void 0===i&&(i={});var s={type:"Feature"};return(0===i.id||i.id)&&(s.id=i.id),i.bbox&&(s.bbox=i.bbox),s.properties=r||{},s.geometry=n,s}function R(n,r,i){if(void 0===i&&(i={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!on(n[0])||!on(n[1]))throw new Error("coordinates must contain numbers");return z({type:"Point",coordinates:n},r,i)}function Nt(n,r,i){void 0===i&&(i={});for(var s=0,u=n;s<u.length;s++){var l=u[s];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var h=0;h<l[l.length-1].length;h++)if(l[l.length-1][h]!==l[0][h])throw new Error("First and last Position are not equivalent.")}return z({type:"Polygon",coordinates:n},r,i)}function at(n,r){void 0===r&&(r={});var i={type:"FeatureCollection"};return r.id&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.features=n,i}function on(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function dt(n,r,i){if(null!==n)for(var s,u,l,h,g,d,p,_,m=0,v=0,E=n.type,X="FeatureCollection"===E,k="Feature"===E,it=X?n.features.length:1,j=0;j<it;j++){g=(_=!!(p=X?n.features[j].geometry:k?n.geometry:n)&&"GeometryCollection"===p.type)?p.geometries.length:1;for(var q=0;q<g;q++){var Y=0,gt=0;if(null!==(h=_?p.geometries[q]:p)){d=h.coordinates;var ht=h.type;switch(m=!i||"Polygon"!==ht&&"MultiPolygon"!==ht?0:1,ht){case null:break;case"Point":if(!1===r(d,v,j,Y,gt))return!1;v++,Y++;break;case"LineString":case"MultiPoint":for(s=0;s<d.length;s++){if(!1===r(d[s],v,j,Y,gt))return!1;v++,"MultiPoint"===ht&&Y++}"LineString"===ht&&Y++;break;case"Polygon":case"MultiLineString":for(s=0;s<d.length;s++){for(u=0;u<d[s].length-m;u++){if(!1===r(d[s][u],v,j,Y,gt))return!1;v++}"MultiLineString"===ht&&Y++,"Polygon"===ht&&gt++}"Polygon"===ht&&Y++;break;case"MultiPolygon":for(s=0;s<d.length;s++){for(gt=0,u=0;u<d[s].length;u++){for(l=0;l<d[s][u].length-m;l++){if(!1===r(d[s][u][l],v,j,Y,gt))return!1;v++}gt++}Y++}break;case"GeometryCollection":for(s=0;s<h.geometries.length;s++)if(!1===dt(h.geometries[s],r,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Mt(n,r){!function(n,r){var i,s,u,l,h,g,d,p,m,v,_=0,E="FeatureCollection"===n.type,X="Feature"===n.type,k=E?n.features.length:1;for(i=0;i<k;i++){for(p=E?n.features[i].properties:X?n.properties:{},m=E?n.features[i].bbox:X?n.bbox:void 0,v=E?n.features[i].id:X?n.id:void 0,h=(d=!!(g=E?n.features[i].geometry:X?n.geometry:n)&&"GeometryCollection"===g.type)?g.geometries.length:1,u=0;u<h;u++)if(null!==(l=d?g.geometries[u]:g))switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(l,_,p,m,v))return!1;break;case"GeometryCollection":for(s=0;s<l.geometries.length;s++)if(!1===r(l.geometries[s],_,p,m,v))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,_,p,m,v))return!1;_++}}(n,function(i,s,u,l,h){var d,g=null===i?null:i.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return!1!==r(z(i,u,{bbox:l,id:h}),s,0)&&void 0}switch(g){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon"}for(var p=0;p<i.coordinates.length;p++)if(!1===r(z({type:d,coordinates:i.coordinates[p]},u),s,p))return!1})}function hn(n){var r=[1/0,1/0,-1/0,-1/0];return dt(n,function(i){r[0]>i[0]&&(r[0]=i[0]),r[1]>i[1]&&(r[1]=i[1]),r[2]<i[0]&&(r[2]=i[0]),r[3]<i[1]&&(r[3]=i[1])}),r}hn.default=hn;const Cn=hn;function jo(n,r,i){if(void 0===i&&(i={}),!n)throw new Error("point is required");if(!r)throw new Error("polygon is required");var s=function(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(n),u=function(n){return"Feature"===n.type?n.geometry:n}(r),l=u.type,h=r.bbox,g=u.coordinates;if(h&&!1===function(n,r){return r[0]<=n[0]&&r[1]<=n[1]&&r[2]>=n[0]&&r[3]>=n[1]}(s,h))return!1;"Polygon"===l&&(g=[g]);for(var d=!1,p=0;p<g.length&&!d;p++)if(Sr(s,g[p][0],i.ignoreBoundary)){for(var m=!1,v=1;v<g[p].length&&!m;)Sr(s,g[p][v],!i.ignoreBoundary)&&(m=!0),v++;m||(d=!0)}return d}function Sr(n,r,i){var s=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var u=0,l=r.length-1;u<r.length;l=u++){var h=r[u][0],g=r[u][1],d=r[l][0],p=r[l][1];if(n[1]*(h-d)+g*(d-n[0])+p*(n[0]-h)==0&&(h-n[0])*(d-n[0])<=0&&(g-n[1])*(p-n[1])<=0)return!i;g>n[1]!=p>n[1]&&n[0]<(d-h)*(n[1]-g)/(p-g)+h&&(s=!s)}return s}Q(8228),Q(6896);var Fs=new ArrayBuffer(16);new Float64Array(Fs),new Uint32Array(Fs),Q(5454),function(){function n(r){this.points=r.points||[],this.duration=r.duration||1e4,this.sharpness=r.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=r.stepLength||60,this.length=this.points.length,this.delay=0;for(var i=0;i<this.length;i++)this.points[i].z=this.points[i].z||0;for(i=0;i<this.length-1;i++){var s=this.points[i],u=this.points[i+1];this.centers.push({x:(s.x+u.x)/2,y:(s.y+u.y)/2,z:(s.z+u.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),i=0;i<this.centers.length-1;i++){var l=this.points[i+1].x-(this.centers[i].x+this.centers[i+1].x)/2,h=this.points[i+1].y-(this.centers[i].y+this.centers[i+1].y)/2,g=this.points[i+1].z-(this.centers[i].y+this.centers[i+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[i+1].x+this.sharpness*(this.centers[i].x+l),y:(1-this.sharpness)*this.points[i+1].y+this.sharpness*(this.centers[i].y+h),z:(1-this.sharpness)*this.points[i+1].z+this.sharpness*(this.centers[i].z+g)},{x:(1-this.sharpness)*this.points[i+1].x+this.sharpness*(this.centers[i+1].x+l),y:(1-this.sharpness)*this.points[i+1].y+this.sharpness*(this.centers[i+1].y+h),z:(1-this.sharpness)*this.points[i+1].z+this.sharpness*(this.centers[i+1].z+g)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}n.prototype.cacheSteps=function(r){var i=[],s=this.pos(0);i.push(0);for(var u=0;u<this.duration;u+=10){var l=this.pos(u);Math.sqrt((l.x-s.x)*(l.x-s.x)+(l.y-s.y)*(l.y-s.y)+(l.z-s.z)*(l.z-s.z))>r&&(i.push(u),s=l)}return i},n.prototype.vector=function(r){var i=this.pos(r+10),s=this.pos(r-10);return{angle:180*Math.atan2(i.y-s.y,i.x-s.x)/3.14,speed:Math.sqrt((s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y)+(s.z-i.z)*(s.z-i.z))}},n.prototype.pos=function(r){var i=r-this.delay;i<0&&(i=0),i>this.duration&&(i=this.duration-1);var s=i/this.duration;if(s>=1)return this.points[this.length-1];var u=Math.floor((this.points.length-1)*s);return function(n,r,i,s,u){var l=function(n){var r=n*n;return[r*n,3*r*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:u.x*l[0]+s.x*l[1]+i.x*l[2]+r.x*l[3],y:u.y*l[0]+s.y*l[1]+i.y*l[2]+r.y*l[3],z:u.z*l[0]+s.z*l[1]+i.z*l[2]+r.z*l[3]}}((this.length-1)*s-u,this.points[u],this.controls[u][1],this.controls[u+1][0],this.points[u+1])}}();const zs=function(n,r){void 0===r&&(r={});var i=Cn(n);return R([(i[0]+i[2])/2,(i[1]+i[3])/2],r.properties,r)};Q(1604),Q(2689),Q(8309);var fi=Math.PI/180,js=180/Math.PI,$i=function(n,r){this.lon=n,this.lat=r,this.x=fi*n,this.y=fi*r};$i.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},$i.prototype.antipode=function(){return new $i(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var va=function(){this.coords=[],this.length=0};va.prototype.move_to=function(n){this.length++,this.coords.push(n)};var $s=function(n){this.properties=n||{},this.geometries=[]};$s.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],r=0;r<this.geometries.length;r++)n.push(this.geometries[r].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}},$s.prototype.wkt=function(){for(var n="",r="LINESTRING(",i=function(l){r+=l[0]+" "+l[1]+","},s=0;s<this.geometries.length;s++){if(0===this.geometries[s].coords.length)return"LINESTRING(empty)";this.geometries[s].coords.forEach(i),n+=r.substring(0,r.length-1)+")"}return n};var Xr=function(n,r,i){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!r||void 0===r.x||void 0===r.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new $i(n.x,n.y),this.end=new $i(r.x,r.y),this.properties=i||{};var s=this.start.x-this.end.x,l=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(s/2),2);if(this.g=2*Math.asin(Math.sqrt(l)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+r.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+r)};Xr.prototype.interpolate=function(n){var r=Math.sin((1-n)*this.g)/Math.sin(this.g),i=Math.sin(n*this.g)/Math.sin(this.g),s=r*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),u=r*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),l=r*Math.sin(this.start.y)+i*Math.sin(this.end.y),h=js*Math.atan2(l,Math.sqrt(Math.pow(s,2)+Math.pow(u,2)));return[js*Math.atan2(u,s),h]},Xr.prototype.Arc=function(n,r){var i=[];if(!n||n<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(var s=1/(n-1),u=0;u<n;++u){var h=this.interpolate(s*u);i.push(h)}for(var g=!1,d=0,p=r&&r.offset?r.offset:10,m=180-p,v=-180+p,_=360-p,E=1;E<i.length;++E){var X=i[E-1][0],k=i[E][0],it=Math.abs(k-X);it>_&&(k>m&&X<v||X>m&&k<v)?g=!0:it>d&&(d=it)}var j=[];if(g&&d<p){var q=[];j.push(q);for(var Y=0;Y<i.length;++Y){var gt=parseFloat(i[Y][0]);if(Y>0&&Math.abs(gt-i[Y-1][0])>_){var ht=parseFloat(i[Y-1][0]),_t=parseFloat(i[Y-1][1]),vt=parseFloat(i[Y][0]),St=parseFloat(i[Y][1]);if(ht>-180&&ht<v&&180===vt&&Y+1<i.length&&i[Y-1][0]>-180&&i[Y-1][0]<v){q.push([-180,i[Y][1]]),Y++,q.push([i[Y][0],i[Y][1]]);continue}if(ht>m&&ht<180&&-180===vt&&Y+1<i.length&&i[Y-1][0]>m&&i[Y-1][0]<180){q.push([180,i[Y][1]]),Y++,q.push([i[Y][0],i[Y][1]]);continue}if(ht<v&&vt>m){var tt=ht;ht=vt,vt=tt;var se=_t;_t=St,St=se}if(ht>m&&vt<v&&(vt+=360),ht<=180&&vt>=180&&ht<vt){var Ht=(180-ht)/(vt-ht),ye=Ht*St+(1-Ht)*_t;q.push([i[Y-1][0]>m?180:-180,ye]),(q=[]).push([i[Y-1][0]>m?-180:180,ye]),j.push(q)}else j.push(q=[]);q.push([gt,i[Y][1]])}else q.push([i[Y][0],i[Y][1]])}}else{var me=[];j.push(me);for(var zt=0;zt<i.length;++zt)me.push([i[zt][0],i[zt][1]])}for(var oe=new $s(this.properties),te=0;te<j.length;++te){var an=new va;oe.geometries.push(an);for(var rn=j[te],xe=0;xe<rn.length;++xe)an.move_to(rn[xe])}return oe},Q(2978);var Ce=[],Ie=[],Se=[],Pe=[],Ne=[],Me=[],Le=[],Te=[],Ae=[],Oe=[],Re=[],De=[],Fe=[],qe=[],ke=[],Be=[],Ze=[],Ge=[],Ue=[],ze=[],Ye=[],Xe=[],Je=[],je=[];Le[85]=Oe[85]=-1,Te[85]=Re[85]=0,Ae[85]=De[85]=1,Ue[85]=Xe[85]=1,ze[85]=Je[85]=0,Ye[85]=je[85]=1,Ce[85]=Pe[85]=0,Ie[85]=Ne[85]=-1,Se[85]=ke[85]=0,Be[85]=Fe[85]=0,Ze[85]=qe[85]=1,Me[85]=Ge[85]=1,Xe[1]=Xe[169]=0,Je[1]=Je[169]=-1,je[1]=je[169]=0,Fe[1]=Fe[169]=-1,qe[1]=qe[169]=0,ke[1]=ke[169]=0,Oe[4]=Oe[166]=0,Re[4]=Re[166]=-1,De[4]=De[166]=1,Be[4]=Be[166]=1,Ze[4]=Ze[166]=0,Ge[4]=Ge[166]=0,Le[16]=Le[154]=0,Te[16]=Te[154]=1,Ae[16]=Ae[154]=1,Pe[16]=Pe[154]=1,Ne[16]=Ne[154]=0,Me[16]=Me[154]=1,Ue[64]=Ue[106]=0,ze[64]=ze[106]=1,Ye[64]=Ye[106]=0,Ce[64]=Ce[106]=-1,Ie[64]=Ie[106]=0,Se[64]=Se[106]=1,Ue[2]=Ue[168]=0,ze[2]=ze[168]=-1,Ye[2]=Ye[168]=1,Xe[2]=Xe[168]=0,Je[2]=Je[168]=-1,je[2]=je[168]=0,Fe[2]=Fe[168]=-1,qe[2]=qe[168]=0,ke[2]=ke[168]=0,Be[2]=Be[168]=-1,Ze[2]=Ze[168]=0,Ge[2]=Ge[168]=1,Le[8]=Le[162]=0,Te[8]=Te[162]=-1,Ae[8]=Ae[162]=0,Oe[8]=Oe[162]=0,Re[8]=Re[162]=-1,De[8]=De[162]=1,Fe[8]=Fe[162]=1,qe[8]=qe[162]=0,ke[8]=ke[162]=1,Be[8]=Be[162]=1,Ze[8]=Ze[162]=0,Ge[8]=Ge[162]=0,Le[32]=Le[138]=0,Te[32]=Te[138]=1,Ae[32]=Ae[138]=1,Oe[32]=Oe[138]=0,Re[32]=Re[138]=1,De[32]=De[138]=0,Ce[32]=Ce[138]=1,Ie[32]=Ie[138]=0,Se[32]=Se[138]=0,Pe[32]=Pe[138]=1,Ne[32]=Ne[138]=0,Me[32]=Me[138]=1,Xe[128]=Xe[42]=0,Je[128]=Je[42]=1,je[128]=je[42]=1,Ue[128]=Ue[42]=0,ze[128]=ze[42]=1,Ye[128]=Ye[42]=0,Ce[128]=Ce[42]=-1,Ie[128]=Ie[42]=0,Se[128]=Se[42]=1,Pe[128]=Pe[42]=-1,Ne[128]=Ne[42]=0,Me[128]=Me[42]=0,Oe[5]=Oe[165]=-1,Re[5]=Re[165]=0,De[5]=De[165]=0,Xe[5]=Xe[165]=1,Je[5]=Je[165]=0,je[5]=je[165]=0,Be[20]=Be[150]=0,Ze[20]=Ze[150]=1,Ge[20]=Ge[150]=1,Pe[20]=Pe[150]=0,Ne[20]=Ne[150]=-1,Me[20]=Me[150]=1,Le[80]=Le[90]=-1,Te[80]=Te[90]=0,Ae[80]=Ae[90]=1,Ue[80]=Ue[90]=1,ze[80]=ze[90]=0,Ye[80]=Ye[90]=1,Fe[65]=Fe[105]=0,qe[65]=qe[105]=1,ke[65]=ke[105]=0,Ce[65]=Ce[105]=0,Ie[65]=Ie[105]=-1,Se[65]=Se[105]=0,Le[160]=Le[10]=-1,Te[160]=Te[10]=0,Ae[160]=Ae[10]=1,Oe[160]=Oe[10]=-1,Re[160]=Re[10]=0,De[160]=De[10]=0,Xe[160]=Xe[10]=1,Je[160]=Je[10]=0,je[160]=je[10]=0,Ue[160]=Ue[10]=1,ze[160]=ze[10]=0,Ye[160]=Ye[10]=1,Be[130]=Be[40]=0,Ze[130]=Ze[40]=1,Ge[130]=Ge[40]=1,Fe[130]=Fe[40]=0,qe[130]=qe[40]=1,ke[130]=ke[40]=0,Ce[130]=Ce[40]=0,Ie[130]=Ie[40]=-1,Se[130]=Se[40]=0,Pe[130]=Pe[40]=0,Ne[130]=Ne[40]=-1,Me[130]=Me[40]=1,Oe[37]=Oe[133]=0,Re[37]=Re[133]=1,De[37]=De[133]=1,Xe[37]=Xe[133]=0,Je[37]=Je[133]=1,je[37]=je[133]=0,Ce[37]=Ce[133]=-1,Ie[37]=Ie[133]=0,Se[37]=Se[133]=0,Pe[37]=Pe[133]=1,Ne[37]=Ne[133]=0,Me[37]=Me[133]=0,Be[148]=Be[22]=-1,Ze[148]=Ze[22]=0,Ge[148]=Ge[22]=0,Xe[148]=Xe[22]=0,Je[148]=Je[22]=-1,je[148]=je[22]=1,Ue[148]=Ue[22]=0,ze[148]=ze[22]=1,Ye[148]=Ye[22]=1,Pe[148]=Pe[22]=-1,Ne[148]=Ne[22]=0,Me[148]=Me[22]=1,Le[82]=Le[88]=0,Te[82]=Te[88]=-1,Ae[82]=Ae[88]=1,Be[82]=Be[88]=1,Ze[82]=Ze[88]=0,Ge[82]=Ge[88]=1,Fe[82]=Fe[88]=-1,qe[82]=qe[88]=0,ke[82]=ke[88]=1,Ue[82]=Ue[88]=0,ze[82]=ze[88]=-1,Ye[82]=Ye[88]=0,Le[73]=Le[97]=0,Te[73]=Te[97]=1,Ae[73]=Ae[97]=0,Oe[73]=Oe[97]=0,Re[73]=Re[97]=-1,De[73]=De[97]=0,Fe[73]=Fe[97]=1,qe[73]=qe[97]=0,ke[73]=ke[97]=0,Ce[73]=Ce[97]=1,Ie[73]=Ie[97]=0,Se[73]=Se[97]=1,Le[145]=Le[25]=0,Te[145]=Te[25]=-1,Ae[145]=Ae[25]=0,Fe[145]=Fe[25]=1,qe[145]=qe[25]=0,ke[145]=ke[25]=1,Xe[145]=Xe[25]=0,Je[145]=Je[25]=1,je[145]=je[25]=1,Pe[145]=Pe[25]=-1,Ne[145]=Ne[25]=0,Me[145]=Me[25]=0,Oe[70]=Oe[100]=0,Re[70]=Re[100]=1,De[70]=De[100]=0,Be[70]=Be[100]=-1,Ze[70]=Ze[100]=0,Ge[70]=Ge[100]=1,Ue[70]=Ue[100]=0,ze[70]=ze[100]=-1,Ye[70]=Ye[100]=1,Ce[70]=Ce[100]=1,Ie[70]=Ie[100]=0,Se[70]=Se[100]=0,Oe[101]=Oe[69]=0,Re[101]=Re[69]=1,De[101]=De[69]=0,Ce[101]=Ce[69]=1,Ie[101]=Ie[69]=0,Se[101]=Se[69]=0,Xe[149]=Xe[21]=0,Je[149]=Je[21]=1,je[149]=je[21]=1,Pe[149]=Pe[21]=-1,Ne[149]=Ne[21]=0,Me[149]=Me[21]=0,Be[86]=Be[84]=-1,Ze[86]=Ze[84]=0,Ge[86]=Ge[84]=1,Ue[86]=Ue[84]=0,ze[86]=ze[84]=-1,Ye[86]=Ye[84]=1,Le[89]=Le[81]=0,Te[89]=Te[81]=-1,Ae[89]=Ae[81]=0,Fe[89]=Fe[81]=1,qe[89]=qe[81]=0,ke[89]=ke[81]=1,Le[96]=Le[74]=0,Te[96]=Te[74]=1,Ae[96]=Ae[74]=0,Oe[96]=Oe[74]=-1,Re[96]=Re[74]=0,De[96]=De[74]=1,Ue[96]=Ue[74]=1,ze[96]=ze[74]=0,Ye[96]=Ye[74]=0,Ce[96]=Ce[74]=1,Ie[96]=Ie[74]=0,Se[96]=Se[74]=1,Le[24]=Le[146]=0,Te[24]=Te[146]=-1,Ae[24]=Ae[146]=1,Be[24]=Be[146]=1,Ze[24]=Ze[146]=0,Ge[24]=Ge[146]=1,Fe[24]=Fe[146]=0,qe[24]=qe[146]=1,ke[24]=ke[146]=1,Pe[24]=Pe[146]=0,Ne[24]=Ne[146]=-1,Me[24]=Me[146]=0,Oe[6]=Oe[164]=-1,Re[6]=Re[164]=0,De[6]=De[164]=1,Be[6]=Be[164]=-1,Ze[6]=Ze[164]=0,Ge[6]=Ge[164]=0,Xe[6]=Xe[164]=0,Je[6]=Je[164]=-1,je[6]=je[164]=1,Ue[6]=Ue[164]=1,ze[6]=ze[164]=0,Ye[6]=Ye[164]=0,Fe[129]=Fe[41]=0,qe[129]=qe[41]=1,ke[129]=ke[41]=1,Xe[129]=Xe[41]=0,Je[129]=Je[41]=1,je[129]=je[41]=0,Ce[129]=Ce[41]=-1,Ie[129]=Ie[41]=0,Se[129]=Se[41]=0,Pe[129]=Pe[41]=0,Ne[129]=Ne[41]=-1,Me[129]=Me[41]=0,Be[66]=Be[104]=0,Ze[66]=Ze[104]=1,Ge[66]=Ge[104]=0,Fe[66]=Fe[104]=-1,qe[66]=qe[104]=0,ke[66]=ke[104]=1,Ue[66]=Ue[104]=0,ze[66]=ze[104]=-1,Ye[66]=Ye[104]=0,Ce[66]=Ce[104]=0,Ie[66]=Ie[104]=-1,Se[66]=Se[104]=1,Le[144]=Le[26]=-1,Te[144]=Te[26]=0,Ae[144]=Ae[26]=0,Xe[144]=Xe[26]=1,Je[144]=Je[26]=0,je[144]=je[26]=1,Ue[144]=Ue[26]=0,ze[144]=ze[26]=1,Ye[144]=Ye[26]=1,Pe[144]=Pe[26]=-1,Ne[144]=Ne[26]=0,Me[144]=Me[26]=1,Oe[36]=Oe[134]=0,Re[36]=Re[134]=1,De[36]=De[134]=1,Be[36]=Be[134]=0,Ze[36]=Ze[134]=1,Ge[36]=Ge[134]=0,Ce[36]=Ce[134]=0,Ie[36]=Ie[134]=-1,Se[36]=Se[134]=1,Pe[36]=Pe[134]=1,Ne[36]=Ne[134]=0,Me[36]=Me[134]=0,Le[9]=Le[161]=-1,Te[9]=Te[161]=0,Ae[9]=Ae[161]=0,Oe[9]=Oe[161]=0,Re[9]=Re[161]=-1,De[9]=De[161]=0,Fe[9]=Fe[161]=1,qe[9]=qe[161]=0,ke[9]=ke[161]=0,Xe[9]=Xe[161]=1,Je[9]=Je[161]=0,je[9]=je[161]=1,Le[136]=0,Te[136]=1,Ae[136]=1,Oe[136]=0,Re[136]=1,De[136]=0,Be[136]=-1,Ze[136]=0,Ge[136]=1,Fe[136]=-1,qe[136]=0,ke[136]=0,Xe[136]=0,Je[136]=-1,je[136]=0,Ue[136]=0,ze[136]=-1,Ye[136]=1,Ce[136]=1,Ie[136]=0,Se[136]=0,Pe[136]=1,Ne[136]=0,Me[136]=1,Le[34]=0,Te[34]=-1,Ae[34]=0,Oe[34]=0,Re[34]=-1,De[34]=1,Be[34]=1,Ze[34]=0,Ge[34]=0,Fe[34]=1,qe[34]=0,ke[34]=1,Xe[34]=0,Je[34]=1,je[34]=1,Ue[34]=0,ze[34]=1,Ye[34]=0,Ce[34]=-1,Ie[34]=0,Se[34]=1,Pe[34]=-1,Ne[34]=0,Me[34]=0,Le[35]=0,Te[35]=1,Ae[35]=1,Oe[35]=0,Re[35]=-1,De[35]=1,Be[35]=1,Ze[35]=0,Ge[35]=0,Fe[35]=-1,qe[35]=0,ke[35]=0,Xe[35]=0,Je[35]=-1,je[35]=0,Ue[35]=0,ze[35]=1,Ye[35]=0,Ce[35]=-1,Ie[35]=0,Se[35]=1,Pe[35]=1,Ne[35]=0,Me[35]=1,Le[153]=0,Te[153]=1,Ae[153]=1,Fe[153]=-1,qe[153]=0,ke[153]=0,Xe[153]=0,Je[153]=-1,je[153]=0,Pe[153]=1,Ne[153]=0,Me[153]=1,Oe[102]=0,Re[102]=-1,De[102]=1,Be[102]=1,Ze[102]=0,Ge[102]=0,Ue[102]=0,ze[102]=1,Ye[102]=0,Ce[102]=-1,Ie[102]=0,Se[102]=1,Le[155]=0,Te[155]=-1,Ae[155]=0,Fe[155]=1,qe[155]=0,ke[155]=1,Xe[155]=0,Je[155]=1,je[155]=1,Pe[155]=-1,Ne[155]=0,Me[155]=0,Oe[103]=0,Re[103]=1,De[103]=0,Be[103]=-1,Ze[103]=0,Ge[103]=1,Ue[103]=0,ze[103]=-1,Ye[103]=1,Ce[103]=1,Ie[103]=0,Se[103]=0,Le[152]=0,Te[152]=1,Ae[152]=1,Be[152]=-1,Ze[152]=0,Ge[152]=1,Fe[152]=-1,qe[152]=0,ke[152]=0,Xe[152]=0,Je[152]=-1,je[152]=0,Ue[152]=0,ze[152]=-1,Ye[152]=1,Pe[152]=1,Ne[152]=0,Me[152]=1,Le[156]=0,Te[156]=-1,Ae[156]=1,Be[156]=1,Ze[156]=0,Ge[156]=1,Fe[156]=-1,qe[156]=0,ke[156]=0,Xe[156]=0,Je[156]=-1,je[156]=0,Ue[156]=0,ze[156]=1,Ye[156]=1,Pe[156]=-1,Ne[156]=0,Me[156]=1,Le[137]=0,Te[137]=1,Ae[137]=1,Oe[137]=0,Re[137]=1,De[137]=0,Fe[137]=-1,qe[137]=0,ke[137]=0,Xe[137]=0,Je[137]=-1,je[137]=0,Ce[137]=1,Ie[137]=0,Se[137]=0,Pe[137]=1,Ne[137]=0,Me[137]=1,Le[139]=0,Te[139]=1,Ae[139]=1,Oe[139]=0,Re[139]=-1,De[139]=0,Fe[139]=1,qe[139]=0,ke[139]=0,Xe[139]=0,Je[139]=1,je[139]=0,Ce[139]=-1,Ie[139]=0,Se[139]=0,Pe[139]=1,Ne[139]=0,Me[139]=1,Le[98]=0,Te[98]=-1,Ae[98]=0,Oe[98]=0,Re[98]=-1,De[98]=1,Be[98]=1,Ze[98]=0,Ge[98]=0,Fe[98]=1,qe[98]=0,ke[98]=1,Ue[98]=0,ze[98]=1,Ye[98]=0,Ce[98]=-1,Ie[98]=0,Se[98]=1,Le[99]=0,Te[99]=1,Ae[99]=0,Oe[99]=0,Re[99]=-1,De[99]=1,Be[99]=1,Ze[99]=0,Ge[99]=0,Fe[99]=-1,qe[99]=0,ke[99]=1,Ue[99]=0,ze[99]=-1,Ye[99]=0,Ce[99]=1,Ie[99]=0,Se[99]=1,Oe[38]=0,Re[38]=-1,De[38]=1,Be[38]=1,Ze[38]=0,Ge[38]=0,Xe[38]=0,Je[38]=1,je[38]=1,Ue[38]=0,ze[38]=1,Ye[38]=0,Ce[38]=-1,Ie[38]=0,Se[38]=1,Pe[38]=-1,Ne[38]=0,Me[38]=0,Oe[39]=0,Re[39]=1,De[39]=1,Be[39]=-1,Ze[39]=0,Ge[39]=0,Xe[39]=0,Je[39]=-1,je[39]=1,Ue[39]=0,ze[39]=1,Ye[39]=0,Ce[39]=-1,Ie[39]=0,Se[39]=1,Pe[39]=1,Ne[39]=0,Me[39]=0;var _u=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},xu=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},Eu=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},wu=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},bu=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},Cu=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},Iu=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},Su=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Qt=[],Vt=[],re=[],ee=[],ce=[],le=[],$e=[],Qe=[];ee[1]=ce[1]=18,ee[169]=ce[169]=18,re[4]=Vt[4]=12,re[166]=Vt[166]=12,Qt[16]=Qe[16]=4,Qt[154]=Qe[154]=4,le[64]=$e[64]=22,le[106]=$e[106]=22,re[2]=le[2]=17,ee[2]=ce[2]=18,re[168]=le[168]=17,ee[168]=ce[168]=18,Qt[8]=ee[8]=9,Vt[8]=re[8]=12,Qt[162]=ee[162]=9,Vt[162]=re[162]=12,Qt[32]=Qe[32]=4,Vt[32]=$e[32]=1,Qt[138]=Qe[138]=4,Vt[138]=$e[138]=1,ce[128]=Qe[128]=21,le[128]=$e[128]=22,ce[42]=Qe[42]=21,le[42]=$e[42]=22,Vt[5]=ce[5]=14,Vt[165]=ce[165]=14,re[20]=Qe[20]=6,re[150]=Qe[150]=6,Qt[80]=le[80]=11,Qt[90]=le[90]=11,ee[65]=$e[65]=3,ee[105]=$e[105]=3,Qt[160]=le[160]=11,Vt[160]=ce[160]=14,Qt[10]=le[10]=11,Vt[10]=ce[10]=14,re[130]=Qe[130]=6,ee[130]=$e[130]=3,re[40]=Qe[40]=6,ee[40]=$e[40]=3,Vt[101]=$e[101]=1,Vt[69]=$e[69]=1,ce[149]=Qe[149]=21,ce[21]=Qe[21]=21,re[86]=le[86]=17,re[84]=le[84]=17,Qt[89]=ee[89]=9,Qt[81]=ee[81]=9,Qt[96]=$e[96]=0,Vt[96]=le[96]=15,Qt[74]=$e[74]=0,Vt[74]=le[74]=15,Qt[24]=re[24]=8,ee[24]=Qe[24]=7,Qt[146]=re[146]=8,ee[146]=Qe[146]=7,Vt[6]=le[6]=15,re[6]=ce[6]=16,Vt[164]=le[164]=15,re[164]=ce[164]=16,ee[129]=Qe[129]=7,ce[129]=$e[129]=20,ee[41]=Qe[41]=7,ce[41]=$e[41]=20,re[66]=$e[66]=2,ee[66]=le[66]=19,re[104]=$e[104]=2,ee[104]=le[104]=19,Qt[144]=ce[144]=10,le[144]=Qe[144]=23,Qt[26]=ce[26]=10,le[26]=Qe[26]=23,Vt[36]=Qe[36]=5,re[36]=$e[36]=2,Vt[134]=Qe[134]=5,re[134]=$e[134]=2,Qt[9]=ce[9]=10,Vt[9]=ee[9]=13,Qt[161]=ce[161]=10,Vt[161]=ee[161]=13,Vt[37]=Qe[37]=5,ce[37]=$e[37]=20,Vt[133]=Qe[133]=5,ce[133]=$e[133]=20,re[148]=ce[148]=16,le[148]=Qe[148]=23,re[22]=ce[22]=16,le[22]=Qe[22]=23,Qt[82]=re[82]=8,ee[82]=le[82]=19,Qt[88]=re[88]=8,ee[88]=le[88]=19,Qt[73]=$e[73]=0,Vt[73]=ee[73]=13,Qt[97]=$e[97]=0,Vt[97]=ee[97]=13,Qt[145]=ee[145]=9,ce[145]=Qe[145]=21,Qt[25]=ee[25]=9,ce[25]=Qe[25]=21,Vt[70]=$e[70]=1,re[70]=le[70]=17,Vt[100]=$e[100]=1,re[100]=le[100]=17,Qt[34]=ee[34]=9,Vt[34]=re[34]=12,ce[34]=Qe[34]=21,le[34]=$e[34]=22,Qt[136]=Qe[136]=4,Vt[136]=$e[136]=1,re[136]=le[136]=17,ee[136]=ce[136]=18,Qt[35]=Qe[35]=4,Vt[35]=re[35]=12,ee[35]=ce[35]=18,le[35]=$e[35]=22,Qt[153]=Qe[153]=4,ee[153]=ce[153]=18,Vt[102]=re[102]=12,le[102]=$e[102]=22,Qt[155]=ee[155]=9,ce[155]=Qe[155]=23,Vt[103]=$e[103]=1,re[103]=le[103]=17,Qt[152]=Qe[152]=4,re[152]=le[152]=17,ee[152]=ce[152]=18,Qt[156]=re[156]=8,ee[156]=ce[156]=18,le[156]=Qe[156]=23,Qt[137]=Qe[137]=4,Vt[137]=$e[137]=1,ee[137]=ce[137]=18,Qt[139]=Qe[139]=4,Vt[139]=ee[139]=13,ce[139]=$e[139]=20,Qt[98]=ee[98]=9,Vt[98]=re[98]=12,le[98]=$e[98]=22,Qt[99]=$e[99]=0,Vt[99]=re[99]=12,ee[99]=le[99]=19,Vt[38]=re[38]=12,ce[38]=Qe[38]=21,le[38]=$e[38]=22,Vt[39]=Qe[39]=5,re[39]=ce[39]=16,le[39]=$e[39]=22;var jt=[];function Mu(n,r,i){return function(n){return(n>0)-(n<0)||+n}((r[0]-n[0])*(i[1]-r[1])-(i[0]-r[0])*(r[1]-n[1]))}function Nl(n,r){return r.geometry.coordinates[0].every(function(i){return jo(R(i),n)})}jt[1]=jt[169]=_u,jt[4]=jt[166]=xu,jt[16]=jt[154]=Eu,jt[64]=jt[106]=wu,jt[168]=jt[2]=bu,jt[162]=jt[8]=Cu,jt[138]=jt[32]=Iu,jt[42]=jt[128]=Su,jt[5]=jt[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},jt[20]=jt[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},jt[80]=jt[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},jt[65]=jt[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},jt[160]=jt[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},jt[130]=jt[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},jt[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},jt[101]=jt[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},jt[149]=jt[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},jt[86]=jt[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},jt[89]=jt[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},jt[96]=jt[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},jt[24]=jt[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},jt[6]=jt[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},jt[129]=jt[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},jt[66]=jt[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},jt[144]=jt[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},jt[36]=jt[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},jt[9]=jt[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},jt[37]=jt[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},jt[148]=jt[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},jt[82]=jt[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},jt[73]=jt[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},jt[145]=jt[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},jt[70]=jt[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},jt[34]=function(n){return[Su(n),Cu(n)]},jt[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},jt[136]=function(n){return[Iu(n),bu(n)]},jt[153]=function(n){return[Eu(n),_u(n)]},jt[102]=function(n){return[xu(n),wu(n)]},jt[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},jt[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},jt[152]=function(n){return[Eu(n),bu(n)]},jt[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},jt[137]=function(n){return[Iu(n),_u(n)]},jt[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},jt[98]=function(n){return[Cu(n),wu(n)]},jt[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},jt[38]=function(n){return[xu(n),Su(n)]},jt[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};const Ml=function(){function n(r){this.id=n.buildId(r),this.coordinates=r,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(r){return r.join(",")},n.prototype.removeInnerEdge=function(r){this.innerEdges=this.innerEdges.filter(function(i){return i.from.id!==r.from.id})},n.prototype.removeOuterEdge=function(r){this.outerEdges=this.outerEdges.filter(function(i){return i.to.id!==r.to.id})},n.prototype.addOuterEdge=function(r){this.outerEdges.push(r),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var r=this;this.outerEdgesSorted||(this.outerEdges.sort(function(i,s){var u=i.to,l=s.to;if(u.coordinates[0]-r.coordinates[0]>=0&&l.coordinates[0]-r.coordinates[0]<0)return 1;if(u.coordinates[0]-r.coordinates[0]<0&&l.coordinates[0]-r.coordinates[0]>=0)return-1;if(u.coordinates[0]-r.coordinates[0]==0&&l.coordinates[0]-r.coordinates[0]==0)return u.coordinates[1]-r.coordinates[1]>=0||l.coordinates[1]-r.coordinates[1]>=0?u.coordinates[1]-l.coordinates[1]:l.coordinates[1]-u.coordinates[1];var h=Mu(r.coordinates,u.coordinates,l.coordinates);return h<0?1:h>0?-1:Math.pow(u.coordinates[0]-r.coordinates[0],2)+Math.pow(u.coordinates[1]-r.coordinates[1],2)-(Math.pow(l.coordinates[0]-r.coordinates[0],2)+Math.pow(l.coordinates[1]-r.coordinates[1],2))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(r){return this.sortOuterEdges(),this.outerEdges[r]},n.prototype.addInnerEdge=function(r){this.innerEdges.push(r)},n}(),Sh=function(){function n(r,i){this.from=r,this.to=i,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(r){return this.from.id===r.from.id&&this.to.id===r.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return function(n,r,i){if(void 0===i&&(i={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return z({type:"LineString",coordinates:n},r,i)}([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(r){return Mu(r.from.coordinates,r.to.coordinates,this.to.coordinates)},n}(),Nh=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(r){this.edges.push(r),this.polygon=this.envelope=void 0},n.prototype.get=function(r){return this.edges[r]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(r){this.edges.forEach(r)},n.prototype.map=function(r){return this.edges.map(r)},n.prototype.some=function(r){return this.edges.some(r)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var r=this,i=this.edges.reduce(function(h,g,d){return g.from.coordinates[1]>r.edges[h].from.coordinates[1]&&(h=d),h},0),s=(0===i?this.length:i)-1,u=(i+1)%this.length,l=Mu(this.edges[s].from.coordinates,this.edges[i].from.coordinates,this.edges[u].from.coordinates);return 0===l?this.edges[s].from.coordinates[0]>this.edges[u].from.coordinates[0]:l>0},n.prototype.toMultiPoint=function(){return function(n,r,i){return void 0===i&&(i={}),z({type:"MultiPoint",coordinates:n},r,i)}(this.edges.map(function(r){return r.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var r=this.edges.map(function(i){return i.from.coordinates});return r.push(this.edges[0].from.coordinates),this.polygon=Nt([r])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function(n){return function(n,r){void 0===r&&(r={});var i=Number(n[0]),s=Number(n[1]),u=Number(n[2]),l=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var h=[i,s];return Nt([[h,[u,s],[u,l],[i,l],h]],r.properties,{bbox:n,id:r.id})}(Cn(n))}(this.toPolygon())},n.findEdgeRingContaining=function(r,i){var u,l,s=r.getEnvelope();return i.forEach(function(h){var g=h.getEnvelope();if(l&&(u=l.getEnvelope()),!function(n,r){var i=n.geometry.coordinates[0].map(function(h){return h[0]}),s=n.geometry.coordinates[0].map(function(h){return h[1]}),u=r.geometry.coordinates[0].map(function(h){return h[0]}),l=r.geometry.coordinates[0].map(function(h){return h[1]});return Math.max.apply(null,i)===Math.max.apply(null,u)&&Math.max.apply(null,s)===Math.max.apply(null,l)&&Math.min.apply(null,i)===Math.min.apply(null,u)&&Math.min.apply(null,s)===Math.min.apply(null,l)}(g,s)&&Nl(g,s)){for(var d=r.map(function(X){return X.from.coordinates}),p=void 0,m=function(X){h.some(function(k){return function(n,r){return n[0]===r[0]&&n[1]===r[1]}(X,k.from.coordinates)})||(p=X)},v=0,_=d;v<_.length;v++)m(_[v]);p&&h.inside(R(p))&&(!l||Nl(u,g))&&(l=h)}}),l},n.prototype.inside=function(r){return jo(r,this.toPolygon())},n}();function kl(n){for(var r=n,i=[];r.parent;)i.unshift(r),r=r.parent;return i}!function(){function n(){this.edges=[],this.nodes={}}n.fromGeoJson=function(r){!function(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(r);var i=new n;return Mt(r,function(s){(function(n,r,i){if(!n)throw new Error("No feature passed");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!n.geometry||n.geometry.type!==r)throw new Error("Invalid input to "+i+": must be a "+r+", given "+n.geometry.type)})(s,"LineString","Graph::fromGeoJson"),function(n,r,i,s){var u=i;dt(n,function(l,h,g,d,p){u=0===h?l:r(u,l)},void 0)}(s,function(u,l){if(u){var h=i.getNode(u),g=i.getNode(l);i.addEdge(h,g)}return l})}),i},n.prototype.getNode=function(r){var i=Ml.buildId(r),s=this.nodes[i];return s||(s=this.nodes[i]=new Ml(r)),s},n.prototype.addEdge=function(r,i){var s=new Sh(r,i),u=s.getSymetric();this.edges.push(s),this.edges.push(u)},n.prototype.deleteDangles=function(){var r=this;Object.keys(this.nodes).map(function(i){return r.nodes[i]}).forEach(function(i){return r._removeIfDangle(i)})},n.prototype._removeIfDangle=function(r){var i=this;if(r.innerEdges.length<=1){var s=r.getOuterEdges().map(function(u){return u.to});this.removeNode(r),s.forEach(function(u){return i._removeIfDangle(u)})}},n.prototype.deleteCutEdges=function(){var r=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(i){i.label===i.symetric.label&&(r.removeEdge(i.symetric),r.removeEdge(i))})},n.prototype._computeNextCWEdges=function(r){var i=this;void 0===r?Object.keys(this.nodes).forEach(function(s){return i._computeNextCWEdges(i.nodes[s])}):r.getOuterEdges().forEach(function(s,u){r.getOuterEdge((0===u?r.getOuterEdges().length:u)-1).symetric.next=s})},n.prototype._computeNextCCWEdges=function(r,i){for(var u,l,s=r.getOuterEdges(),h=s.length-1;h>=0;--h){var g=s[h],d=g.symetric,p=void 0,m=void 0;g.label===i&&(p=g),d.label===i&&(m=d),p&&m&&(m&&(l=m),p&&(l&&(l.next=p,l=void 0),u||(u=p)))}l&&(l.next=u)},n.prototype._findLabeledEdgeRings=function(){var r=[],i=0;return this.edges.forEach(function(s){if(!(s.label>=0)){r.push(s);var u=s;do{u.label=i,u=u.next}while(!s.isEqual(u));i++}}),r},n.prototype.getEdgeRings=function(){var r=this;this._computeNextCWEdges(),this.edges.forEach(function(s){s.label=void 0}),this._findLabeledEdgeRings().forEach(function(s){r._findIntersectionNodes(s).forEach(function(u){r._computeNextCCWEdges(u,s.label)})});var i=[];return this.edges.forEach(function(s){s.ring||i.push(r._findEdgeRing(s))}),i},n.prototype._findIntersectionNodes=function(r){var i=[],s=r,u=function(){var l=0;s.from.getOuterEdges().forEach(function(h){h.label===r.label&&++l}),l>1&&i.push(s.from),s=s.next};do{u()}while(!r.isEqual(s));return i},n.prototype._findEdgeRing=function(r){var i=r,s=new Nh;do{s.push(i),i.ring=s,i=i.next}while(!r.isEqual(i));return s},n.prototype.removeNode=function(r){var i=this;r.getOuterEdges().forEach(function(s){return i.removeEdge(s)}),r.innerEdges.forEach(function(s){return i.removeEdge(s)}),delete this.nodes[r.id]},n.prototype.removeEdge=function(r){this.edges=this.edges.filter(function(i){return!i.isEqual(r)}),r.deleteEdge()}}(),Q(9331),Q(6882),Q(3212);var ba={search:function(n,r,i,s){n.cleanDirty();var u=(s=s||{}).heuristic||ba.heuristics.manhattan,l=s.closest||!1,h=new Bl(function(n){return n.f}),g=r;for(r.h=u(r,i),h.push(r);h.size()>0;){var d=h.pop();if(d===i)return kl(d);d.closed=!0;for(var p=n.neighbors(d),m=0,v=p.length;m<v;++m){var _=p[m];if(!_.closed&&!_.isWall()){var E=d.g+_.getCost(d),X=_.visited;(!X||E<_.g)&&(_.visited=!0,_.parent=d,_.h=_.h||u(_,i),_.g=E,_.f=_.g+_.h,n.markDirty(_),l&&(_.h<g.h||_.h===g.h&&_.g<g.g)&&(g=_),X?h.rescoreElement(_):h.push(_))}}}return l?kl(g):[]},heuristics:{manhattan:function(n,r){return Math.abs(r.x-n.x)+Math.abs(r.y-n.y)},diagonal:function(n,r){var s=Math.sqrt(2),u=Math.abs(r.x-n.x),l=Math.abs(r.y-n.y);return 1*(u+l)+(s-2)*Math.min(u,l)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function Cs(n,r){r=r||{},this.nodes=[],this.diagonal=!!r.diagonal,this.grid=[];for(var i=0;i<n.length;i++){this.grid[i]=[];for(var s=0,u=n[i];s<u.length;s++){var l=new Ca(i,s,u[s]);this.grid[i][s]=l,this.nodes.push(l)}}this.init()}function Ca(n,r,i){this.x=n,this.y=r,this.weight=i}function Bl(n){this.content=[],this.scoreFunction=n}function Tu(){this._=null}function Ia(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function Vs(n,r){var i=r,s=r.R,u=i.U;u?u.L===i?u.L=s:u.R=s:n._=s,s.U=u,i.U=s,i.R=s.L,i.R&&(i.R.U=i),s.L=i}function Qs(n,r){var i=r,s=r.L,u=i.U;u?u.L===i?u.L=s:u.R=s:n._=s,s.U=u,i.U=s,i.L=s.R,i.L&&(i.L.U=i),s.R=i}function Zl(n){for(;n.L;)n=n.L;return n}Cs.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)ba.cleanNode(this.nodes[n])},Cs.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)ba.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]},Cs.prototype.markDirty=function(n){this.dirtyNodes.push(n)},Cs.prototype.neighbors=function(n){var r=[],i=n.x,s=n.y,u=this.grid;return u[i-1]&&u[i-1][s]&&r.push(u[i-1][s]),u[i+1]&&u[i+1][s]&&r.push(u[i+1][s]),u[i]&&u[i][s-1]&&r.push(u[i][s-1]),u[i]&&u[i][s+1]&&r.push(u[i][s+1]),this.diagonal&&(u[i-1]&&u[i-1][s-1]&&r.push(u[i-1][s-1]),u[i+1]&&u[i+1][s-1]&&r.push(u[i+1][s-1]),u[i-1]&&u[i-1][s+1]&&r.push(u[i-1][s+1]),u[i+1]&&u[i+1][s+1]&&r.push(u[i+1][s+1])),r},Cs.prototype.toString=function(){for(var i,s,u,l,n=[],r=this.grid,h=0,g=r.length;h<g;h++){for(i=[],u=0,l=(s=r[h]).length;u<l;u++)i.push(s[u].weight);n.push(i.join(" "))}return n.join("\n")},Ca.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ca.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight},Ca.prototype.isWall=function(){return 0===this.weight},Bl.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],r=this.content.pop();return this.content.length>0&&(this.content[0]=r,this.bubbleUp(0)),n},remove:function(n){var r=this.content.indexOf(n),i=this.content.pop();r!==this.content.length-1&&(this.content[r]=i,this.scoreFunction(i)<this.scoreFunction(n)?this.sinkDown(r):this.bubbleUp(r))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var r=this.content[n];n>0;){var i=(n+1>>1)-1,s=this.content[i];if(!(this.scoreFunction(r)<this.scoreFunction(s)))break;this.content[i]=r,this.content[n]=s,n=i}},bubbleUp:function(n){for(var r=this.content.length,i=this.content[n],s=this.scoreFunction(i);;){var g,u=n+1<<1,l=u-1,h=null;if(l<r&&(g=this.scoreFunction(this.content[l]))<s&&(h=l),u<r&&this.scoreFunction(this.content[u])<(null===h?s:g)&&(h=u),null===h)break;this.content[n]=this.content[h],this.content[h]=i,n=h}}},Tu.prototype={constructor:Tu,insert:function(n,r){var i,s,u;if(n){if(r.P=n,r.N=n.N,n.N&&(n.N.P=r),n.N=r,n.R){for(n=n.R;n.L;)n=n.L;n.L=r}else n.R=r;i=n}else this._?(n=Zl(this._),r.P=null,r.N=n,n.P=n.L=r,i=n):(r.P=r.N=null,this._=r,i=null);for(r.L=r.R=null,r.U=i,r.C=!0,n=r;i&&i.C;)i===(s=i.U).L?(u=s.R)&&u.C?(i.C=u.C=!1,s.C=!0,n=s):(n===i.R&&(Vs(this,i),i=(n=i).U),i.C=!1,s.C=!0,Qs(this,s)):(u=s.L)&&u.C?(i.C=u.C=!1,s.C=!0,n=s):(n===i.L&&(Qs(this,i),i=(n=i).U),i.C=!1,s.C=!0,Vs(this,s)),i=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var i,l,h,r=n.U,s=n.L,u=n.R;if(l=s?u?Zl(u):s:u,r?r.L===n?r.L=l:r.R=l:this._=l,s&&u?(h=l.C,l.C=n.C,l.L=s,s.U=l,l!==u?(r=l.U,l.U=n.U,r.L=n=l.R,l.R=u,u.U=l):(l.U=r,r=l,n=l.R)):(h=n.C,n=l),n&&(n.U=r),!h){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===r.L){if((i=r.R).C&&(i.C=!1,r.C=!0,Vs(this,r),i=r.R),i.L&&i.L.C||i.R&&i.R.C){(!i.R||!i.R.C)&&(i.L.C=!1,i.C=!0,Qs(this,i),i=r.R),i.C=r.C,r.C=i.R.C=!1,Vs(this,r),n=this._;break}}else if((i=r.L).C&&(i.C=!1,r.C=!0,Qs(this,r),i=r.L),i.L&&i.L.C||i.R&&i.R.C){(!i.L||!i.L.C)&&(i.R.C=!1,i.C=!0,Vs(this,i),i=r.L),i.C=r.C,r.C=i.L.C=!1,Qs(this,r),n=this._;break}i.C=!0,n=r,r=r.U}while(!n.C);n&&(n.C=!1)}}};const Gl=Tu;function Ks(n,r,i,s){var u=[null,null],l=Fr.push(u)-1;return u.left=n,u.right=r,i&&Sa(u,n,r,i),s&&Sa(u,r,n,s),Pi[n.index].halfedges.push(l),Pi[r.index].halfedges.push(l),u}function ta(n,r,i){var s=[r,i];return s.left=n,s}function Sa(n,r,i,s){n[0]||n[1]?n.left===i?n[1]=s:n[0]=s:(n[0]=s,n.left=r,n.right=i)}function jh(n,r,i,s,u){var k,l=n[0],h=n[1],g=l[0],d=l[1],v=0,_=1,E=h[0]-g,X=h[1]-d;if(k=r-g,E||!(k>0)){if(k/=E,E<0){if(k<v)return;k<_&&(_=k)}else if(E>0){if(k>_)return;k>v&&(v=k)}if(k=s-g,E||!(k<0)){if(k/=E,E<0){if(k>_)return;k>v&&(v=k)}else if(E>0){if(k<v)return;k<_&&(_=k)}if(k=i-d,X||!(k>0)){if(k/=X,X<0){if(k<v)return;k<_&&(_=k)}else if(X>0){if(k>_)return;k>v&&(v=k)}if(k=u-d,X||!(k<0)){if(k/=X,X<0){if(k>_)return;k>v&&(v=k)}else if(X>0){if(k<v)return;k<_&&(_=k)}return!(v>0)&&!(_<1)||(v>0&&(n[0]=[g+v*E,d+v*X]),_<1&&(n[1]=[g+_*E,d+_*X])),!0}}}}}function $h(n,r,i,s,u){var l=n[1];if(l)return!0;var k,it,h=n[0],g=n.left,d=n.right,p=g[0],m=g[1],v=d[0],_=d[1],E=(p+v)/2;if(_===m){if(E<r||E>=s)return;if(p>v){if(h){if(h[1]>=u)return}else h=[E,i];l=[E,u]}else{if(h){if(h[1]<i)return}else h=[E,u];l=[E,i]}}else if(it=(m+_)/2-(k=(p-v)/(_-m))*E,k<-1||k>1)if(p>v){if(h){if(h[1]>=u)return}else h=[(i-it)/k,i];l=[(u-it)/k,u]}else{if(h){if(h[1]<i)return}else h=[(u-it)/k,u];l=[(i-it)/k,i]}else if(m<_){if(h){if(h[0]>=s)return}else h=[r,k*r+it];l=[s,k*s+it]}else{if(h){if(h[0]<r)return}else h=[s,k*s+it];l=[r,k*r+it]}return n[0]=h,n[1]=l,!0}function Vh(n,r){var i=n.site,s=r.left,u=r.right;return i===u&&(u=s,s=i),u?Math.atan2(u[1]-s[1],u[0]-s[0]):(i===s?(s=r[1],u=r[0]):(s=r[0],u=r[1]),Math.atan2(s[0]-u[0],u[1]-s[1]))}function Ul(n,r){return r[+(r.left!==n.site)]}function Qh(n,r){return r[+(r.left===n.site)]}var Au,zl=[];function ep(){Ia(this),this.x=this.y=this.arc=this.site=this.cy=null}function Is(n){var r=n.P,i=n.N;if(r&&i){var s=r.site,u=n.site,l=i.site;if(s!==l){var h=u[0],g=u[1],d=s[0]-h,p=s[1]-g,m=l[0]-h,v=l[1]-g,_=2*(d*v-p*m);if(!(_>=-sp)){var E=d*d+p*p,X=m*m+v*v,k=(v*E-p*X)/_,it=(d*X-m*E)/_,j=zl.pop()||new ep;j.arc=n,j.site=u,j.x=k+h,j.y=(j.cy=it+g)+Math.sqrt(k*k+it*it),n.circle=j;for(var q=null,Y=ea._;Y;)if(j.y<Y.y||j.y===Y.y&&j.x<=Y.x){if(!Y.L){q=Y.P;break}Y=Y.L}else{if(!Y.R){q=Y;break}Y=Y.R}ea.insert(q,j),q||(Au=j)}}}}function Ss(n){var r=n.circle;r&&(r.P||(Au=r.N),ea.remove(r),zl.push(r),Ia(r),n.circle=null)}var Yl=[];function np(){Ia(this),this.edge=this.site=this.circle=null}function Xl(n){var r=Yl.pop()||new np;return r.site=n,r}function Ou(n){Ss(n),Ps.remove(n),Yl.push(n),Ia(n)}function rp(n){var r=n.circle,i=r.x,s=r.cy,u=[i,s],l=n.P,h=n.N,g=[n];Ou(n);for(var d=l;d.circle&&Math.abs(i-d.circle.x)<qn&&Math.abs(s-d.circle.cy)<qn;)l=d.P,g.unshift(d),Ou(d),d=l;g.unshift(d),Ss(d);for(var p=h;p.circle&&Math.abs(i-p.circle.x)<qn&&Math.abs(s-p.circle.cy)<qn;)h=p.N,g.push(p),Ou(p),p=h;g.push(p),Ss(p);var v,m=g.length;for(v=1;v<m;++v)Sa((p=g[v]).edge,(d=g[v-1]).site,p.site,u);(p=g[m-1]).edge=Ks((d=g[0]).site,p.site,null,u),Is(d),Is(p)}function ip(n){for(var s,u,l,h,r=n[0],i=n[1],g=Ps._;g;)if((l=Jl(g,i)-r)>qn)g=g.L;else{if(!((h=r-op(g,i))>qn)){l>-qn?(s=g.P,u=g):h>-qn?(s=g,u=g.N):s=u=g;break}if(!g.R){s=g;break}g=g.R}!function(n){Pi[n.index]={site:n,halfedges:[]}}(n);var d=Xl(n);if(Ps.insert(s,d),s||u){if(s===u)return Ss(s),u=Xl(s.site),Ps.insert(d,u),d.edge=u.edge=Ks(s.site,d.site),Is(s),void Is(u);if(!u)return void(d.edge=Ks(s.site,d.site));Ss(s),Ss(u);var p=s.site,m=p[0],v=p[1],_=n[0]-m,E=n[1]-v,X=u.site,k=X[0]-m,it=X[1]-v,j=2*(_*it-E*k),q=_*_+E*E,Y=k*k+it*it,gt=[(it*q-E*Y)/j+m,(_*Y-k*q)/j+v];Sa(u.edge,p,X,gt),d.edge=Ks(p,n,null,gt),u.edge=Ks(n,X,null,gt),Is(s),Is(u)}}function Jl(n,r){var i=n.site,s=i[0],u=i[1],l=u-r;if(!l)return s;var h=n.P;if(!h)return-1/0;var g=(i=h.site)[0],d=i[1],p=d-r;if(!p)return g;var m=g-s,v=1/l-1/p,_=m/p;return v?(-_+Math.sqrt(_*_-2*v*(m*m/(-2*p)-d+p/2+u-l/2)))/v+s:(s+g)/2}function op(n,r){var i=n.N;if(i)return Jl(i,r);var s=n.site;return s[1]===r?s[0]:1/0}var Ps,Pi,ea,Fr,qn=1e-6,sp=1e-12;function ap(n,r,i){return(n[0]-i[0])*(r[1]-n[1])-(n[0]-r[0])*(i[1]-n[1])}function up(n,r){return r[1]-n[1]||r[0]-n[0]}function jl(n,r){var s,u,l,i=n.sort(up).pop();for(Fr=[],Pi=new Array(n.length),Ps=new Gl,ea=new Gl;;)if(l=Au,i&&(!l||i[1]<l.y||i[1]===l.y&&i[0]<l.x))(i[0]!==s||i[1]!==u)&&(ip(i),s=i[0],u=i[1]),i=n.pop();else{if(!l)break;rp(l.arc)}if(function(){for(var i,s,u,l,n=0,r=Pi.length;n<r;++n)if((i=Pi[n])&&(l=(s=i.halfedges).length)){var h=new Array(l),g=new Array(l);for(u=0;u<l;++u)h[u]=u,g[u]=Vh(i,Fr[s[u]]);for(h.sort(function(d,p){return g[p]-g[d]}),u=0;u<l;++u)g[u]=s[h[u]];for(u=0;u<l;++u)s[u]=g[u]}}(),r){var h=+r[0][0],g=+r[0][1],d=+r[1][0],p=+r[1][1];(function(n,r,i,s){for(var l,u=Fr.length;u--;)$h(l=Fr[u],n,r,i,s)&&jh(l,n,r,i,s)&&(Math.abs(l[0][0]-l[1][0])>qn||Math.abs(l[0][1]-l[1][1])>qn)||delete Fr[u]})(h,g,d,p),function(n,r,i,s){var l,h,g,d,p,m,v,_,E,X,k,it,u=Pi.length,j=!0;for(l=0;l<u;++l)if(h=Pi[l]){for(g=h.site,d=(p=h.halfedges).length;d--;)Fr[p[d]]||p.splice(d,1);for(d=0,m=p.length;d<m;)k=(X=Qh(h,Fr[p[d]]))[0],it=X[1],_=(v=Ul(h,Fr[p[++d%m]]))[0],E=v[1],(Math.abs(k-_)>qn||Math.abs(it-E)>qn)&&(p.splice(d,0,Fr.push(ta(g,X,Math.abs(k-n)<qn&&s-it>qn?[n,Math.abs(_-n)<qn?E:s]:Math.abs(it-s)<qn&&i-k>qn?[Math.abs(E-s)<qn?_:i,s]:Math.abs(k-i)<qn&&it-r>qn?[i,Math.abs(_-i)<qn?E:r]:Math.abs(it-r)<qn&&k-n>qn?[Math.abs(E-r)<qn?_:n,r]:null))-1),++m);m&&(j=!1)}if(j){var q,Y,gt,ht=1/0;for(l=0,j=null;l<u;++l)(h=Pi[l])&&(gt=(q=(g=h.site)[0]-n)*q+(Y=g[1]-r)*Y)<ht&&(ht=gt,j=h);if(j){var _t=[n,r],vt=[n,s],St=[i,s],tt=[i,r];j.halfedges.push(Fr.push(ta(g=j.site,_t,vt))-1,Fr.push(ta(g,vt,St))-1,Fr.push(ta(g,St,tt))-1,Fr.push(ta(g,tt,_t))-1)}}for(l=0;l<u;++l)(h=Pi[l])&&(h.halfedges.length||delete Pi[l])}(h,g,d,p)}this.edges=Fr,this.cells=Pi,Ps=ea=Fr=Pi=null}function Yo(){return new Pa}function Pa(){this.reset()}jl.prototype={constructor:jl,polygons:function(){var n=this.edges;return this.cells.map(function(r){var i=r.halfedges.map(function(s){return Ul(r,n[s])});return i.data=r.site.data,i})},triangles:function(){var n=[],r=this.edges;return this.cells.forEach(function(i,s){if(g=(l=i.halfedges).length)for(var l,g,d,u=i.site,h=-1,p=r[l[g-1]],m=p.left===u?p.right:p.left;++h<g;)d=m,m=(p=r[l[h]]).left===u?p.right:p.left,d&&m&&s<d.index&&s<m.index&&ap(u,d,m)<0&&n.push([u.data,d.data,m.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,r,i){for(var u,g,s=this,l=s._found||0,h=s.cells.length;!(g=s.cells[l]);)if(++l>=h)return null;var d=n-g.site[0],p=r-g.site[1],m=d*d+p*p;do{g=s.cells[u=l],l=null,g.halfedges.forEach(function(v){var _=s.edges[v],E=_.left;if(E!==g.site&&E||(E=_.right)){var X=n-E[0],k=r-E[1],it=X*X+k*k;it<m&&(m=it,l=E.index)}})}while(null!==l);return s._found=u,null==i||m<=i*i?g.site:null}},Q(171),Q(7299),Pa.prototype={constructor:Pa,reset:function(){this.s=this.t=0},add:function(n){ic(Na,n,this.t),ic(this,Na.s,this.s),this.s?this.t+=Na.t:this.s=Na.t},valueOf:function(){return this.s}};var Na=new Pa;function ic(n,r,i){var s=n.s=r+i,u=s-r;n.t=r-(s-u)+(i-u)}var n,zn=Math.PI,hi=zn/2,Ns=2*zn,An=zn/180,na=(Math,Math.atan),Ms=Math.atan2,un=Math.cos,Ke=(Math,Math,Math,Math,Math,Math.sin),Lo=(Math,Math.sqrt);Math;function Ls(n){return n>1?hi:n<-1?-hi:Math.asin(n)}function ju(n,r){return[n>zn?n-Ns:n<-zn?n+Ns:n,r]}function Tc(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}Yo(),Yo(),Yo(),ju.invert=ju,1===(n=Tc).length&&(n=function(n){return function(r,i){return Tc(n(r),i)}}(n)),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);Yo();function hl(){}function rf(n){return function(r,i){var s=un(r),u=un(i),l=n(s*u);return[l*u*Ke(r),l*Ke(i)]}}function ha(n){return function(r,i){var s=Lo(r*r+i*i),u=n(s),l=Ke(u),h=un(u);return[Ms(r*l,s*h),Ls(s&&i*l/s)]}}function gl(n,r){return[n,r]}Yo(),Yo(),Yo(),Yo(),hl.prototype={constructor:hl,point:function(n,r){this.stream.point(n,r)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},un(30*An),rf(function(n){return Lo(2/(1+n))}).invert=ha(function(n){return 2*Ls(n/2)}),rf(function(n){return(n=function(n){return n>1?0:n<-1?zn:Math.acos(n)}(n))&&n/Ke(n)}).invert=ha(function(n){return n}),gl.invert=gl,ha(na),ha(Ls),ha(function(n){return 2*na(n)});var Rg=Q(3006);const Dg=function(n){return{"bg-darkGrayBlue":n}};function Fg(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"li",38),c.NdJ("click",function(){const l=c.CHM(i).$implicit;return c.oxw().changeBaseMap(l.url)}),c.TgZ(1,"a",39),c._UZ(2,"img",40),c.TgZ(3,"span",41),c._uU(4),c.qZA(),c.qZA(),c.qZA()}if(2&n){const i=r.$implicit,s=c.oxw();c.Tol(c.VKq(4,Dg,i.url==s.currentView)),c.xp6(2),c.MGl("src","assets/",i.icon,".png",c.LSH),c.xp6(2),c.Oqu(i.view)}}function qg(n,r){if(1&n&&(c.TgZ(0,"div",15),c.TgZ(1,"div",16),c._UZ(2,"span",42),c.qZA(),c.TgZ(3,"span",18),c._uU(4),c.qZA(),c.TgZ(5,"span",19),c._uU(6,"Deed name"),c.qZA(),c.qZA()),2&n){const i=c.oxw();c.xp6(4),c.Oqu(i.bidDetails.sale_text)}}function kg(n,r){if(1&n&&(c.TgZ(0,"li"),c._UZ(1,"span",43),c._uU(2,"Sale For "),c.TgZ(3,"span"),c._uU(4),c.qZA(),c.qZA()),2&n){const i=c.oxw();c.xp6(4),c.hij("L$",i.bidDetails.sale_price,"")}}function Bg(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"li",26),c.NdJ("click",function(){return c.CHM(i),c.oxw().doBid()}),c._UZ(1,"span",44),c._uU(2,"Bid"),c.qZA()}}function Zg(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"li",45),c.NdJ("click",function(){return c.CHM(i),c.oxw().cancelBid()}),c._UZ(1,"span",46),c._uU(2),c.qZA()}if(2&n){const i=c.oxw();c.xp6(2),c.hij("Cancel your Bid of $L",i.currentBidDetails.data.price,"")}}const dl=function(n,r){return{info:n,light:r}};let Gg=(()=>{class n{constructor(i){this.data=i,this.isGridVisible=!0,this.is3D=!1,this.isTerrain=!1,this.deedId="",this.deedAvailableForBid=!1,this.currentGroupCenter={lat:0,lng:0},this.ownProperty=!1,this.allBidIds=[],this.bidDetails={banner_path:"assets/logo.jpg",picture:"assets/logo.jpg",code:"no-flag",country_name:"",first_name:"",last_name:"",price:"0",sale_price:"0",sale_text:"",for_sale:!1,location_name:null},this.currentBidDetails={status:!1,data:null},this.userSaveIds=[],this.tempUserIds=[],this.newGridClick=!1,this.userPointCenters={},this.sideInfoExpand=!1,this.settings={settings:{country_flag_id:null,id:-1,is_allowed_bid_low_price:!1,is_send_email:!1,is_shown_profile_for_activity:!1,map_view:-1,user_id:-1,google2fa_enable:!1,google2fa:!1},mapViews:[{id:1,url:"mapbox://styles/mapbox/streets-v11",view:"Mapbox Streets",icon:"street"},{id:2,url:"mapbox://styles/mapbox/outdoors-v11",view:"Mapbox Outdoors",icon:"outdoors"},{id:3,url:"mapbox://styles/mapbox/light-v10",view:"Mapbox Light",icon:"light"},{id:4,url:"mapbox://styles/mapbox/dark-v10",view:"Mapbox Dark",icon:"dark"},{id:5,url:"mapbox://styles/mapbox/satellite-streets-v11",view:"Mapbox Satellite Streets",icon:"satellite"},{id:6,url:"mapbox://styles/mapbox/navigation-day-v1",view:"Mapbox Navigation Day",icon:"day"},{id:7,url:"mapbox://styles/mapbox/navigation-night-v1",view:"Mapbox Navigation Night",icon:"night"}]},this.currentView="mapbox://styles/mapbox/satellite-streets-v11",this.tileUrl=""}ngOnInit(){setTimeout(()=>{this.initMap()},2e3),this.data.checkLogin()&&-1===I.F.settings.settings.id?this.data.currentMessage.subscribe(i=>{"fetch-settings"===i&&$("#map").length>0&&setTimeout(()=>{this.initMap()},2e3)}):setTimeout(()=>{this.initMap()},2e3)}changeBaseMap(i){this.currentView=i,this.map.setStyle(this.currentView)}setGridVisibility(){"none"==this.map.getLayoutProperty("theme-layer","visibility")?(this.map.setLayoutProperty("theme-layer","visibility","visible"),this.map.setLayoutProperty("theme-count-layer","visibility","visible"),this.isGridVisible=!0):(this.map.setLayoutProperty("theme-layer","visibility","none"),this.map.setLayoutProperty("theme-count-layer","visibility","none"),this.isGridVisible=!1)}set3D(){"none"==this.map.getLayoutProperty("add-3d-buildings","visibility")?(this.map.setLayoutProperty("add-3d-buildings","visibility","visible"),this.is3D=!0):(this.map.setLayoutProperty("add-3d-buildings","visibility","none"),this.is3D=!1)}setTerrain(){null==this.map.getTerrain()?(this.map.setTerrain({source:"mapbox-dem",exaggeration:1.5}),this.isTerrain=!0):(this.map.setTerrain(null),this.isTerrain=!1)}initMap(){this.settings=I.F.settings;let i=this.settings.mapViews.filter(l=>l.id==this.settings.settings.map_view);if(i.length>0&&(this.currentView=i[0].url),this.map=new mapboxgl.Map({container:"map",center:[-93.5653521,37.7931689],zoom:3,accessToken:I.F.accessToken,style:this.currentView,transformRequest:(l,h)=>"Tile"===h&&-1!==l.indexOf("data")||-1!==l.indexOf("counties")?{url:l,headers:{Authorization:"Bearer "+I.F.getCookie("access_token")}}:{url:l}}),this.map.addControl(new MapboxGeocoder({accessToken:I.F.accessToken,mapboxgl}),"top-left"),""===I.F.getCookie("userTiles")||""===I.F.getCookie("userTilesLatLngs"))I.F.setCookie("userTiles",JSON.stringify({data:[]}),1),I.F.setCookie("userTilesLatLngs",JSON.stringify({data:{}}),1);else{var s=JSON.parse(I.F.getCookie("userTiles")),u=JSON.parse(I.F.getCookie("userTilesLatLngs"));s.data.length>0&&Object.keys(u.data).length>0?(this.userSaveIds=s.data,this.userPointCenters=u.data):(I.F.setCookie("userTiles",JSON.stringify({data:[]}),1),I.F.setCookie("userTilesLatLngs",JSON.stringify({data:{}}),1))}this.map.on("style.load",l=>{const g=this.map.getStyle().layers.find(p=>"symbol"===p.type&&p.layout["text-field"]);this.map.addSource("data-source",{type:"vector",tiles:[I.F.server+"data/{z}/{x}/{y}"]}),this.map.addLayer({id:"data-layer",type:"fill",source:"data-source","source-layer":"default",paint:{"fill-color":"red","fill-opacity":.6,"fill-outline-color":"white"},minzoom:7}),this.data.apiGetService("get_schema_column").subscribe(p=>{const m=[];p.forEach(v=>{-1===["id","attributes","geometry","job_id"].indexOf(v.column_name)&&m.push(v.column_name)}),m.length>0&&this.map.addLayer({id:"data-labels",type:"symbol",source:"data-source","source-layer":"default",layout:{"text-field":["get",m[0]],"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto","text-size":10},paint:{"text-halo-color":"white","text-color":"red","text-halo-width":1},minzoom:12})},p=>{}),this.map.addSource("county-data-source",{type:"vector",tiles:[I.F.server+"counties/{z}/{x}/{y}"]}),this.map.addLayer({id:"theme-layer",type:"fill",source:"county-data-source","source-layer":"default",paint:{"fill-color":["step",["get","count"],"rgba(21, 114, 161, 0.0)",0,"rgba(21, 114, 161, 0.1)",20,"rgba(21, 114, 161, 0.2)",50,"rgba(21, 114, 161, 0.3)",100,"rgba(21, 114, 161, 0.4)",200,"rgba(21, 114, 161, 0.5)",500,"rgba(21, 114, 161, 0.6)",700,"rgba(21, 114, 161, 0.7)",1e3,"rgba(21, 114, 161, 0.8)"],"fill-opacity":1,"fill-outline-color":"black"}}),this.map.addLayer({id:"theme-count-layer",type:"symbol",source:"county-data-source","source-layer":"default",layout:{"text-field":["get","count"],"text-size":11,"text-transform":"uppercase","text-padding":10},paint:{"text-color":"#fff","text-halo-color":"rgba(0,0,0,0.5)","text-halo-width":10},minzoom:5});const d=this.is3D?"visible":"none";void 0!==g?this.map.addLayer({id:"add-3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.9},layout:{visibility:d}},g.id):this.map.addLayer({id:"add-3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.9},layout:{visibility:d}}),this.map.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),this.isTerrain&&this.map.setTerrain({source:"mapbox-dem",exaggeration:1.5})})}saveSelections(){I.F.setCookie("userTiles",JSON.stringify({data:this.userSaveIds}),1),I.F.setCookie("userTilesLatLngs",JSON.stringify({data:this.userPointCenters}),1),this.map.setFilter("sub-sub-grid-highlighted",this.buildFilter())}buildFilter(){const i=["in","id"];for(let s=0;s<this.userSaveIds.length;s+=1)i.push(this.userSaveIds[s]);for(let s=0;s<this.tempUserIds.length;s+=1)i.push(this.tempUserIds[s]);return i}buildFilterForBid(){const i=["in","id"];if(0===this.allBidIds.length)return i;for(let s=0;s<this.allBidIds.length;s+=1)i.push(this.allBidIds[s].grid_id);return i}buyLand(){if(!this.data.checkLogin())return void this.data.redirect("login");const i=this;Metro.dialog.create({title:"Please enter this property name",content:'<div id="property-error-div"></div><div class="form-group">\n<input type="text" id="property-name" data-role="materialinput"\n       placeholder="Enter property name"\n       data-icon="<span class=\'mif-info\'>"\n       data-label="Property name"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n></div>',clsDialog:"buy-land-dialog",actions:[{caption:"Buy",cls:"success",onclick:function(){const u=$("#property-name").val();if(u.length<2)return $("#property-error-div").empty().append("Property name must be at least 2 characters"),void I.F.invalidForm("#property-error-div");Metro.dialog.close(".buy-land-dialog"),i.buyLandRequest(u)}},{caption:"No",cls:"js-dialog-close light",onclick:function(){}}]})}buyLandRequest(i){const s=[],u=[];this.userSaveIds.forEach(g=>{const d=z((0,Rg.parse)(this.userPointCenters[g]));u.push(d),s.push({id:g,latlng:this.userPointCenters[g]})});const l=zs(at(u)),h_lat=l.geometry.coordinates[1],h_lng=l.geometry.coordinates[0];I.F.loading("location"),this.data.apiGetService(`https://api.mapbox.com/geocoding/v5/mapbox.places/${h_lng},${h_lat}.json?access_token=${I.F.accessToken}&limit=1&types=address`,!0,new P.LE).subscribe(g=>{I.F.loading("location",!0);try{const d={fts:s,center:l.geometry.coordinates.join(","),name:i,location:g.features[0].place_name};I.F.loading("land"),this.data.apiService("buy/land",d).subscribe(p=>{I.F.loading("land",!0),p.hasOwnProperty("status")&&(I.F.fire(p.message,!p.status),p.status&&(this.clearSelection(),this.data.changeMessage("get-profile"),this.tileUrl=`${I.F.server}grids/{z}/{x}/{y}?dt=${Date.now()}&token=`+I.F.getCookie("access_token"),this.map.getSource("grid-source").setTiles([this.tileUrl])))},p=>{I.F.fire("Unable to process. Internal Error",!0),I.F.loading("land",!0)})}catch(d){I.F.loading("land",!0)}},g=>{I.F.loading("location",!0)})}clearSelection(){I.F.setCookie("userTiles",JSON.stringify({data:[]}),1),I.F.setCookie("userTilesLatLngs",JSON.stringify({data:[]}),1),this.userSaveIds=[],this.tempUserIds=[],this.userPointCenters={},this.map.setFilter("sub-sub-grid-highlighted",this.buildFilter())}clearBidSelection(){this.currentGroupCenter={lat:0,lng:0},this.allBidIds=[],this.bidDetails={banner_path:"assets/logo.jpg",picture:"assets/logo.jpg",code:"no-flag",country_name:"",first_name:"",last_name:"",price:"0",sale_price:"0",sale_text:""},this.map.setFilter("grids-for-bid",this.buildFilterForBid()),Metro.bottomsheet.close("#group-view","list")}getPropertInfo(i){this.clearBidSelection(),I.F.loading("bid"),this.deedId=i,this.deedAvailableForBid=!1,this.data.apiGetService(I.F.server+`get/property/${i}`,!0).subscribe(s=>{if(I.F.loading("bid",!0),s.grids.length>0){const u=[];s.grids=s.grids.map(d=>(d.point=JSON.parse(d.point),u.push(z(d.point)),d));const l=at(u),h=zs(l);this.currentGroupCenter={lat:h.geometry.coordinates[1],lng:h.geometry.coordinates[0]},this.allBidIds=s.grids,this.map.setFilter("grids-for-bid",this.buildFilterForBid())}null!=s.detail.picture&&(s.detail.picture=I.F.server+s.detail.picture),null!=s.detail.banner_path&&(s.detail.banner_path=I.F.server+s.detail.banner_path),this.bidDetails=s.detail,this.currentBidDetails=s.bid_details,null==this.bidDetails.location_name?this.data.updateLocationName(this.currentGroupCenter,this.deedId).then(u=>{this.bidDetails.location_name=u,Metro.bottomsheet.open("#group-view","list")}):Metro.bottomsheet.open("#group-view","list")},s=>{I.F.fire("Unable to fetch. Internal Error",!0),I.F.loading("bid",!0)})}viewProperty(){this.data.redirect("dashboard/app/property",this.deedId)}openBidDialog(){const i=this;Metro.dialog.create({title:"Enter Bid Details",content:'<div id="bid-error-div" class="fg-red text-small"></div><div class="form-group">\n<input type="number" id="bid-price" value="0.0" data-role="materialinput"\n                       placeholder="Enter your bid price"\n                       data-icon="<span class=\'mif-dollars\'>"\n                       data-label="Bid Price"\n                       data-cls-line="bg-cyan"\n                       data-cls-label="fg-cyan"\n                       data-cls-informer="fg-lightCyan"\n                       data-cls-icon="fg-darkCyan"\n                ></div>',clsDialog:"bid-dialog fg-amber",actions:[{caption:"Submit",cls:"warning",onclick:function(){let u=$("#bid-price").val();if(!isNaN(u)&&(u=Number(u),u>0))return i.submitBid(u),void Metro.dialog.close(".bid-dialog");$("#bid-error-div").empty().append("Invalid bid details. It should be valid digit or number"),setTimeout(()=>{$("#bid-error-div").empty()},3e3),I.F.invalidForm("#bid-error-div")}},{caption:"Cancel",cls:"js-dialog-close alert",onclick:function(){}}]})}submitBid(i){const s=new FormData;s.append("gid",this.deedId),s.append("price",i),I.F.loading("biddo"),this.data.apiService("bid/do",s).subscribe(u=>{I.F.loading("biddo",!0),u.hasOwnProperty("status")?(I.F.fire(u.message,!u.status),u.status&&this.data.changeMessage("get-profile")):I.F.fire("Invalid request. Please try again later",!0)},u=>{I.F.loading("biddo",!0),I.F.fire("Invalid request. Please try again later",!0)})}doBid(){this.data.checkLogin()?this.openBidDialog():this.data.redirect("login")}cancelBid(){const i=this;Metro.dialog.create({title:"Bid",content:"Do you want to cancel your bid?",actions:[{caption:"Yes cancel",cls:"js-dialog-close alert",onclick:function(){i.cancelBidRequest()}},{caption:"No",cls:"js-dialog-close success",onclick:function(){}}]})}cancelBidRequest(){I.F.loading("bidcancel"),this.data.apiGetService("bid/cancel/"+this.currentBidDetails.data.id).subscribe(i=>{I.F.loading("bidcancel",!0),i.hasOwnProperty("status")?(I.F.fire(i.message,!i.status),i.status&&this.data.changeMessage("get-profile")):I.F.fire("Invalid request. Please try again later",!0)},i=>{I.F.loading("bidcancel",!0),I.F.fire("Invalid request. Please try again later",!0)})}}return n.\u0275fac=function(i){return new(i||n)(c.Y36(I.F))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-map"]],decls:56,vars:28,consts:[["id","map",1,"w-100","h-100",2,"z-index","0","top","50px"],[1,"pos-fixed","z-1",2,"bottom","30px","left","10px"],["id","basemaps_toggle",1,"button","cycle","light"],[1,"mif-map"],["data-role","dropdown","data-toggle-element","#basemaps_toggle",1,"d-menu","drop-up","shadowed","fg-black",2,"width","230px","background","rgba(255,255,255,0.7)","margin-left","0","border-radius","7px"],["class","c-pointer bg-transparent p-2",3,"class","click",4,"ngFor","ngForOf"],["data-role","bottomsheet","id","group-view",2,"min-width","650px"],[1,"p-0",2,"height","200px"],[1,"d-flex","flex-align-center"],[1,"d-flex","flex-column"],["onError","this.src='assets/logo.jpg'",2,"width","200px","height","130px",3,"src"],[1,"invalid_feedback","d-block",2,"height","20px"],[1,"invalid_feedback","d-block"],[1,"items-list"],["class","item",4,"ngIf"],[1,"item"],[1,"avatar"],[1,"icon","mif-pin"],[1,"label"],[1,"second-label"],["onError","this.src='assets/logo.jpg'",2,"width","40px","height","40px","border-radius","50%",3,"src"],[1,"icon","mif-apps"],[1,"text-bold"],[4,"ngIf"],["class","button d-flex dark flex-justify-between",3,"click",4,"ngIf"],["class","button d-flex alert flex-justify-between",3,"click",4,"ngIf"],[1,"button","d-flex","dark","flex-justify-between",3,"click"],[1,"icon","mif-paragraph-center"],["onclick","Metro.bottomsheet.close('#group-view', 'list')",1,"button","d-flex","alert","flex-justify-between",3,"click"],[1,"icon","mif-cross-light"],[1,"pos-absolute","d-flex","flex-column","z-1",2,"right","10px","bottom","70px"],[1,"button","light","cycle","shadowed","m-1",3,"click"],[1,"mif-plus"],[1,"button","cycle","shadowed","m-1",3,"click"],[1,"mif-chart-line"],[1,"mif-location-city"],[1,"mif-traffic-cone"],[1,"mif-minus"],[1,"c-pointer","bg-transparent","p-2",3,"click"],[1,"d-flex",2,"font-size","15px","color","black"],[1,"circle","shadowed",2,"width","35px","height","35px","border-radius","17px","margin","-17px -3px",3,"src"],[1,"pos-absolute",2,"left","45px","white-space","nowrap"],[1,"icon","mif-info"],[1,"icon","mif-dollars"],[1,"icon","mif-cart"],[1,"button","d-flex","alert","flex-justify-between",3,"click"],[1,"icon","mif-backspace1"]],template:function(i,s){1&i&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"button",2),c._UZ(3,"span",3),c.qZA(),c.TgZ(4,"ul",4),c.YNc(5,Fg,5,6,"li",5),c.qZA(),c.qZA(),c.TgZ(6,"ul",6),c.TgZ(7,"li",7),c.TgZ(8,"div",8),c.TgZ(9,"div",9),c._UZ(10,"img",10),c.TgZ(11,"span",11),c._uU(12),c.qZA(),c.TgZ(13,"span",12),c._uU(14),c.qZA(),c.qZA(),c.TgZ(15,"div",13),c.YNc(16,qg,7,1,"div",14),c.TgZ(17,"div",15),c.TgZ(18,"div",16),c._UZ(19,"span",17),c.qZA(),c.TgZ(20,"span",18),c._uU(21),c.qZA(),c.TgZ(22,"span",19),c._uU(23,"Located at"),c.qZA(),c.qZA(),c.TgZ(24,"div",15),c.TgZ(25,"div",16),c._UZ(26,"img",20),c.qZA(),c.TgZ(27,"span",18),c._uU(28),c.qZA(),c.TgZ(29,"span",19),c._uU(30,"Owner"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"li"),c._UZ(32,"span",21),c._uU(33,"Tiles "),c.TgZ(34,"span",22),c._uU(35),c.qZA(),c.qZA(),c.YNc(36,kg,5,1,"li",23),c.YNc(37,Bg,3,0,"li",24),c.YNc(38,Zg,3,1,"li",25),c.TgZ(39,"li",26),c.NdJ("click",function(){return s.viewProperty()}),c._UZ(40,"span",27),c._uU(41,"Details"),c.qZA(),c.TgZ(42,"li",28),c.NdJ("click",function(){return s.clearBidSelection()}),c._UZ(43,"span",29),c._uU(44,"Close"),c.qZA(),c.qZA(),c.TgZ(45,"div",30),c.TgZ(46,"button",31),c.NdJ("click",function(){return s.map.zoomIn()}),c._UZ(47,"span",32),c.qZA(),c.TgZ(48,"button",33),c.NdJ("click",function(){return s.setGridVisibility()}),c._UZ(49,"span",34),c.qZA(),c.TgZ(50,"button",33),c.NdJ("click",function(){return s.set3D()}),c._UZ(51,"span",35),c.qZA(),c.TgZ(52,"button",33),c.NdJ("click",function(){return s.setTerrain()}),c._UZ(53,"span",36),c.qZA(),c.TgZ(54,"button",31),c.NdJ("click",function(){return s.map.zoomOut()}),c._UZ(55,"span",37),c.qZA(),c.qZA(),c.qZA()),2&i&&(c.xp6(5),c.Q6J("ngForOf",s.settings.mapViews),c.xp6(5),c.s9C("src",s.bidDetails.banner_path,c.LSH),c.xp6(2),c.hij("Lat ",s.currentGroupCenter.lat,""),c.xp6(2),c.hij("Lng ",s.currentGroupCenter.lng,""),c.xp6(2),c.Q6J("ngIf",s.bidDetails.for_sale),c.xp6(5),c.hij("",s.bidDetails.location_name," "),c.xp6(5),c.s9C("src",s.bidDetails.picture,c.LSH),c.xp6(2),c.AsE("",s.bidDetails.first_name," ",s.bidDetails.last_name,""),c.xp6(7),c.Oqu(s.allBidIds.length),c.xp6(1),c.Q6J("ngIf",s.bidDetails.for_sale),c.xp6(1),c.Q6J("ngIf",s.bidDetails.for_sale&&!s.currentBidDetails.status&&0==s.ownProperty),c.xp6(1),c.Q6J("ngIf",s.bidDetails.for_sale&&s.currentBidDetails.status&&0==s.ownProperty),c.xp6(10),c.Tol(c.WLB(19,dl,s.isGridVisible,!s.isGridVisible)),c.xp6(2),c.Tol(c.WLB(22,dl,s.is3D,!s.is3D)),c.xp6(2),c.Tol(c.WLB(25,dl,s.isTerrain,!s.isTerrain)))},directives:[F.sg,F.O5],styles:[""]}),n})(),Ug=(()=>{class n{constructor(i){this.data=i}canActivate(i,s){const u=this.data.checkLogin();return u||-1===location.hash.indexOf("login")&&window.location.assign(window.location.origin+"/#/login"),u}}return n.\u0275fac=function(i){return new(i||n)(c.LFG(I.F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zg(n,r){if(1&n&&(c.TgZ(0,"option"),c._uU(1),c.qZA()),2&n){const i=r.$implicit;c.xp6(1),c.Oqu(i.NAME)}}function Yg(n,r){if(1&n&&(c.TgZ(0,"option"),c._uU(1),c.qZA()),2&n){const i=r.$implicit;c.xp6(1),c.Oqu(i.NAME)}}function Xg(n,r){if(1&n&&(c.TgZ(0,"div",32),c._UZ(1,"span",33),c.TgZ(2,"span",34),c._uU(3),c.qZA(),c.TgZ(4,"span",35),c.TgZ(5,"label"),c._uU(6),c.qZA(),c.TgZ(7,"label"),c._uU(8),c.qZA(),c.qZA(),c.TgZ(9,"span",36),c._uU(10),c.qZA(),c.qZA()),2&n){const i=r.$implicit,s=c.oxw();c.xp6(3),c.Oqu(i.Jobs.file_name),c.xp6(3),c.hij("Time: ",i.Jobs.start_time,""),c.xp6(2),c.hij("ID: ",i.Jobs.job_id,""),c.xp6(2),c.hij(" ",s.getStatus(i.Jobs.status)," ")}}const yf=function(n){return{"d-none":n}};let Jg=(()=>{class n{constructor(i){this.data=i,this.file=null,this.jobs=[],this.counties=[],this.states=[],this.processReady=!1}ngOnInit(){this.getJobs(),this.getCounties(),this.getStates()}getJobs(){I.F.loading("getJob",!1),this.data.apiGetService("jobs/user").subscribe(i=>{I.F.loading("getJob",!0),this.jobs=i},i=>{I.F.loading("getJob",!0)})}getCounties(){I.F.loading("get_counties",!1),this.data.apiGetService("get_counties").subscribe(i=>{I.F.loading("get_counties",!0),this.counties=i,setTimeout(()=>{Metro.getPlugin("#county-list","select").reset()},300)},i=>{I.F.loading("get_counties",!0)})}getStates(){I.F.loading("get_states",!1),this.data.apiGetService("get_states").subscribe(i=>{I.F.loading("get_states",!0),this.states=i,setTimeout(()=>{Metro.getPlugin("#state-list","select").reset()},300)},i=>{I.F.loading("get_states",!0)})}getFile(i){this.file=i.target.files[0]}checkForInvalid(i){const s=this;setTimeout(()=>{$(".invalid").length>0?I.F.invalidForm("#data-form"):s.processFile(i)},200)}processFile(i){i.stopPropagation();const s=new FormData;s.append("file",this.file),I.F.loading("create_job",!1),this.data.apiService("create_job",s).subscribe(u=>{this.file=null,I.F.loading("create_job",!0),u.status?this.processJobDetails(u.job_id):I.F.fire(u.message,!0)},u=>{this.file=null,I.F.loading("create_job",!0)})}processJobDetails(i){const s=$("#data-form").serializeArray(),u={job_id:i};s.forEach(l=>{u[l.name]=l.value}),I.F.loading("create_job",!1),this.data.apiService("create_job_details",u).subscribe(l=>{I.F.loading("create_job",!0),I.F.fire("Job created successfully",!1),this.getJobs()},l=>{I.F.loading("create_job",!0)})}getStatus(i){let s="Unknown";switch(i){case 0:s="Submitted";break;case 1:s="Processed"}return s}}return n.\u0275fac=function(i){return new(i||n)(c.Y36(I.F))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload"]],decls:67,vars:10,consts:[[1,"container","h-100","p-0",2,"background","rgba(255,255,255,0.75)","overflow","auto"],[1,"mt-8","pb-5","pl-3","pr-3","pt-20","skill-box",2,"background","rgba(255,255,255,0.7)"],[1,"header","fg-white",2,"background","rgba(138, 162, 174,0.7)"],[1,"avatar"],[1,"icon","mif-2x","mif-chart-line"],[1,"title"],[3,"ngClass"],["type","file","data-role","file","data-mode","drop","accept",".geojson,.kml,.gpkg,.zip",3,"change"],[1,"form-group",3,"ngClass"],["id","data-form","data-clear-invalid","3000","data-role","validator","action","javascript:",3,"submit"],[1,"form-group","d-flex","flex-column"],["type","text","name","description","data-role","input","placeholder","Enter description","data-prepend","<span class='mif-info'>","data-label","Description","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required minlength=6"],[1,"invalid_feedback"],["type","text","name","country","data-role","select","placeholder","Enter country name","data-prepend","<span class='mif-info'>","data-label","Country","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required"],["selected",""],["type","text","name","state","id","state-list","data-role","select","placeholder","Enter state name","data-prepend","<span class='mif-info'>","data-label","State","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required"],[4,"ngFor","ngForOf"],["type","text","id","county-list","name","county","data-role","select","placeholder","Enter county name","data-prepend","<span class='mif-info'>","data-label","County","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required"],["type","text","name","open_data_url","data-role","input","placeholder","Enter open data url","data-prepend","<span class='mif-info'>","data-label","Open Data URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required url"],["type","text","name","download_url","data-role","input","placeholder","Enter download url","data-prepend","<span class='mif-info'>","data-label","Download URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required url"],["type","text","name","mapping_service_url","data-role","input","placeholder","Enter mapping service url","data-prepend","<span class='mif-info'>","data-label","Mapping Service URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required url"],["type","text","name","property_search_url","data-role","input","placeholder","Enter property search url","data-prepend","<span class='mif-info'>","data-label","Property Search URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required url"],[1,"form-group","d-flex","flex-column","mb-3"],["type","text","name","tax_collect_url","data-role","input","placeholder","tax collect url","data-prepend","<span class='mif-info'>","data-label","Tax Collect URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required url"],["type","submit",1,"image-button","success"],[1,"icon","mif-cloud-upload"],[1,"caption"],[1,"image-button","alert",3,"click"],[1,"icon","mif-cross-light"],[1,"mt-2","pb-5","pl-3","pr-3","pt-2","skill-box",2,"background","rgba(255,255,255,0.7)"],[1,"items-list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"avatar","mif-chart-line","fg-amber"],[1,"label"],[1,"second-label","d-flex","flex-column","pt-1"],[1,"second-action",2,"font-size","11px","width","70px"]],template:function(i,s){1&i&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"span",4),c.qZA(),c.TgZ(5,"div",5),c._uU(6,"Upload data"),c.qZA(),c.qZA(),c.TgZ(7,"div",6),c.TgZ(8,"input",7),c.NdJ("change",function(l){return s.getFile(l)}),c.qZA(),c.qZA(),c.TgZ(9,"div",8),c.TgZ(10,"form",9),c.NdJ("submit",function(l){return s.checkForInvalid(l)}),c.TgZ(11,"div",10),c._UZ(12,"input",11),c.TgZ(13,"span",12),c._uU(14," Description is required and must be at least of 6 characters "),c.qZA(),c.qZA(),c.TgZ(15,"div",10),c.TgZ(16,"select",13),c.TgZ(17,"option",14),c._uU(18,"USA"),c.qZA(),c.qZA(),c.TgZ(19,"span",12),c._uU(20," Country is required "),c.qZA(),c.qZA(),c.TgZ(21,"div",10),c.TgZ(22,"select",15),c.YNc(23,zg,2,1,"option",16),c.qZA(),c.TgZ(24,"span",12),c._uU(25," State is required "),c.qZA(),c.qZA(),c.TgZ(26,"div",10),c.TgZ(27,"select",17),c.YNc(28,Yg,2,1,"option",16),c.qZA(),c.TgZ(29,"span",12),c._uU(30," County is required "),c.qZA(),c.qZA(),c.TgZ(31,"div",10),c._UZ(32,"input",18),c.TgZ(33,"span",12),c._uU(34," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(35,"div",10),c._UZ(36,"input",19),c.TgZ(37,"span",12),c._uU(38," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(39,"div",10),c._UZ(40,"input",20),c.TgZ(41,"span",12),c._uU(42," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(43,"div",10),c._UZ(44,"input",21),c.TgZ(45,"span",12),c._uU(46," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(47,"div",22),c._UZ(48,"input",23),c.TgZ(49,"span",12),c._uU(50," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(51,"button",24),c._UZ(52,"span",25),c.TgZ(53,"span",26),c._uU(54),c.qZA(),c.qZA(),c.TgZ(55,"button",27),c.NdJ("click",function(){return s.file=null}),c._UZ(56,"span",28),c.TgZ(57,"span",26),c._uU(58,"Cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(59,"div",29),c.TgZ(60,"div",2),c.TgZ(61,"div",3),c._UZ(62,"span",4),c.qZA(),c.TgZ(63,"div",5),c._uU(64,"Jobs"),c.qZA(),c.qZA(),c.TgZ(65,"div",30),c.YNc(66,Xg,11,4,"div",31),c.qZA(),c.qZA(),c.qZA()),2&i&&(c.xp6(7),c.Q6J("ngClass",c.VKq(6,yf,null!=s.file)),c.xp6(2),c.Q6J("ngClass",c.VKq(8,yf,null==s.file)),c.xp6(14),c.Q6J("ngForOf",s.states),c.xp6(5),c.Q6J("ngForOf",s.counties),c.xp6(26),c.hij("Submit (",null!=s.file?s.file.name:"",")"),c.xp6(12),c.Q6J("ngForOf",s.jobs))},directives:[F.mk,F.sg],styles:[""]}),n})();function jg(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"button",66),c.NdJ("click",function(){c.CHM(i);const u=c.oxw().$implicit;return c.oxw().deleteJob(u.Jobs)}),c._UZ(1,"span",67),c.TgZ(2,"span",42),c._uU(3,"Delete Job"),c.qZA(),c.qZA()}}function $g(n,r){1&n&&c._UZ(0,"span",68)}function Hg(n,r){1&n&&c._UZ(0,"span",69)}function Wg(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"div",54),c._UZ(1,"span",55),c.TgZ(2,"span",56),c._uU(3),c.qZA(),c.TgZ(4,"span",57),c.TgZ(5,"span",58),c._uU(6),c.qZA(),c.TgZ(7,"span",58),c._uU(8),c.qZA(),c.TgZ(9,"span",58),c._uU(10),c.qZA(),c.TgZ(11,"span",58),c._uU(12),c.qZA(),c.qZA(),c.TgZ(13,"span",59),c.TgZ(14,"div",60),c.TgZ(15,"button",61),c.NdJ("click",function(){const l=c.CHM(i).$implicit;return c.oxw().getJobColumn(l.Jobs)}),c._UZ(16,"span",62),c.TgZ(17,"span",42),c._uU(18,"View Details"),c.qZA(),c.qZA(),c.YNc(19,jg,4,0,"button",63),c.qZA(),c.YNc(20,$g,1,0,"span",64),c.YNc(21,Hg,1,0,"span",65),c.qZA(),c.qZA()}if(2&n){const i=r.$implicit;c.xp6(3),c.Oqu(i.Jobs.file_name),c.xp6(3),c.hij("ID: ",i.Jobs.job_id,""),c.xp6(2),c.hij("Country: ",i.JobDetails.country,""),c.xp6(2),c.hij("State: ",i.JobDetails.state,""),c.xp6(2),c.hij("County: ",i.JobDetails.county,""),c.xp6(7),c.Q6J("ngIf",0==i.Jobs.status),c.xp6(1),c.Q6J("ngIf",1==i.Jobs.status),c.xp6(1),c.Q6J("ngIf",0==i.Jobs.status)}}function Vg(n,r){if(1&n&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&n){const i=r.$implicit;c.xp6(1),c.Oqu(i)}}function Qg(n,r){if(1&n&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&n){const i=r.$implicit;c.xp6(1),c.Oqu(i)}}function Kg(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"div",39),c.TgZ(1,"button",70),c.NdJ("click",function(){return c.CHM(i),c.oxw().processJob()}),c._UZ(2,"span",71),c.TgZ(3,"span",42),c._uU(4,"Process Job"),c.qZA(),c.qZA(),c.qZA()}}function td(n,r){if(1&n&&(c.TgZ(0,"div",72),c._UZ(1,"span",73),c.TgZ(2,"span",56),c._uU(3),c.qZA(),c.TgZ(4,"span",74),c._uU(5),c.qZA(),c.qZA()),2&n){const i=r.$implicit;c.xp6(3),c.Oqu(i.value),c.xp6(2),c.Oqu(i.key)}}let mf=(()=>{class n{constructor(i){this.data=i,this.jobs=[],this.job={name:"",columns:[],details:{}},this.currentJob={job_id:"",status:1},this.geoJsonData={},this.properties={},this.bounds={},this.columns=[],this.jsonCount=0}ngOnInit(){this.getSchema(),this.getJobs(),this.initMap()}getJobs(){I.F.loading("getJob",!1),this.data.apiGetService("jobs").subscribe(i=>{I.F.loading("getJob",!0),this.jobs=i},i=>{I.F.loading("getJob",!0)})}initMap(){this.map=new mapboxgl.Map({container:"map",center:[-93.5653521,37.7931689],zoom:3,accessToken:I.F.accessToken,style:"mapbox://styles/mapbox/satellite-streets-v11"}),this.map.on("click",i=>{const s=this.map.queryRenderedFeatures(i.point,{layers:["maine"]});s.length>0&&(this.properties=s[0].properties,Metro.dialog.open("#info-dialog"))})}addGeoJSON(i){this.geoJsonData=i,void 0!==this.map.getLayer("maine")&&this.map.removeLayer("maine"),void 0!==this.map.getSource("maine")&&this.map.removeSource("maine"),this.map.addSource("maine",{type:"geojson",data:i}),this.map.addLayer({id:"maine",type:"fill",source:"maine",layout:{},paint:{"fill-color":"red","fill-opacity":.5,"fill-outline-color":"white"}});let s=Cn(i);this.bounds=new mapboxgl.LngLatBounds([s[2],s[1]],[s[0],s[1]]),this.map.fitBounds(this.bounds,{padding:20})}getJobColumn(i){this.currentJob=i,I.F.loading("getJobCol",!1),this.data.apiGetService("jobs/"+i.job_id).subscribe(s=>{I.F.loading("getJobCol",!0),this.job.columns=s.columns,this.job.details=s.details,this.job.name=s.name,$("#grid-table tbody").empty();const u=$("#grid-table").data("table");let l=[];const h=Object.keys(s.attributes[0]);if(h.forEach((g,d)=>{l.push({name:g,title:g,sortable:!1})}),null!=s.attributes){const g=[];Object.values(s.attributes),s.attributes.forEach((p,m)=>{let v=[];h.forEach(_=>{v.push(p[_])}),g.push(v)}),u.setData({header:l,data:g}),u.draw()}else u.setData({header:l,data:[]}),u.draw();this.addGeoJSON(s.map),Metro.dialog.open("#job-detail-dialog")},s=>{I.F.loading("getJobCol",!0)})}resizeMap(){setTimeout(()=>{this.map.resize(),this.map.fitBounds(this.bounds,{padding:20})},500)}deleteJob(i){this.currentJob=i;const s=this;Metro.dialog.create({title:"Bid",content:`Do you want to delete this job (${i.job_id})?`,actions:[{caption:"Yes Delete!",cls:"js-dialog-close alert",onclick:function(){s.postDelJob()}},{caption:"No",cls:"js-dialog-close success",onclick:function(){}}]})}postDelJob(){I.F.loading("deleteJob",!1),this.data.apiGetService("jobs/delete/"+this.currentJob.job_id).subscribe(i=>{I.F.loading("deleteJob",!0),I.F.fire("Job deleted successfully",!1),this.getJobs()},i=>{I.F.loading("deleteJob",!0)})}getSchema(){this.columns=[],I.F.loading("get_schema_column"),this.data.apiGetService("get_schema_column").subscribe(i=>{I.F.loading("get_schema_column",!0),i.forEach(s=>{-1===["id","attributes","geometry","job_id"].indexOf(s.column_name)&&this.columns.push(s.column_name)}),console.log(this.columns)},i=>{I.F.loading("get_schema_column",!0)})}processJob(){if(0==this.columns.length)return void I.F.fire("No data schema defined",!0);if(0!=this.currentJob.status)return void I.F.fire("Job already processed",!0);const i={job_id:this.currentJob.job_id};Metro.getPlugin("#standard-columns","drag-items").component.childNodes.forEach((u,l)=>{l<this.columns.length&&(i[this.columns[l]]=u.innerText)}),I.F.loading("process_job",!1),this.data.apiService("job/process",i).subscribe(u=>{I.F.loading("process_job",!0),I.F.fire(u.message,!u.status),u.status&&(Metro.dialog.close("#job-detail-dialog"),this.getJobs())},u=>{I.F.loading("process_job",!0)})}checkForInvalid(i){if(0!=this.currentJob.status)return void I.F.fire("Job already processed",!0);const s=this;setTimeout(()=>{$(".invalid").length>0?I.F.invalidForm("#data-form"):s.processJobDetails()},200)}processJobDetails(){const i=$("#data-form").serializeArray(),s={job_id:this.currentJob.job_id};i.forEach(u=>{s[u.name]=u.value}),I.F.loading("update_job_details",!1),this.data.apiService("update_job_details",s).subscribe(u=>{I.F.loading("update_job_details",!0),I.F.fire("Job updated successfully",!1),Metro.dialog.close("#job-detail-dialog"),this.getJobs()},u=>{I.F.loading("update_job_details",!0),I.F.fire("Job updated failed",!0)})}}return n.\u0275fac=function(i){return new(i||n)(c.Y36(I.F))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-quality-check"]],decls:105,vars:17,consts:[[1,"container","h-100","p-0",2,"background","rgba(255,255,255,0.75)","overflow","auto"],[1,"mt-8","pb-5","pl-3","pr-3","pt-20","skill-box",2,"background","rgba(255,255,255,0.7)"],[1,"header","fg-white",2,"background","rgba(138, 162, 174,0.7)"],[1,"avatar"],[1,"icon","mif-2x","mif-chart-line"],[1,"title"],[1,"items-list","p-0"],["class","item c-pointer","style","height: 140px !important;",4,"ngFor","ngForOf"],["id","job-detail-dialog","data-role","dialog","data-close-button","true","data-width","720",1,"dialog","top-dialog"],[1,"dialog-title"],[1,"dialog-content","pt-0","pb-0",2,"overflow","auto"],["data-app-bar","false","data-role","materialtabs",1,"flex-justify-center","bg-lightGray"],[1,"active"],["href","#job-column"],["href","#job-details"],["href","#job-attributes"],["href","#job-map",3,"click"],[1,"bg-light","mt-2"],["id","job-column"],[1,"bg-lightAmber",2,"font-size","10px"],[1,"d-flex"],[1,"items-list"],[4,"ngFor","ngForOf"],["data-role","drag-items","id","standard-columns",1,"items-list"],["class","d-flex flex-justify-end w-100 bg-light p-1","style","position: sticky;bottom: 0;z-index: 1;",4,"ngIf"],["id","job-details"],["id","data-form","data-clear-invalid","3000","data-role","validator","action","javascript:",3,"submit"],[1,"form-group","d-flex","flex-column"],["type","text","name","description","data-role","input","placeholder","Enter description","data-prepend","<span class='mif-info'>","data-label","Description","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required minlength=6",3,"value"],[1,"invalid_feedback"],["type","text","name","country","data-role","input","placeholder","Enter country name","data-prepend","<span class='mif-info'>","data-label","Country","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required",3,"value"],["type","text","name","state","data-role","input","placeholder","Enter state name","data-prepend","<span class='mif-info'>","data-label","State","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required",3,"value"],["type","text","name","county","data-role","input","placeholder","Enter county name","data-prepend","<span class='mif-info'>","data-label","County","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required",3,"value"],["type","text","name","open_data_url","data-role","input","placeholder","Enter open data url","data-prepend","<span class='mif-info'>","data-label","Open Data URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required",3,"value"],["type","text","name","download_url","data-role","input","placeholder","Enter download url","data-prepend","<span class='mif-info'>","data-label","Download URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required",3,"value"],["type","text","name","mapping_service_url","data-role","input","placeholder","Enter mapping service url","data-prepend","<span class='mif-info'>","data-label","Mapping Service URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required",3,"value"],["type","text","name","property_search_url","data-role","input","placeholder","Enter property search url","data-prepend","<span class='mif-info'>","data-label","Property Search URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required",3,"value"],[1,"form-group","d-flex","flex-column","mb-3"],["type","text","name","tax_collect_url","data-role","input","placeholder","tax collect url","data-prepend","<span class='mif-info'>","data-label","Tax Collect URL","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","data-validate","required",3,"value"],[1,"d-flex","flex-justify-end","w-100","bg-light","p-1",2,"position","sticky","bottom","0","z-index","1"],["type","submit",1,"image-button","warning"],[1,"icon","mif-cloud-upload"],[1,"caption"],["id","job-attributes"],["id","grid-table","data-role","table","data-show-search","true","data-show-rows-steps","true","data-show-table-info","true","data-show-pagination","true","data-rows","5","data-rows-steps","5,15,35,50",1,"table"],["id","job-map"],["id","map",1,"w-100","d-block",2,"height","400px"],[1,"dialog-actions","d-none"],[1,"button","js-dialog-close"],[1,"button","primary","js-dialog-close"],["data-role","dialog","id","info-dialog","data-close-button","true",1,"dialog","top-dialog"],[1,"dialog-content",2,"overflow","auto"],["class","item",4,"ngFor","ngForOf"],[1,"dialog-actions"],[1,"item","c-pointer",2,"height","140px !important"],[1,"avatar","mif-chart-line","fg-amber"],[1,"label"],[1,"second-label","d-flex","flex-column"],[1,"mt-1"],[1,"second-action","d-flex","flex-justify-between",2,"width","260px"],[1,"d-flex","flex-column",2,"margin-top","-20px"],[1,"image-button","light",3,"click"],[1,"icon","mif-list"],["class","image-button alert",3,"click",4,"ngIf"],["style","font-size: 20px;padding: 4px;","class","fg-green mif-done_all",4,"ngIf"],["style","font-size: 20px;padding: 4px;","class","mif-hour-glass",4,"ngIf"],[1,"image-button","alert",3,"click"],[1,"icon","mif-bin"],[1,"fg-green","mif-done_all",2,"font-size","20px","padding","4px"],[1,"mif-hour-glass",2,"font-size","20px","padding","4px"],[1,"image-button","warning",3,"click"],[1,"icon","mif-chart-line"],[1,"item"],[1,"avatar","mif-info","fg-cyan"],[1,"second-label"]],template:function(i,s){1&i&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"span",4),c.qZA(),c.TgZ(5,"div",5),c._uU(6,"Standardize"),c.qZA(),c.qZA(),c.TgZ(7,"div",6),c.YNc(8,Wg,22,8,"div",7),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",8),c.TgZ(10,"div",9),c._uU(11),c.qZA(),c.TgZ(12,"div",10),c.TgZ(13,"ul",11),c.TgZ(14,"li",12),c.TgZ(15,"a",13),c._uU(16,"Standardize"),c.qZA(),c.qZA(),c.TgZ(17,"li"),c.TgZ(18,"a",14),c._uU(19,"Details"),c.qZA(),c.qZA(),c.TgZ(20,"li"),c.TgZ(21,"a",15),c._uU(22,"Attributes"),c.qZA(),c.qZA(),c.TgZ(23,"li"),c.TgZ(24,"a",16),c.NdJ("click",function(){return s.resizeMap()}),c._uU(25,"Map View"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"div",17),c.TgZ(27,"div",18),c.TgZ(28,"div",19),c._uU(29,"Note: Adjust the right columns to the left. All other columns will be neglected during processing"),c.qZA(),c.TgZ(30,"div",20),c.TgZ(31,"ul",21),c.TgZ(32,"li"),c._uU(33,"Geometry"),c.qZA(),c.qZA(),c.TgZ(34,"ul",21),c.TgZ(35,"li"),c._uU(36,"geometry(auto detected)"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(37,"div",20),c.TgZ(38,"ul",21),c.YNc(39,Vg,2,1,"li",22),c.qZA(),c.TgZ(40,"ul",23),c.YNc(41,Qg,2,1,"li",22),c.qZA(),c.qZA(),c.YNc(42,Kg,5,0,"div",24),c.qZA(),c.TgZ(43,"div",25),c.TgZ(44,"form",26),c.NdJ("submit",function(l){return s.checkForInvalid(l)}),c.TgZ(45,"div",27),c._UZ(46,"input",28),c.TgZ(47,"span",29),c._uU(48," Description is required and must be at least of 6 characters "),c.qZA(),c.qZA(),c.TgZ(49,"div",27),c._UZ(50,"input",30),c.TgZ(51,"span",29),c._uU(52," Country is required "),c.qZA(),c.qZA(),c.TgZ(53,"div",27),c._UZ(54,"input",31),c.TgZ(55,"span",29),c._uU(56," State is required "),c.qZA(),c.qZA(),c.TgZ(57,"div",27),c._UZ(58,"input",32),c.TgZ(59,"span",29),c._uU(60," County is required "),c.qZA(),c.qZA(),c.TgZ(61,"div",27),c._UZ(62,"input",33),c.TgZ(63,"span",29),c._uU(64," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(65,"div",27),c._UZ(66,"input",34),c.TgZ(67,"span",29),c._uU(68," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(69,"div",27),c._UZ(70,"input",35),c.TgZ(71,"span",29),c._uU(72," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(73,"div",27),c._UZ(74,"input",36),c.TgZ(75,"span",29),c._uU(76," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(77,"div",37),c._UZ(78,"input",38),c.TgZ(79,"span",29),c._uU(80," Invalid URL "),c.qZA(),c.qZA(),c.TgZ(81,"div",39),c.TgZ(82,"button",40),c._UZ(83,"span",41),c.TgZ(84,"span",42),c._uU(85,"Update Details"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(86,"div",43),c._UZ(87,"table",44),c.qZA(),c.TgZ(88,"div",45),c._UZ(89,"div",46),c.qZA(),c.qZA(),c.qZA(),c.TgZ(90,"div",47),c.TgZ(91,"button",48),c._uU(92,"Disagree"),c.qZA(),c.TgZ(93,"button",49),c._uU(94,"Agree"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(95,"div",50),c.TgZ(96,"div",9),c._uU(97,"Property Info"),c.qZA(),c.TgZ(98,"div",51),c.TgZ(99,"div",21),c.YNc(100,td,6,2,"div",52),c.ALo(101,"keyvalue"),c.qZA(),c.qZA(),c.TgZ(102,"div",53),c.TgZ(103,"button",48),c._uU(104,"Close"),c.qZA(),c.qZA(),c.qZA()),2&i&&(c.xp6(8),c.Q6J("ngForOf",s.jobs),c.xp6(3),c.hij("Job: ",s.job.name,""),c.xp6(28),c.Q6J("ngForOf",s.columns),c.xp6(2),c.Q6J("ngForOf",s.job.columns),c.xp6(1),c.Q6J("ngIf",0==s.currentJob.status),c.xp6(4),c.s9C("value",s.job.details.description),c.xp6(4),c.s9C("value",s.job.details.country),c.xp6(4),c.s9C("value",s.job.details.state),c.xp6(4),c.s9C("value",s.job.details.county),c.xp6(4),c.s9C("value",s.job.details.open_data_url),c.xp6(4),c.s9C("value",s.job.details.download_url),c.xp6(4),c.s9C("value",s.job.details.mapping_service_url),c.xp6(4),c.s9C("value",s.job.details.property_search_url),c.xp6(4),c.s9C("value",s.job.details.tax_collect_url),c.xp6(22),c.Q6J("ngForOf",c.lcZ(101,15,s.properties)))},directives:[F.sg,F.O5],pipes:[F.Nd],styles:[""]}),n})(),ed=(()=>{class n{constructor(i,s){this.http=i,this.data=s}canActivate(i,s){return I.F.loading("upload",!1),new Promise((u,l)=>this.http.get(I.F.server+"check/user/upload").subscribe(h=>{I.F.loading("upload",!0),u(!0)},h=>{I.F.loading("upload",!0),403==h.status&&this.data.logOut(),u(!1)}))}}return n.\u0275fac=function(i){return new(i||n)(c.LFG(P.eN),c.LFG(I.F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nd=(()=>{class n{constructor(i,s){this.http=i,this.data=s}canActivate(i,s){return I.F.loading("standard",!1),new Promise((u,l)=>this.http.get(I.F.server+"check/user/standard").subscribe(h=>{I.F.loading("standard",!0),u(!0)},h=>{I.F.loading("standard",!0),403==h.status&&this.data.logOut(),u(!1)}))}}return n.\u0275fac=function(i){return new(i||n)(c.LFG(P.eN),c.LFG(I.F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rd=(()=>{class n{constructor(i,s){this.http=i,this.data=s}canActivate(i,s){return I.F.loading("normalize",!1),new Promise((u,l)=>this.http.get(I.F.server+"check/user/normalize").subscribe(h=>{I.F.loading("normalize",!0),u(!0)},h=>{I.F.loading("normalize",!0),403==h.status&&this.data.logOut(),u(!1)}))}}return n.\u0275fac=function(i){return new(i||n)(c.LFG(P.eN),c.LFG(I.F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vf=(()=>{class n{constructor(i,s){this.http=i,this.data=s}canActivate(i,s){return new Promise((u,l)=>this.http.get(I.F.server+"check/user/admin").subscribe(h=>{u(!0)},h=>{403==h.status&&this.data.logOut(),u(!1)}))}}return n.\u0275fac=function(i){return new(i||n)(c.LFG(P.eN),c.LFG(I.F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const id=function(n,r){return{active:n,"no-link":r}};function od(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"li",23),c.NdJ("click",function(){const l=c.CHM(i).$implicit;return c.oxw().getUsersData(l.url)}),c._UZ(1,"a",24),c.qZA()}if(2&n){const i=r.$implicit;c.Tol(c.WLB(3,id,i.active,null==i.url)),c.xp6(1),c.Q6J("innerHTML",i.label,c.oJD)}}function ad(n,r){if(1&n){const i=c.EpF();c.TgZ(0,"div",12),c._UZ(1,"span",13),c.TgZ(2,"span",14),c._uU(3),c.qZA(),c.TgZ(4,"span",15),c._uU(5,"Collectable"),c.qZA(),c.TgZ(6,"span",16),c.NdJ("click",function(){const l=c.CHM(i).$implicit;return c.oxw().delColumn(l)}),c.qZA(),c.qZA()}if(2&n){const i=r.$implicit;c.xp6(3),c.Oqu(i)}}const ud=[{path:"",redirectTo:"/dashboard/app/map",pathMatch:"full"},{path:"app",component:U,children:[{path:"map",component:Gg,canActivate:[Ug]},{path:"upload",component:Jg,canActivate:[ed]},{path:"standard",component:mf,canActivate:[nd]},{path:"normalise",component:mf,canActivate:[rd]},{path:"management",component:(()=>{class n{constructor(i){this.data=i,this.searchDelayId=-1,this.users={items:[],links:[]},this.currentPage=1}ngOnInit(){this.getUsersData();const i=this;$(document).on("click",".edit-user",s=>{const u=s.target.getAttribute("value");i.editUser(this.users.items[u])}),$(document).on("click",".del-user",s=>{const u=s.target.getAttribute("value");i.delUser(this.users.items[u])}),$(document).on("click",".password-user",s=>{const u=s.target.getAttribute("value");i.changeUserPass(this.users.items[u])})}getUsersData(i="?page=1"){let s=i.split("="),u=Number($("#per-page").val());s=s[s.length-1];let l=$("#search").val();l=0===l.trim().length?"%":`%${l}%`,I.F.loading("users"),this.data.apiGetService(`users?page=${s}&size=${u}`).subscribe(h=>{I.F.loading("users",!0),this.users=h,$("#per-page").off("change"),Metro.getPlugin("#per-page","select").val(h.per_page),$("#per-page").on("change",()=>{$("#per-page").off("change"),this.getUsersData()}),$("#user-table tbody").empty();const g=$("#user-table").data("table");let d=[];const p=["email","first_name","last_name","time_created","role_id"],m=["Email","First Name","Last Name","Created On","Role"];if(p.forEach((v,_)=>{d.push({name:v,title:m[_],sortable:!1})}),d.push({name:"Actions",title:"Actions",sortable:!1}),h.items.length>0){const v=$("#user-table").data("table"),_=[];h.items.forEach((E,X)=>{let k=[];p.forEach(it=>{if("role_id"==it)switch(E[it]){case 0:k.push("Admin");break;case 1:k.push("Data");break;case 2:k.push("Standardize");break;case 3:k.push("Normalize");break;case 4:k.push("Viewer")}else k.push(`${E[it]}`)}),0!==E.role_id&&k.push(`\n<button value="${X}" class="edit-user button small light">Edit</button>\n<button value="${X}" class="password-user button small info">Change Password</button>\n<button value="${X}" class="del-user button small alert">Delete</button>\n`),_.push(k)}),v.setData({header:d,data:_}),v.draw()}else g.setData({header:d,data:[]}),g.draw()},h=>{I.F.loading("users",!0)})}onSearch(i){const s=$("#search").val();13!=i.keyCode&&null!=i.keyCode?(clearTimeout(this.searchDelayId),this.searchDelayId=setTimeout(()=>{const u=$("#search").val();(s==u&&u.length>0||0==this.users.items.length)&&this.getUsersData()},1e3)):this.getUsersData()}openProperty(i){}buyGrid(i){}logout(){this.data.logOut()}editUser(i){const s=this;Metro.dialog.create({title:"Edit User",content:`<ul id="property-error-div"></ul><div class="form-group">\n<input type="text" id="first-name" data-role="materialinput" value="${i.first_name}"\n       placeholder="Enter first name"\n       data-icon="<span class='mif-info'>"\n       data-label="First name"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n       data-validate="required minlength=2"\n><input type="text" id="last-name" data-role="materialinput" value="${i.last_name}"\n       placeholder="Enter last name"\n       data-icon="<span class='mif-info'>"\n       data-label="First name"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n       data-validate="required minlength=2"\n><select type="text" id="role" data-role="select" value="${i.role_id}"\n       data-icon="<span class='mif-info'>"\n       data-label="Role"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n>\n<option value="1">Data</option>\n<option value="2">Standardize</option>\n\x3c!--<option value="3">Normalize</option>--\x3e\n<option value="4">Viewer</option>\n</select></div>`,clsDialog:"edit-user-dialog top-dialog",actions:[{caption:"Update",cls:"success",onclick:function(){$("#property-error-div").empty();const l=Metro.validator,h=$("#first-name"),g=$("#last-name"),d=$("#role"),p=[];if(l.validate(h)||p.push("First name must be at least 2 characters"),l.validate(g)||p.push("Last name must be at least 2 characters"),p.length>0)return p.forEach(m=>{$("#property-error-div").append(`<li>${m}</li>`)}),setTimeout(()=>{$("#property-error-div").empty()},5e3),void I.F.invalidForm("#property-error-div");Metro.dialog.close(".edit-user-dialog"),s.postEditUser({email:i.email,first_name:h.val(),last_name:g.val(),role_id:d.val()})}},{caption:"Cancel",cls:"js-dialog-close light",onclick:function(){}}]})}postEditUser(i){I.F.loading("update_user",!1),this.data.apiService("user/update",i).subscribe(s=>{I.F.loading("update_user",!0),I.F.fire("User updated successfully",!1),this.getUsersData()},s=>{I.F.loading("update_user",!0)})}changeUserPass(i){const s=this;Metro.dialog.create({title:"Change User Password",content:'<ul id="property-error-div"></ul><div class="form-group">\n<input type="text" id="password" name="password" data-role="materialinput"\n       placeholder="Enter Password"\n       data-icon="<span class=\'mif-lock\'>"\n       data-label="New Password"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n       data-validate="required minlength=8"\n><input type="text" id="repassword" name="repassword" data-role="materialinput"\n       placeholder="Renter Password"\n       data-icon="<span class=\'mif-lock\'>"\n       data-label="Renter Password"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n       data-validate="required compare=password"\n>\n</div>',clsDialog:"edit-password-dialog top-dialog",actions:[{caption:"Change",cls:"success",onclick:function(){$("#property-error-div").empty();const l=Metro.validator,h=$("#password"),g=$("#repassword"),d=[];if(l.validate(g)||d.push("Password must be matched and 8 character long"),d.length>0)return d.forEach(p=>{$("#property-error-div").append(`<li>${p}</li>`)}),setTimeout(()=>{$("#property-error-div").empty()},5e3),void I.F.invalidForm("#property-error-div");Metro.dialog.close(".edit-password-dialog"),s.postChangePassword({email:i.email,password:h.val()})}},{caption:"Cancel",cls:"js-dialog-close light",onclick:function(){}}]})}postChangePassword(i){I.F.loading("password_user",!1),this.data.apiService("user/change/password",i).subscribe(s=>{I.F.loading("password_user",!0),I.F.fire("User password changed successfully",!1),this.getUsersData()},s=>{I.F.loading("password_user",!0)})}delUser(i){const s=this;Metro.dialog.create({title:"Delete User",content:"Do you want to delete user "+i.email+"?",clsDialog:"buy-land-dialog",actions:[{caption:"Yes, Delete!",cls:"alert",onclick:function(){Metro.dialog.close(".buy-land-dialog"),s.postDeleteUser(i.email)}},{caption:"No",cls:"js-dialog-close success",onclick:function(){}}]})}postDeleteUser(i){I.F.loading("delete_user",!1),this.data.apiGetService("user/delete/"+i).subscribe(s=>{I.F.loading("delete_user",!0),I.F.fire("User deleted successfully",!1),this.getUsersData()},s=>{I.F.loading("delete_user",!0)})}addUser(){const i=this;Metro.dialog.create({title:"New User",content:'\n<div class="form-group">\n<input autocomplete="off" type="text" id="first_name" data-role="materialinput"\n placeholder="Enter first name"\n data-icon="<span class=\'mif-info\'>"\n data-label="First Name"\n data-cls-line="bg-cyan"\n data-cls-label="fg-cyan"\n data-cls-informer="fg-lightCyan"\n data-cls-icon="fg-darkCyan"\n data-validate="required minlength=3"\n>\n<input autocomplete="off" type="text" id="last_name" data-role="materialinput"\n placeholder="Enter last name"\n data-icon="<span class=\'mif-info\'>"\n data-label="Last Name"\n data-cls-line="bg-cyan"\n data-cls-label="fg-cyan"\n data-cls-informer="fg-lightCyan"\n data-cls-icon="fg-darkCyan"\n data-validate="required minlength=3"\n>\n<input autocomplete="off" type="email" id="email" data-role="materialinput"\n placeholder="Enter email"\n data-icon="<span class=\'mif-envelop\'>"\n data-label="Email"\n data-cls-line="bg-cyan"\n data-cls-label="fg-cyan"\n data-cls-informer="fg-lightCyan"\n data-cls-icon="fg-darkCyan"\n data-validate="required email"\n>\n<input autocomplete="off" type="password" name="password" id="password" data-role="materialinput"\n placeholder="Enter new password"\n data-icon="<span class=\'mif-lock\'>"\n data-label="New Password"\n data-cls-line="bg-cyan"\n data-cls-label="fg-cyan"\n data-cls-informer="fg-lightCyan"\n data-cls-icon="fg-darkCyan"\n data-validate="required"\n>\n<input autocomplete="off" type="password" id="re-password" data-role="materialinput"\n placeholder="Retype new password"\n data-icon="<span class=\'mif-lock\'>"\n data-label="Retype New Password"\n data-cls-line="bg-cyan"\n data-cls-label="fg-cyan"\n data-cls-informer="fg-lightCyan"\n data-cls-icon="fg-darkCyan"\n data-validate="required compare=password minlength=8"\n>\n<select autocomplete="off" type="text" id="user-role" data-role="select"\n placeholder="Select user role"\n data-icon="<span class=\'mif-users\'>"\n data-label="User Role"\n data-cls-line="bg-cyan"\n data-cls-label="fg-cyan"\n data-cls-informer="fg-lightCyan"\n data-cls-icon="fg-darkCyan"\n>\n<option value="1">Data</option>\n<option value="2">Standardize</option>\n\x3c!--<option value="3">Normalize</option>--\x3e\n<option value="4" selected>Viewer</option>\n</select>\n<ul id="property-error-div" class="fg-red"></ul>\n</div>',clsDialog:"add-user-dialog top-dialog",actions:[{caption:"Add User",cls:"dark",onclick:function(){$("#property-error-div").empty();const u=Metro.validator,l=[],h=$("#first_name"),g=$("#last_name"),d=$("#email"),p=$("#re-password");if(u.validate(h)||l.push("First name should be at least of 3 characters"),u.validate(g)||l.push("Last name should be at least of 3 characters"),u.validate(d)||l.push("Email is not valid"),u.validate(p)||l.push("Passwords must me matched. With minimum 8 characters"),l.length>0)return l.forEach(m=>{$("#property-error-div").append(`<li>${m}</li>`)}),setTimeout(()=>{$("#property-error-div").empty()},5e3),void I.F.invalidForm("#property-error-div");Metro.dialog.close(".add-user-dialog"),i.postAddUser({first_name:h.val(),last_name:g.val(),email:d.val(),password:p.val(),role_id:$("#user-role").val()})}},{caption:"Cancel",cls:"js-dialog-close light",onclick:function(){}}]}),setTimeout(()=>{$("#email, #password").val("")},1e3)}postAddUser(i){I.F.loading("add-user",!1),this.data.apiService("user/add",i).subscribe(s=>{I.F.loading("add-user",!0),I.F.fire(s.message,!s.status),s.status&&this.getUsersData()},s=>{I.F.loading("add-user",!0)})}}return n.\u0275fac=function(i){return new(i||n)(c.Y36(I.F))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-admin"]],decls:30,vars:1,consts:[[1,"container","h-100","p-0",2,"background","rgba(255,255,255,0.75)","overflow","auto"],[1,"mt-8","pb-5","pl-3","pr-3","pt-20","skill-box",2,"background","rgba(255,255,255,0.7)"],[1,"header","fg-white",2,"background","rgba(138, 162, 174,0.7)"],[1,"avatar"],[1,"icon","mif-2x","mif-users"],[1,"title"],[1,"w-100",2,"height","50px"],[1,"image-button","secondary","float-right",3,"click"],[1,"icon","mif-user-plus"],[1,"caption"],[1,"row","flex-align-center","flex-justify-between"],[1,"ml-1",2,"width","130px"],["type","text","data-role","materialinput","placeholder","Search","data-icon","<span class='mif-search'>","data-label","Search","data-informer","","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","id","search",3,"keyup"],[1,"mr-1",2,"width","200px"],["id","per-page","data-role","select"],["value","5","data-template","<span class='mif-list-numbered icon'></span> $1"],["value","10","selected","","data-template","<span class='mif-list-numbered icon'></span> $1"],["value","15","data-template","<span class='mif-list-numbered icon'></span> $1"],["value","20","data-template","<span class='mif-list-numbered icon'></span> $1"],["value","25","data-template","<span class='mif-list-numbered icon'></span> $1"],["id","user-table","data-role","table","data-show-search","false","data-show-rows-steps","false","data-show-table-info","false","data-show-pagination","false",1,"table"],[1,"pagination"],["class","page-item",3,"class","click",4,"ngFor","ngForOf"],[1,"page-item",3,"click"],[1,"page-link","c-pointer",3,"innerHTML"]],template:function(i,s){1&i&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"span",4),c.qZA(),c.TgZ(5,"div",5),c._uU(6,"Users"),c.qZA(),c.qZA(),c.TgZ(7,"div",6),c.TgZ(8,"button",7),c.NdJ("click",function(){return s.addUser()}),c._UZ(9,"span",8),c.TgZ(10,"span",9),c._uU(11,"Add User"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",10),c.TgZ(13,"div",11),c.TgZ(14,"input",12),c.NdJ("keyup",function(l){return s.onSearch(l)}),c.qZA(),c.qZA(),c.TgZ(15,"div",13),c.TgZ(16,"select",14),c.TgZ(17,"option",15),c._uU(18,"5"),c.qZA(),c.TgZ(19,"option",16),c._uU(20,"10"),c.qZA(),c.TgZ(21,"option",17),c._uU(22,"15"),c.qZA(),c.TgZ(23,"option",18),c._uU(24,"20"),c.qZA(),c.TgZ(25,"option",19),c._uU(26,"25"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(27,"table",20),c.TgZ(28,"ul",21),c.YNc(29,od,2,6,"li",22),c.qZA(),c.qZA(),c.qZA()),2&i&&(c.xp6(29),c.Q6J("ngForOf",s.users.links))},directives:[F.sg],styles:[""]}),n})(),canActivate:[vf]},{path:"schema",component:(()=>{class n{constructor(i){this.data=i,this.columns=[]}ngOnInit(){this.getSchema()}getSchema(){this.columns=[],I.F.loading("get_schema_column"),this.data.apiGetService("get_schema_column").subscribe(i=>{I.F.loading("get_schema_column",!0),i.forEach(s=>{-1===["id","attributes","geometry","job_id"].indexOf(s.column_name)&&this.columns.push(s.column_name)}),console.log(this.columns)},i=>{I.F.loading("get_schema_column",!0)})}delColumn(i){I.F.loading("del_schema_column",!1),this.data.apiGetService("del_schema_column/"+i).subscribe(s=>{I.F.fire("Schema updated successfully",!1),I.F.loading("del_schema_column",!0),this.getSchema()},s=>{I.F.fire("Failed to update schema",!0),I.F.loading("del_schema_column",!0)})}addColumn(){const i=this;Metro.dialog.create({title:"Please enter field name",content:'<div id="property-error-div"></div><div class="form-group">\n<input type="text" id="field-name" data-role="materialinput"\n       placeholder="Enter field name"\n       data-icon="<span class=\'mif-info\'>"\n       data-label="Field name"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n></div>',clsDialog:"field-dialog",actions:[{caption:"Add",cls:"success",onclick:function(){const u=$("#field-name").val();if(u.length<2)return $("#property-error-div").empty().append("Field name must be at least 2 characters"),void I.F.invalidForm("#property-error-div");Metro.dialog.close(".field-dialog"),i.postAddColumn(u)}},{caption:"Cancel",cls:"js-dialog-close light",onclick:function(){}}]})}postAddColumn(i){I.F.loading("add_schema_column",!1),this.data.apiGetService("add_schema_column/"+i).subscribe(s=>{I.F.fire("Schema updated successfully",!1),I.F.loading("add_schema_column",!0),this.getSchema()},s=>{I.F.fire("Failed to update schema",!0),I.F.loading("add_schema_column",!0)})}}return n.\u0275fac=function(i){return new(i||n)(c.Y36(I.F))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-data-schema"]],decls:14,vars:1,consts:[[1,"container","h-100","p-0",2,"background","rgba(255,255,255,0.75)","overflow","auto"],[1,"mt-8","pb-5","pl-3","pr-3","pt-20","skill-box",2,"background","rgba(255,255,255,0.7)"],[1,"header","fg-white",2,"background","rgba(138, 162, 174,0.7)"],[1,"avatar"],[1,"icon","mif-2x","mif-database"],[1,"title"],[1,"w-100",2,"height","50px"],[1,"image-button","secondary","float-right",3,"click"],[1,"icon","mif-database"],[1,"caption"],[1,"items-list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"avatar","mif-database"],[1,"label"],[1,"second-label"],[1,"second-action","mif-bin","fg-red",3,"click"]],template:function(i,s){1&i&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"span",4),c.qZA(),c.TgZ(5,"div",5),c._uU(6,"Data Schema"),c.qZA(),c.qZA(),c.TgZ(7,"div",6),c.TgZ(8,"button",7),c.NdJ("click",function(){return s.addColumn()}),c._UZ(9,"span",8),c.TgZ(10,"span",9),c._uU(11,"Add Collectable"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",10),c.YNc(13,ad,7,1,"div",11),c.qZA(),c.qZA(),c.qZA()),2&i&&(c.xp6(13),c.Q6J("ngForOf",s.columns))},directives:[F.sg],styles:[""]}),n})(),canActivate:[vf]}]}];let ld=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[V.Bz.forChild(ud)],V.Bz]}),n})(),cd=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[F.ez,ld]]}),n})()}}]);