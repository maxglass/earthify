"use strict";(self.webpackChunkEarthify_UI=self.webpackChunkEarthify_UI||[]).push([[72],{8072:(w,f,s)=>{s.r(f),s.d(f,{AdminModule:()=>U});var b=s(8583),v=s(6901),d=s(2936),e=s(639);const A=function(a,l){return{active:a,"no-link":l}};function T(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"li",26),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().getMarketData(o.url)}),e._UZ(1,"a",27),e.qZA()}if(2&a){const t=l.$implicit;e.Tol(e.WLB(3,A,t.active,null==t.url)),e.xp6(1),e.Q6J("innerHTML",t.label,e.oJD)}}const x=[{path:"",redirectTo:"/admin/app",pathMatch:"full"},{path:"app",component:(()=>{class a{constructor(t){this.data=t,this.searchDelayId=-1,this.market={items:[],links:[]}}ngOnInit(){this.getMarketData();const t=this;$(document).on("click",".edit-user",i=>{const n=i.target.getAttribute("value");t.editUser(this.market.items[n])}),$(document).on("click",".del-user",i=>{const n=i.target.getAttribute("value");t.delUser(this.market.items[n])})}getMarketData(t="?page=1"){let i=t.split("="),n=Number($("#per-page").val());i=i[i.length-1];let o=$("#search").val();o=0===o.trim().length?"%":`%${o}%`,d.F.loading("marketplace"),this.data.apiGetService(`users?page=${i}&size=${n}`).subscribe(c=>{d.F.loading("marketplace",!0),this.market=c,$("#per-page").off("change"),Metro.getPlugin("#per-page","select").val(c.per_page),$("#per-page").on("change",()=>{$("#per-page").off("change"),this.getMarketData()}),$("#user-table tbody").empty();const y=$("#user-table").data("table");let p=[];const k=["email","first_name","last_name","time_created","role_id"],D=["Email","First Name","Last Name","Created On","Role"];if(k.forEach((u,m)=>{p.push({name:u,title:D[m],sortable:!1})}),p.push({name:"Actions",title:"Actions",sortable:!1}),c.items.length>0){const u=$("#user-table").data("table"),m=[];c.items.forEach((g,Z)=>{let r=[];k.forEach(h=>{if("role_id"==h)switch(g[h]){case 0:r.push("Admin");break;case 1:r.push("Data");break;case 2:r.push("Viewer");break;case 3:r.push("Quality Control")}else r.push(`${g[h]}`)}),0!==g.role_id&&r.push(`\n<button value="${Z}" class="edit-user button small light">Edit</button>\n<button value="${Z}" class="del-user button small alert">Delete</button>\n`),m.push(r)}),u.setData({header:p,data:m}),u.draw()}else y.setData({header:p,data:[]}),y.draw()},c=>{d.F.loading("marketplace",!0)})}onSearch(t){const i=$("#search").val();13!=t.keyCode&&null!=t.keyCode?(clearTimeout(this.searchDelayId),this.searchDelayId=setTimeout(()=>{const n=$("#search").val();(i==n&&n.length>0||0==this.market.items.length)&&this.getMarketData()},1e3)):this.getMarketData()}openProperty(t){}buyGrid(t){}logout(){this.data.logOut()}editUser(t){Metro.dialog.create({title:"Edit User",content:`<div id="property-error-div"></div><div class="form-group">\n<input type="text" id="first-name" data-role="materialinput" value="${t.first_name}"\n       placeholder="Enter first name"\n       data-icon="<span class='mif-info'>"\n       data-label="First name"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n><input type="text" id="last-name" data-role="materialinput" value="${t.last_name}"\n       placeholder="Enter first name"\n       data-icon="<span class='mif-info'>"\n       data-label="First name"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n><select type="text" id="role" data-role="select" value="${t.role_id}"\n       data-icon="<span class='mif-info'>"\n       data-label="Role"\n       data-cls-line="bg-cyan"\n       data-cls-label="fg-cyan"\n       data-cls-informer="fg-lightCyan"\n       data-cls-icon="fg-darkCyan"\n>\n<option value="1">Data</option>\n<option value="2">Viewer</option>\n<option value="3">QC</option>\n</select></div>`,clsDialog:"buy-land-dialog",actions:[{caption:"Update",cls:"success",onclick:function(){if($("#property-name").val().length<2)return $("#property-error-div").empty().append("Property name must be at least 2 characters"),void d.F.invalidForm("#property-error-div");Metro.dialog.close(".buy-land-dialog")}},{caption:"Cancel",cls:"js-dialog-close light",onclick:function(){}}]})}delUser(t){Metro.dialog.create({title:"Delete User",content:"Do you want to delete user "+t.email+"?",clsDialog:"buy-land-dialog",actions:[{caption:"Yes, Delete!",cls:"alert",onclick:function(){Metro.dialog.close(".buy-land-dialog")}},{caption:"No",cls:"js-dialog-close success",onclick:function(){}}]})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(d.F))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-admin"]],decls:33,vars:1,consts:[["data-role","appbar","data-expand-point","md",1,"d-flex","bg-white"],["href","#",1,"brand","no-hover"],["src","assets/logo.jpg",1,"img-fluid",2,"height","50px"],[1,"app-bar-container","ml-auto"],[1,"app-bar-container","bg-light",2,"z-index","100000","position","fixed","top","0","right","0"],[1,"app-bar-item","c-pointer",3,"click"],[1,"ml-2","app-bar-name"],[1,"container","h-100","p-0",2,"background","rgba(255,255,255,0.75)","overflow","auto"],[1,"mt-8","pb-5","pl-3","pr-3","pt-20","skill-box",2,"background","rgba(255,255,255,0.7)"],[1,"header","fg-white",2,"background","rgba(138, 162, 174,0.7)"],[1,"avatar"],[1,"icon","mif-2x","mif-cart"],[1,"title"],[1,"row","flex-align-center","flex-justify-between"],[1,"ml-1",2,"width","130px"],["type","text","data-role","materialinput","placeholder","Search","data-icon","<span class='mif-search'>","data-label","Search","data-informer","","data-cls-line","bg-cyan","data-cls-label","fg-cyan","data-cls-informer","fg-lightCyan","data-cls-icon","fg-darkCyan","id","search",3,"keyup"],[1,"mr-1",2,"width","200px"],["id","per-page","data-role","select"],["value","5","data-template","<span class='mif-list-numbered icon'></span> $1"],["value","10","selected","","data-template","<span class='mif-list-numbered icon'></span> $1"],["value","15","data-template","<span class='mif-list-numbered icon'></span> $1"],["value","20","data-template","<span class='mif-list-numbered icon'></span> $1"],["value","25","data-template","<span class='mif-list-numbered icon'></span> $1"],["id","user-table","data-role","table","data-show-search","false","data-show-rows-steps","false","data-show-table-info","false","data-show-pagination","false",1,"table"],[1,"pagination"],["class","page-item",3,"class","click",4,"ngFor","ngForOf"],[1,"page-item",3,"click"],[1,"page-link","c-pointer",3,"innerHTML"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"a",5),e.NdJ("click",function(){return i.logout()}),e.TgZ(6,"span",6),e._uU(7,"Log Out"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e._UZ(12,"span",11),e.qZA(),e.TgZ(13,"div",12),e._uU(14,"Users"),e.qZA(),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"div",14),e.TgZ(17,"input",15),e.NdJ("keyup",function(o){return i.onSearch(o)}),e.qZA(),e.qZA(),e.TgZ(18,"div",16),e.TgZ(19,"select",17),e.TgZ(20,"option",18),e._uU(21,"5"),e.qZA(),e.TgZ(22,"option",19),e._uU(23,"10"),e.qZA(),e.TgZ(24,"option",20),e._uU(25,"15"),e.qZA(),e.TgZ(26,"option",21),e._uU(27,"20"),e.qZA(),e.TgZ(28,"option",22),e._uU(29,"25"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(30,"table",23),e.TgZ(31,"ul",24),e.YNc(32,T,2,6,"li",25),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(32),e.Q6J("ngForOf",i.market.links))},directives:[b.sg],styles:[""]}),a})(),canActivate:[s(2721).i]}];let M=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[v.Bz.forChild(x)],v.Bz]}),a})(),U=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[b.ez,M]]}),a})()}}]);